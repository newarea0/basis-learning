var __getOwnPropNames = Object.getOwnPropertyNames;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};

// ../../node_modules/.pnpm/sa-sdk-javascript@1.27.3/node_modules/sa-sdk-javascript/dist/web/sensorsdata.js
var require_sensorsdata = __commonJS({
  "../../node_modules/.pnpm/sa-sdk-javascript@1.27.3/node_modules/sa-sdk-javascript/dist/web/sensorsdata.js"(exports, module) {
    !function(e, t) {
      "object" == typeof exports && "object" == typeof module ? module.exports = t() : t();
    }(exports, function() {
      function e(e2) {
        if (!e2) return false;
        var t2 = Object.prototype.toString.call(e2);
        return "[object Function]" == t2 || "[object AsyncFunction]" == t2;
      }
      function t() {
        return Date.now && e(Date.now) ? Date.now() : (/* @__PURE__ */ new Date()).getTime();
      }
      function r(e2) {
        return null != e2 && "[object Object]" == Object.prototype.toString.call(e2);
      }
      function n() {
        if ("function" == typeof Uint32Array) {
          var e2 = "";
          if ("undefined" != typeof crypto ? e2 = crypto : "undefined" != typeof msCrypto && (e2 = msCrypto), r(e2) && e2.getRandomValues) {
            var t2 = new Uint32Array(1), n2 = e2.getRandomValues(t2)[0], i2 = Math.pow(2, 32);
            return n2 / i2;
          }
        }
        return Qi(1e19) / 1e19;
      }
      function i(e2) {
        var t2 = null;
        try {
          t2 = JSON.parse(e2);
        } catch (r2) {
        }
        return t2;
      }
      function a(e2, t2) {
        this.lockGetPrefix = e2 || "lock-get-prefix", this.lockSetPrefix = t2 || "lock-set-prefix";
      }
      function s(e2) {
        return "function" == typeof e2 || !(!e2 || "object" != typeof e2) && s(e2.listener);
      }
      function l() {
        this._events = {};
      }
      function u(e2) {
        var t2 = e2;
        try {
          t2 = decodeURIComponent(e2);
        } catch (r2) {
          t2 = e2;
        }
        return t2;
      }
      function c() {
        function e2() {
        }
        return "function" != typeof Object.create ? (e2.prototype = null, new e2()) : /* @__PURE__ */ Object.create(null);
      }
      function p(e2) {
        e2 = e2 || "";
        for (var t2 = c(), r2 = e2.substring(1), n2 = r2.split("&"), i2 = 0; i2 < n2.length; i2++) {
          var a2 = n2[i2].indexOf("=");
          if (a2 !== -1) {
            var o2 = n2[i2].substring(0, a2), s2 = n2[i2].substring(a2 + 1);
            o2 = u(o2), s2 = u(s2), "__proto__" !== o2 && "constructor" !== o2 && "prototype" !== o2 && (t2[o2] = s2);
          }
        }
        return t2;
      }
      function d(e2) {
        return "[object String]" == Object.prototype.toString.call(e2);
      }
      function f(e2) {
        return e2.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
      }
      function g(e2) {
        var t2 = function(e3) {
          this._fields = { Username: 4, Password: 5, Port: 7, Protocol: 2, Host: 6, Path: 8, URL: 0, QueryString: 9, Fragment: 10 }, this._values = {}, this._regex = /^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/, "undefined" != typeof e3 && this._parse(e3);
        };
        return t2.prototype.setUrl = function(e3) {
          this._parse(e3);
        }, t2.prototype._initValues = function() {
          for (var e3 in this._fields) this._values[e3] = "";
        }, t2.prototype.addQueryString = function(e3) {
          if ("object" != typeof e3) return false;
          var t3 = this._values.QueryString || "";
          for (var r2 in e3) t3 = new RegExp(r2 + "[^&]+").test(t3) ? t3.replace(new RegExp(r2 + "[^&]+"), r2 + "=" + e3[r2]) : "&" === t3.slice(-1) ? t3 + r2 + "=" + e3[r2] : "" === t3 ? r2 + "=" + e3[r2] : t3 + "&" + r2 + "=" + e3[r2];
          this._values.QueryString = t3;
        }, t2.prototype.getUrl = function() {
          var e3 = "";
          return e3 += this._values.Origin, e3 += this._values.Port ? ":" + this._values.Port : "", e3 += this._values.Path, e3 += this._values.QueryString ? "?" + this._values.QueryString : "", e3 += this._values.Fragment ? "#" + this._values.Fragment : "";
        }, t2.prototype._parse = function(e3) {
          this._initValues();
          var t3 = this._regex.exec(e3);
          t3 || Yi.log("URLParser::_parse -> Invalid URL");
          var r2 = e3.split("#"), n2 = r2[0], i2 = r2.slice(1).join("#");
          t3 = this._regex.exec(n2);
          for (var a2 in this._fields) "undefined" != typeof t3[this._fields[a2]] && (this._values[a2] = t3[this._fields[a2]]);
          this._values.Hostname = this._values.Host.replace(/:\d+$/, ""), this._values.Origin = this._values.Protocol + "://" + this._values.Hostname, this._values.Fragment = i2;
        }, new t2(e2);
      }
      function _(e2) {
        var t2 = {}, r2 = function() {
          var e3;
          try {
            return e3 = new URL("http://modernizr.com/"), "http://modernizr.com/" === e3.href;
          } catch (t3) {
            return false;
          }
        };
        if ("function" == typeof window.URL && r2()) t2 = new URL(e2), t2.searchParams || (t2.searchParams = function() {
          var e3 = p(t2.search);
          return { get: function(t3) {
            return e3[t3];
          } };
        }());
        else {
          d(e2) || (e2 = String(e2)), e2 = f(e2);
          var n2 = /^https?:\/\/.+/;
          if (n2.test(e2) === false) return void Yi.log("Invalid URL");
          var i2 = g(e2);
          t2.hash = i2._values.Fragment, t2.host = i2._values.Host ? i2._values.Host + (i2._values.Port ? ":" + i2._values.Port : "") : "", t2.href = i2._values.URL, t2.password = i2._values.Password, t2.pathname = i2._values.Path, t2.port = i2._values.Port, t2.search = i2._values.QueryString ? "?" + i2._values.QueryString : "", t2.username = i2._values.Username, t2.hostname = i2._values.Hostname, t2.protocol = i2._values.Protocol ? i2._values.Protocol + ":" : "", t2.origin = i2._values.Origin ? i2._values.Origin + (i2._values.Port ? ":" + i2._values.Port : "") : "", t2.searchParams = function() {
            var e3 = p("?" + i2._values.QueryString);
            return { get: function(t3) {
              return e3[t3];
            } };
          }();
        }
        return t2;
      }
      function h(e2) {
        return !(!e2 || 1 !== e2.nodeType);
      }
      function v(e2) {
        return void 0 === e2;
      }
      function y(t2) {
        return Array.isArray && e(y) ? Array.isArray(t2) : "[object Array]" === Object.prototype.toString.call(t2);
      }
      function b(e2) {
        return new ta(e2);
      }
      function w(e2, t2, r2, n2) {
        function i2(e3) {
          return e3 && (e3.preventDefault = i2.preventDefault, e3.stopPropagation = i2.stopPropagation, e3._getPath = i2._getPath), e3;
        }
        function a2(e3, t3, r3, n3) {
          var a3 = function(a4) {
            if (a4 = a4 || i2(window.event)) {
              a4.target = a4.srcElement;
              var o3, s2, l2 = true;
              return "function" == typeof r3 && (o3 = r3(a4)), s2 = t3.call(e3, a4), "beforeunload" !== n3 ? (false !== o3 && false !== s2 || (l2 = false), l2) : void 0;
            }
          };
          return a3;
        }
        i2._getPath = function() {
          var e3 = this;
          return this.path || this.composedPath && this.composedPath() || b(e3.target).getParents();
        }, i2.preventDefault = function() {
          this.returnValue = false;
        }, i2.stopPropagation = function() {
          this.cancelBubble = true;
        };
        var o2 = function(e3, t3, r3) {
          if (void 0 === n2 && "click" === t3 && (n2 = true), e3 && e3.addEventListener) e3.addEventListener(t3, function(e4) {
            e4._getPath = i2._getPath, r3.call(this, e4);
          }, n2);
          else {
            var o3 = "on" + t3, s2 = e3[o3];
            e3[o3] = a2(e3, r3, s2, t3);
          }
        };
        o2.apply(null, arguments);
      }
      function S(e2) {
        var t2 = "pushState" in window.history ? "popstate" : "hashchange";
        w(window, t2, e2);
      }
      function k(e2) {
        if (e2) return "undefined" != typeof window.XMLHttpRequest && "withCredentials" in new XMLHttpRequest() ? new XMLHttpRequest() : "undefined" != typeof XDomainRequest ? new XDomainRequest() : null;
        if ("undefined" != typeof window.XMLHttpRequest) return new XMLHttpRequest();
        if (window.ActiveXObject) try {
          return new ActiveXObject("Msxml2.XMLHTTP");
        } catch (t2) {
          try {
            return new ActiveXObject("Microsoft.XMLHTTP");
          } catch (t3) {
            Yi.log(t3);
          }
        }
      }
      function P(e2, t2, r2) {
        if ("object" == typeof e2 && "number" == typeof e2.length && e2.length > 0) if (Array.prototype.forEach && e2.forEach) e2.forEach(t2, r2);
        else for (var n2 = 0; n2 < e2.length; n2++) t2.call(r2, e2[n2], n2, e2);
        else if ("[object Object]" === Object.prototype.toString.call(e2)) for (var i2 in e2) Object.prototype.hasOwnProperty.call(e2, i2) && t2.call(r2, e2[i2], i2, e2);
      }
      function C(e2) {
        for (var t2 = 1; t2 < arguments.length; t2++) {
          var r2 = arguments[t2];
          if ("[object Object]" === Object.prototype.toString.call(r2)) for (var n2 in r2) Object.prototype.hasOwnProperty.call(r2, n2) && void 0 !== r2[n2] && (e2[n2] = r2[n2]);
        }
        return e2;
      }
      function O(e2) {
        function t2(e3) {
          if (!e3) return "";
          try {
            return JSON.parse(e3);
          } catch (t3) {
            return {};
          }
        }
        function n2() {
          try {
            i2 && "object" == typeof i2 && i2.abort && i2.abort();
          } catch (t3) {
            Yi.log(t3);
          }
          a2 && (clearTimeout(a2), a2 = null, e2.error && e2.error(), i2.onreadystatechange = null, i2.onload = null, i2.onerror = null);
        }
        e2.timeout = e2.timeout || 2e4, e2.credentials = "undefined" == typeof e2.credentials || e2.credentials;
        var i2 = k(e2.cors);
        if (!i2) return false;
        e2.type || (e2.type = e2.data ? "POST" : "GET"), e2 = C({ success: function() {
        }, error: function() {
        } }, e2);
        var a2, o2 = e2.success, s2 = e2.error;
        e2.success = function(e3) {
          o2(e3), a2 && (clearTimeout(a2), a2 = null);
        }, e2.error = function(e3) {
          s2(e3), a2 && (clearTimeout(a2), a2 = null);
        }, a2 = setTimeout(function() {
          n2();
        }, e2.timeout), "undefined" != typeof XDomainRequest && i2 instanceof XDomainRequest && (i2.onload = function() {
          e2.success && e2.success(t2(i2.responseText)), i2.onreadystatechange = null, i2.onload = null, i2.onerror = null;
        }, i2.onerror = function() {
          e2.error && e2.error(t2(i2.responseText), i2.status), i2.onreadystatechange = null, i2.onerror = null, i2.onload = null;
        }), i2.onreadystatechange = function() {
          try {
            4 == i2.readyState && (i2.status >= 200 && i2.status < 300 || 304 == i2.status ? e2.success(t2(i2.responseText)) : e2.error(t2(i2.responseText), i2.status), i2.onreadystatechange = null, i2.onload = null);
          } catch (r2) {
            i2.onreadystatechange = null, i2.onload = null;
          }
        }, i2.open(e2.type, e2.url, true);
        try {
          e2.credentials && (i2.withCredentials = true), r(e2.header) && P(e2.header, function(e3, t3) {
            i2.setRequestHeader && i2.setRequestHeader(t3, e3);
          }), e2.data && (e2.cors || i2.setRequestHeader && i2.setRequestHeader("X-Requested-With", "XMLHttpRequest"), "application/json" === e2.contentType ? i2.setRequestHeader && i2.setRequestHeader("Content-type", "application/json; charset=UTF-8") : i2.setRequestHeader && i2.setRequestHeader("Content-type", "application/x-www-form-urlencoded"));
        } catch (l2) {
          Yi.log(l2);
        }
        i2.send(e2.data || null);
      }
      function j(e2, t2) {
        var r2 = [];
        return null == e2 ? r2 : Array.prototype.map && e2.map === Array.prototype.map ? e2.map(t2) : (P(e2, function(e3, n2, i2) {
          r2.push(t2(e3, n2, i2));
        }), r2);
      }
      function N(e2) {
        var t2 = [];
        try {
          t2 = j(atob(e2).split(""), function(e3) {
            return "%" + ("00" + e3.charCodeAt(0).toString(16)).slice(-2);
          });
        } catch (r2) {
          t2 = [];
        }
        try {
          return decodeURIComponent(t2.join(""));
        } catch (r2) {
          return t2.join("");
        }
      }
      function I(e2) {
        var t2 = "";
        try {
          t2 = btoa(encodeURIComponent(e2).replace(/%([0-9A-F]{2})/g, function(e3, t3) {
            return String.fromCharCode("0x" + t3);
          }));
        } catch (r2) {
          t2 = e2;
        }
        return t2;
      }
      function T(e2, t2) {
        t2 = t2 || window;
        var r2 = false, n2 = true, i2 = t2.document, a2 = i2.documentElement, o2 = i2.addEventListener, s2 = o2 ? "addEventListener" : "attachEvent", l2 = o2 ? "removeEventListener" : "detachEvent", u2 = o2 ? "" : "on", c2 = function(n3) {
          "readystatechange" == n3.type && "complete" != i2.readyState || (("load" == n3.type ? t2 : i2)[l2](u2 + n3.type, c2, false), !r2 && (r2 = true) && e2.call(t2, n3.type || n3));
        }, p2 = function() {
          try {
            a2.doScroll("left");
          } catch (e3) {
            return void setTimeout(p2, 50);
          }
          c2("poll");
        };
        if ("complete" == i2.readyState) e2.call(t2, "lazy");
        else {
          if (!o2 && a2.doScroll) {
            try {
              n2 = !t2.frameElement;
            } catch (d2) {
              Yi.log(d2);
            }
            n2 && p2();
          }
          i2[s2](u2 + "DOMContentLoaded", c2, false), i2[s2](u2 + "readystatechange", c2, false), t2[s2](u2 + "load", c2, false);
        }
      }
      function A(e2) {
        return P(Array.prototype.slice.call(arguments, 1), function(t2) {
          for (var r2 in t2) void 0 !== t2[r2] && void 0 === e2[r2] && (e2[r2] = t2[r2]);
        }), e2;
      }
      function D(e2) {
        var t2 = e2;
        try {
          t2 = decodeURI(e2);
        } catch (r2) {
          t2 = e2;
        }
        return t2;
      }
      function $(e2) {
        var t2 = "t6KJCZa5pDdQ9khoEM3Tj70fbP2eLSyc4BrsYugARqFIw1mzlGNVXOHiWvxUn8", r2 = t2.length - 1, n2 = {}, i2 = 0;
        for (i2 = 0; i2 < t2.length; i2++) n2[t2.charAt(i2)] = t2.charAt(r2 - i2);
        var a2 = "";
        for (i2 = 0; i2 < e2.length; i2++) a2 += e2.charAt(i2) in n2 ? n2[e2.charAt(i2)] : e2.charAt(i2);
        return a2;
      }
      function x(e2) {
        return "[object Date]" == Object.prototype.toString.call(e2);
      }
      function E(e2) {
        function t2(e3) {
          return e3 < 10 ? "0" + e3 : e3;
        }
        return e2.getFullYear() + "-" + t2(e2.getMonth() + 1) + "-" + t2(e2.getDate()) + " " + t2(e2.getHours()) + ":" + t2(e2.getMinutes()) + ":" + t2(e2.getSeconds()) + "." + t2(e2.getMilliseconds());
      }
      function L(e2) {
        return P(e2, function(t2, n2) {
          x(t2) ? e2[n2] = E(t2) : r(t2) && (e2[n2] = L(t2));
        }), e2;
      }
      function U(e2) {
        return P(Array.prototype.slice.call(arguments, 1), function(t2) {
          for (var n2 in t2) void 0 !== t2[n2] && (r(t2[n2]) && r(e2[n2]) ? C(e2[n2], t2[n2]) : e2[n2] = t2[n2]);
        }), e2;
      }
      function R(e2, t2, r2) {
        var n2 = Object.prototype.hasOwnProperty;
        if (e2.filter) return e2.filter(t2);
        for (var i2 = [], a2 = 0; a2 < e2.length; a2++) if (n2.call(e2, a2)) {
          var o2 = e2[a2];
          t2.call(r2, o2, a2, e2) && i2.push(o2);
        }
        return i2;
      }
      function B(e2) {
        try {
          return JSON.stringify(e2, null, "  ");
        } catch (t2) {
          return JSON.stringify(e2);
        }
      }
      function H(e2) {
        return "string" == typeof e2 && e2.match(/^[a-zA-Z0-9\u4e00-\u9fa5\-\.]+$/) ? e2 : "";
      }
      function J(e2, t2, r2) {
        e2 = e2 || location.hostname, t2 = t2 || "domain_test";
        var n2 = H(e2), i2 = n2.split(".");
        if (y(i2) && i2.length >= 2 && !/^(\d+\.)+\d+$/.test(n2)) {
          for (var a2 = "." + i2.splice(i2.length - 1, 1); i2.length > 0; ) if (a2 = "." + i2.splice(i2.length - 1, 1) + a2, na.set(t2, "true", 0, null, r2, "; domain=" + a2), document.cookie.indexOf(t2 + "=true") !== -1) return na.set(t2, "true", "-1s", null, r2, "; domain=" + a2), a2;
        }
        return "";
      }
      function M(e2) {
        function t2(e3, t3) {
          e3 = f(e3);
          var r3;
          if ("body" === e3) return document.getElementsByTagName("body")[0];
          if (0 === e3.indexOf("#")) e3 = e3.slice(1), r3 = document.getElementById(e3);
          else if (e3.indexOf(":nth-of-type") > -1) {
            var n3 = e3.split(":nth-of-type");
            if (!n3[0] || !n3[1]) return null;
            var i3 = n3[0], a2 = n3[1].match(/\(([0-9]+)\)/);
            if (!a2 || !a2[1]) return null;
            var o2 = Number(a2[1]);
            if (!(h(t3) && t3.children && t3.children.length > 0)) return null;
            for (var s2 = t3.children, l2 = 0; l2 < s2.length; l2++) if (h(s2[l2])) {
              var u2 = s2[l2].tagName.toLowerCase();
              if (u2 === i3 && (o2--, 0 === o2)) {
                r3 = s2[l2];
                break;
              }
            }
            if (o2 > 0) return null;
          }
          return r3 ? r3 : null;
        }
        function r2(e3) {
          var i3, a2 = n2.shift();
          if (!a2) return e3;
          try {
            i3 = t2(a2, e3);
          } catch (o2) {
            Yi.log(o2);
          }
          return i3 && h(i3) ? r2(i3) : null;
        }
        if (!d(e2)) return null;
        var n2 = e2.split(">"), i2 = null;
        return i2 = r2(), i2 && h(i2) ? i2 : null;
      }
      function q(e2, t2) {
        var r2 = "", n2 = "";
        return e2.textContent ? r2 = f(e2.textContent) : e2.innerText && (r2 = f(e2.innerText)), r2 && (r2 = r2.replace(/[\r\n]/g, " ").replace(/[ ]+/g, " ").substring(0, 255)), n2 = r2 || "", "input" !== t2 && "INPUT" !== t2 || (n2 = e2.value || ""), n2;
      }
      function F(e2, t2) {
        t2 && "string" == typeof t2 || (t2 = "hostname解析异常");
        var r2 = null;
        try {
          r2 = _(e2).hostname;
        } catch (n2) {
          Yi.log("getHostname传入的url参数不合法！");
        }
        return r2 || t2;
      }
      function K() {
        try {
          var e2 = navigator.appVersion.match(/OS (\d+)[._](\d+)[._]?(\d+)?/);
          return e2 && e2[1] ? Number.parseInt(e2[1], 10) : "";
        } catch (t2) {
          return "";
        }
      }
      function V(e2, t2) {
        t2 = t2.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]"), e2 = u(e2);
        var r2 = "[\\?&]" + t2 + "=([^&#]*)", n2 = new RegExp(r2), i2 = n2.exec(e2);
        return null === i2 || i2 && "string" != typeof i2[1] && i2[1].length ? "" : u(i2[1]);
      }
      function W(e2) {
        var t2 = {}, r2 = e2.split("?"), n2 = r2[1] || "";
        return n2 && (t2 = p("?" + n2)), t2;
      }
      function z() {
        return "undefined" != typeof window.matchMedia || "undefined" != typeof window.msMatchMedia;
      }
      function X() {
        var e2 = screen.msOrientation || screen.mozOrientation || (screen.orientation || {}).type, t2 = "未取到值";
        if (e2) t2 = e2.indexOf("landscape") > -1 ? "landscape" : "portrait";
        else if (z()) {
          var r2 = window.matchMedia || window.msMatchMedia;
          r2("(orientation: landscape)").matches ? t2 = "landscape" : r2("(orientation: portrait)").matches && (t2 = "portrait");
        }
        return t2;
      }
      function Z() {
        var e2, t2 = {}, r2 = navigator.userAgent.toLowerCase();
        return (e2 = r2.match(/ qq\/([\d.]+)/)) ? t2.qqBuildinBrowser = Number(e2[1].split(".")[0]) : (e2 = r2.match(/mqqbrowser\/([\d.]+)/)) ? t2.qqBrowser = Number(e2[1].split(".")[0]) : (e2 = r2.match(/opera.([\d.]+)/)) ? t2.opera = Number(e2[1].split(".")[0]) : (e2 = r2.match(/msie ([\d.]+)/)) ? t2.ie = Number(e2[1].split(".")[0]) : (e2 = r2.match(/edge.([\d.]+)/)) ? t2.edge = Number(e2[1].split(".")[0]) : (e2 = r2.match(/firefox\/([\d.]+)/)) ? t2.firefox = Number(e2[1].split(".")[0]) : (e2 = r2.match(/chrome\/([\d.]+)/)) ? t2.chrome = Number(e2[1].split(".")[0]) : (e2 = r2.match(/version\/([\d.]+).*safari/)) ? t2.safari = Number(e2[1].match(/^\d*.\d*/)) : (e2 = r2.match(/trident\/([\d.]+)/)) && (t2.ie = 11), t2;
      }
      function Y(e2) {
        return d(e2) ? (e2 = f(e2), D(e2)) : D(location.href);
      }
      function G(e2) {
        return d(e2) ? (e2 = f(e2), D(e2)) : D(location.pathname);
      }
      function Q(e2, t2) {
        return e2.hasAttribute ? e2.hasAttribute(t2) : e2.attributes ? !(!e2.attributes[t2] || !e2.attributes[t2].specified) : void 0;
      }
      function ee(e2, t2) {
        if ("string" == typeof t2) return Q(e2, t2);
        if (y(t2)) {
          for (var r2 = false, n2 = 0; n2 < t2.length; n2++) {
            var i2 = Q(e2, t2[n2]);
            if (i2) {
              r2 = true;
              break;
            }
          }
          return r2;
        }
      }
      function te(e2) {
        if ("string" != typeof e2) return 0;
        var t2 = 0, r2 = null;
        if (0 == e2.length) return t2;
        for (var n2 = 0; n2 < e2.length; n2++) r2 = e2.charCodeAt(n2), t2 = (t2 << 5) - t2 + r2, t2 &= t2;
        return t2;
      }
      function re(e2) {
        var t2 = 9007199254740992, r2 = -9007199254740992, n2 = 31, i2 = 0;
        if (e2.length > 0) for (var a2 = e2.split(""), o2 = 0; o2 < a2.length; o2++) {
          var s2 = a2[o2].charCodeAt(), l2 = n2 * i2 + s2;
          if (l2 > t2) for (i2 = r2 + i2; l2 = n2 * i2 + s2, l2 < r2; ) i2 = i2 / 2 + s2;
          if (l2 < r2) for (i2 = t2 + i2; l2 = n2 * i2 + s2, l2 > t2; ) i2 = i2 / 2 + s2;
          i2 = n2 * i2 + s2;
        }
        return i2;
      }
      function ne(e2, t2) {
        var r2 = e2.indexOf;
        if (r2) return r2.call(e2, t2);
        for (var n2 = 0; n2 < e2.length; n2++) if (t2 === e2[n2]) return n2;
        return -1;
      }
      function ie(e2, t2) {
        return e2.prototype = new t2(), e2.prototype.constructor = e2, e2.superclass = t2.prototype, e2;
      }
      function ae(e2) {
        return !(!e2 || !ia.call(e2, "callee"));
      }
      function oe(e2) {
        return "[object Boolean]" == Object.prototype.toString.call(e2);
      }
      function se(e2) {
        if (r(e2)) {
          for (var t2 in e2) if (Object.prototype.hasOwnProperty.call(e2, t2)) return false;
          return true;
        }
        return false;
      }
      function le(e2) {
        if ("string" != typeof e2) return false;
        var t2 = /^https?:\/\/.+/;
        return t2.test(e2) !== false || (Yi.log("Invalid URL"), false);
      }
      function ue() {
        return !!navigator.userAgent.match(/iPhone|iPad|iPod/i);
      }
      function ce(e2) {
        try {
          JSON.parse(e2);
        } catch (t2) {
          return false;
        }
        return true;
      }
      function pe(e2) {
        return "[object Number]" == Object.prototype.toString.call(e2) && /[\d\.]+/.test(String(e2));
      }
      function de() {
        var e2 = false;
        if ("object" != typeof navigator || "function" != typeof navigator.sendBeacon) return e2;
        var t2 = Z(), r2 = navigator.userAgent.toLowerCase();
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
          var n2 = /os [\d._]*/gi, i2 = r2.match(n2), a2 = (i2 + "").replace(/[^0-9|_.]/gi, "").replace(/_/gi, "."), o2 = a2.split(".");
          "undefined" == typeof t2.safari && (t2.safari = o2[0]), o2[0] && (t2.qqBuildinBrowser || t2.qqBrowser) ? e2 = false : o2[0] && o2[0] < 13 ? (t2.chrome > 41 || t2.firefox > 30 || t2.opera > 25 || t2.safari > 12) && (e2 = true) : (t2.chrome > 41 || t2.firefox > 30 || t2.opera > 25 || t2.safari > 11.3) && (e2 = true);
        } else (t2.chrome > 38 || t2.edge > 13 || t2.firefox > 30 || t2.opera > 25 || t2.safari > 11) && (e2 = true);
        return e2;
      }
      function fe() {
        return "undefined" != typeof window.XMLHttpRequest && ("withCredentials" in new XMLHttpRequest() || "undefined" != typeof XDomainRequest);
      }
      function ge(t2) {
        if (!r(t2) || !d(t2.callbackName)) return Yi.log("JSONP 请求缺少 callbackName"), false;
        t2.success = e(t2.success) ? t2.success : function() {
        }, t2.error = e(t2.error) ? t2.error : function() {
        }, t2.data = t2.data || "";
        var n2 = document.createElement("script"), i2 = document.getElementsByTagName("head")[0], a2 = null, o2 = false;
        i2.appendChild(n2);
        var s2 = 3e4;
        pe(t2.timeout) && (a2 = setTimeout(function() {
          return !o2 && (t2.error("timeout"), window[t2.callbackName] = function() {
            Yi.log("call jsonp error");
          }, a2 = null, i2.removeChild(n2), void (o2 = true));
        }, Math.min(t2.timeout, s2))), window[t2.callbackName] = function() {
          clearTimeout(a2), a2 = null, t2.success.apply(null, arguments), window[t2.callbackName] = function() {
            Yi.log("call jsonp error");
          }, i2.removeChild(n2);
        };
        var l2 = encodeURIComponent(t2.callbackName), u2 = "";
        if (t2.url.indexOf("?") > -1 ? t2.url += "&callbackName=" + l2 : t2.url += "?callbackName=" + l2, r(t2.data)) {
          var c2 = [];
          P(t2.data, function(e2, t3) {
            c2.push(encodeURIComponent(t3) + "=" + encodeURIComponent(e2));
          }), u2 = c2.join("&"), u2 && (t2.url += "&" + u2);
        }
        n2.onerror = function(e2) {
          return !o2 && (window[t2.callbackName] = function() {
            Yi.log("call jsonp error");
          }, clearTimeout(a2), a2 = null, i2.removeChild(n2), t2.error(e2), void (o2 = true));
        }, n2.src = t2.url;
      }
      function _e(t2) {
        var r2 = { visibleHandler: e(t2.visible) ? t2.visible : function() {
        }, hiddenHandler: e(t2.hidden) ? t2.hidden : function() {
        }, visibilityChange: null, hidden: null, isSupport: function() {
          return "undefined" != typeof document[this.hidden];
        }, init: function() {
          "undefined" != typeof document.hidden ? (this.hidden = "hidden", this.visibilityChange = "visibilitychange") : "undefined" != typeof document.mozHidden ? (this.hidden = "mozHidden", this.visibilityChange = "mozvisibilitychange") : "undefined" != typeof document.msHidden ? (this.hidden = "msHidden", this.visibilityChange = "msvisibilitychange") : "undefined" != typeof document.webkitHidden && (this.hidden = "webkitHidden", this.visibilityChange = "webkitvisibilitychange"), this.listen();
        }, listen: function() {
          if (this.isSupport()) {
            var e2 = this;
            w(document, this.visibilityChange, function() {
              document[e2.hidden] ? e2.hiddenHandler() : e2.visibleHandler();
            }, 1);
          } else w(window, "focus", this.visibleHandler), w(window, "blur", this.hiddenHandler);
        } };
        r2.init();
      }
      function he(e2) {
        e2 = C({ success: function() {
        }, error: function() {
        }, appendCall: function(e3) {
          document.getElementsByTagName("head")[0].appendChild(e3);
        } }, e2);
        var t2 = null;
        "css" === e2.type && (t2 = document.createElement("link"), t2.rel = "stylesheet", t2.href = e2.url), "js" === e2.type && (t2 = document.createElement("script"), t2.async = "async", t2.setAttribute("charset", "UTF-8"), t2.src = e2.url, t2.type = "text/javascript"), t2.onload = t2.onreadystatechange = function() {
          this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState || (e2.success(), t2.onload = t2.onreadystatechange = null);
        }, t2.onerror = function() {
          e2.error(), t2.onerror = null;
        }, e2.appendCall(t2);
      }
      function me(e2) {
        if ("string" != typeof e2) return "";
        for (var t2 = /^\s*javascript/i; t2.test(e2); ) e2 = e2.replace(t2, "");
        return e2;
      }
      function ve(e2, t2) {
        e2 = String(e2), t2 = "number" == typeof t2 ? t2 : 13;
        for (var r2 = 126, n2 = e2.split(""), i2 = 0; i2 < n2.length; i2++) {
          var a2 = n2[i2].charCodeAt(0);
          a2 < r2 && (n2[i2] = String.fromCharCode((n2[i2].charCodeAt(0) + t2) % r2));
        }
        return n2.join("");
      }
      function ye(e2) {
        var t2 = 13, r2 = 126;
        return e2 = String(e2), ve(e2, r2 - t2);
      }
      function be(e2) {
        r(e2) && P(e2, function(t2, n2) {
          r(t2) ? be(e2[n2]) : x(t2) && (e2[n2] = E(t2));
        });
      }
      function we(e2) {
        var t2 = document.createElement("style");
        t2.type = "text/css";
        try {
          t2.appendChild(document.createTextNode(e2));
        } catch (r2) {
          t2.styleSheet.cssText = e2;
        }
        var n2 = document.getElementsByTagName("head")[0], i2 = document.getElementsByTagName("script")[0];
        n2 ? n2.children.length ? n2.insertBefore(t2, n2.children[0]) : n2.appendChild(t2) : i2.parentNode.insertBefore(t2, i2);
      }
      function Se(e2) {
        if ("string" != typeof e2) return Yi.log("转换unicode错误", e2), e2;
        for (var t2 = "", r2 = 0; r2 < e2.length; r2++) t2 += "\\" + e2.charCodeAt(r2).toString(16);
        return t2;
      }
      function ke(e2, r2, n2) {
        var i2, a2, o2, s2 = null, l2 = 0;
        n2 || (n2 = {});
        var u2 = function() {
          l2 = n2.leading === false ? 0 : t(), s2 = null, o2 = e2.apply(i2, a2), s2 || (i2 = a2 = null);
        };
        return function() {
          var c2 = t();
          l2 || n2.leading !== false || (l2 = c2);
          var p2 = r2 - (c2 - l2);
          return i2 = this, a2 = arguments, p2 <= 0 || p2 > r2 ? (s2 && (clearTimeout(s2), s2 = null), l2 = c2, o2 = e2.apply(i2, a2), s2 || (i2 = a2 = null)) : s2 || n2.trailing === false || (s2 = setTimeout(u2, p2)), o2;
        };
      }
      function Pe(e2) {
        var t2 = [];
        return null == e2 ? t2 : (P(e2, function(e3) {
          t2[t2.length] = e3;
        }), t2);
      }
      function Ce(e2) {
        return e2 ? e2.toArray ? e2.toArray() : y(e2) || ae(e2) ? Array.prototype.slice.call(e2) : Pe(e2) : [];
      }
      function Oe(e2) {
        for (var t2, r2 = [], n2 = {}, i2 = 0; i2 < e2.length; i2++) t2 = e2[i2], t2 in n2 || (n2[t2] = true, r2.push(t2));
        return r2;
      }
      function je(e2, t2, r2) {
        return r2 = r2 || 0, e2.substr(r2, t2.length) === t2;
      }
      function Ne(e2) {
        return "__proto__" !== e2 && "constructor" !== e2 && "prototype" !== e2;
      }
      function Ie() {
        pa.msg.apply(pa, arguments).log();
      }
      function Te() {
        pa.msg.apply(pa, arguments).level("warn").log();
      }
      function Ae() {
        pa.msg.apply(pa, arguments).level("error").log();
      }
      function De(e2) {
        var t2 = da.current_domain;
        switch (typeof t2) {
          case "function":
            var r2 = t2();
            return "" === r2 || "" === f(r2) ? "url解析失败" : r2.indexOf(".") !== -1 ? r2 : "url解析失败";
          case "string":
            return "" === t2 || "" === f(t2) ? "url解析失败" : t2.indexOf(".") !== -1 ? t2 : "url解析失败";
          default:
            var n2 = J(null, ha, da.is_secure_cookie);
            return "" === e2 ? "url解析失败" : "" === n2 ? "url解析失败" : n2;
        }
      }
      function $e(e2, t2) {
        var r2 = "";
        if (da.cross_subdomain === false) {
          try {
            if (t2) r2 = _(t2).hostname;
            else {
              var n2 = location.host;
              v(Xi.para.white_list[n2]) || (r2 = Xi.para.white_list[n2]);
            }
          } catch (i2) {
            Ae(i2);
          }
          r2 = "string" == typeof r2 && "" !== r2 ? "sajssdk_2015_" + da.sdk_id + e2 + "_" + r2.replace(/\./g, "_") : "sajssdk_2015_root_" + da.sdk_id + e2;
        } else r2 = "sajssdk_2015_cross_" + da.sdk_id + e2;
        return r2;
      }
      function xe() {
        var e2 = "new_user";
        return va.isSupport() ? null !== va.get("sensorsdata_is_new_user") || null !== va.get($e(e2)) : null !== ya.get(ya.getNewUserFlagMemoryKey(e2));
      }
      function Ee(e2, t2, n2) {
        var i2 = !(!r(da.heatmap) || !da.heatmap.useCapture);
        return r(da.heatmap) && v(da.heatmap.useCapture) && "click" === t2 && (i2 = true), w(e2, t2, n2, i2);
      }
      function Le() {
        var e2 = document.referrer, t2 = "baidu.com";
        if (!e2) return false;
        try {
          var r2 = _(e2).hostname;
          return r2 && r2.substring(r2.length - t2.length) === t2;
        } catch (n2) {
          return false;
        }
      }
      function Ue() {
        var e2 = W(document.referrer);
        if (se(e2) || !e2.eqid) {
          var t2 = W(location.href);
          return e2.ck || t2.utm_source ? "baidu_sem_keyword_id" : "baidu_other_keyword_id";
        }
        return "baidu_seo_keyword_id";
      }
      function Re() {
        var e2 = W(document.referrer);
        return se(e2) || !e2.eqid ? ea().replace(/-/g, "") : e2.eqid;
      }
      function Be(e2, t2) {
        return e2 = e2 || document.referrer, d(e2) ? (e2 = f(e2), e2 = D(e2), 0 !== e2.indexOf("https://www.baidu.com/") || t2 || (e2 = e2.split("?")[0]), e2 = e2.slice(0, da.max_referrer_string_length), d(e2) ? e2 : "") : "取值异常_referrer异常_" + String(e2);
      }
      function He(e2) {
        if (e2 = e2 || document.referrer, "" === e2) return true;
        var t2 = J(null, ha, da.is_secure_cookie), r2 = F(e2);
        return r2 = "." + r2, r2.indexOf(t2) === -1 && "" !== t2;
      }
      function Je(e2, t2) {
        e2 = e2 || document.referrer;
        var n2 = da.source_type.keyword;
        if (document && d(e2)) {
          if (0 === e2.indexOf("http")) {
            var i2 = Me(e2), a2 = W(e2);
            if (se(a2)) return da.preset_properties.search_keyword_baidu && Le() ? void 0 : "未取到值";
            var o2 = null;
            for (var s2 in n2) if (i2 === s2 && r(a2)) {
              if (o2 = n2[s2], y(o2)) for (s2 = 0; s2 < o2.length; s2++) {
                var l2 = a2[o2[s2]];
                if (l2) return t2 ? { active: l2 } : l2;
              }
              else if (a2[o2]) return t2 ? { active: a2[o2] } : a2[o2];
            }
            return da.preset_properties.search_keyword_baidu && Le() ? void 0 : "未取到值";
          }
          return "" === e2 ? "未取到值_直接打开" : "未取到值_非http的url";
        }
        return "取值异常_referrer异常_" + String(e2);
      }
      function Me(e2) {
        var t2 = F(e2);
        if (!t2 || "hostname解析异常" === t2) return "";
        var r2 = { baidu: [/^.*\.baidu\.com$/], bing: [/^.*\.bing\.com$/], google: [/^www\.google\.com$/, /^www\.google\.com\.[a-z]{2}$/, /^www\.google\.[a-z]{2}$/], sm: [/^m\.sm\.cn$/], so: [/^.+\.so\.com$/], sogou: [/^.*\.sogou\.com$/], yahoo: [/^.*\.yahoo\.com$/] };
        for (var n2 in r2) for (var i2 = r2[n2], a2 = 0, o2 = i2.length; a2 < o2; a2++) if (i2[a2].test(t2)) return n2;
        return "未知搜索引擎";
      }
      function qe() {
        function e2(e3, t3) {
          for (var r3 = 0; r3 < e3.length; r3++) if (t3.split("?")[0].indexOf(e3[r3]) !== -1) return true;
        }
        var t2 = "(" + da.source_type.utm.join("|") + ")\\=[^&]+", r2 = da.source_type.search, n2 = da.source_type.social, i2 = document.referrer || "", a2 = Pa.pageProp.url;
        if (a2) {
          var o2 = a2.match(new RegExp(t2));
          return o2 && o2[0] ? "付费广告流量" : e2(r2, i2) ? "自然搜索流量" : e2(n2, i2) ? "社交网站流量" : "" === i2 ? "直接流量" : "引荐流量";
        }
        return "获取url异常";
      }
      function Fe(e2) {
        var t2 = V(e2, "gdt_vid"), r2 = V(e2, "hash_key"), n2 = V(e2, "callbacks"), i2 = { click_id: "", hash_key: "", callbacks: "" };
        return d(t2) && t2.length && (i2.click_id = 16 == t2.length || 18 == t2.length ? t2 : "参数解析不合法", d(r2) && r2.length && (i2.hash_key = r2), d(n2) && n2.length && (i2.callbacks = n2)), i2;
      }
      function Ke(t2) {
        var n2 = t2.properties, i2 = JSON.parse(JSON.stringify(t2));
        r(n2) && P(n2, function(t3, r2) {
          if (e(t3)) try {
            n2[r2] = t3(i2), e(n2[r2]) && (Te("您的属性- " + r2 + " 格式不满足要求，我们已经将其删除"), delete n2[r2]);
          } catch (a2) {
            delete n2[r2], Te("您的属性- " + r2 + " 抛出了异常，我们已经将其删除");
          }
        });
      }
      function Ve(e2) {
        if (r(e2) && e2.$option) {
          var t2 = e2.$option;
          return delete e2.$option, t2;
        }
        return {};
      }
      function We(e2) {
        var t2 = {};
        return P(e2, function(e3, r2) {
          null != e3 && (t2[r2] = e3);
        }), t2;
      }
      function ze(e2) {
        var t2 = !e2.type || "profile" !== e2.type.slice(0, 7), n2 = "取值异常";
        r(e2.properties) && t2 && ("$referrer" in e2.properties && (e2.properties.$referrer_host = "" === e2.properties.$referrer ? "" : F(e2.properties.$referrer, n2)), da.preset_properties.latest_referrer && da.preset_properties.latest_referrer_host && (e2.properties.$latest_referrer_host = "" === e2.properties.$latest_referrer ? "" : F(e2.properties.$latest_referrer, n2)));
      }
      function Xe(e2) {
        var t2 = !e2.type || "profile" !== e2.type.slice(0, 7), r2 = da.preset_properties && t2;
        r2 && da.preset_properties.url && v(e2.properties.$url) && (e2.properties.$url = Y()), r2 && da.preset_properties.title && v(e2.properties.$title) && (e2.properties.$title = document.title);
      }
      function Ze(e2) {
        if (!h(e2.target)) return false;
        var t2 = e2.target, r2 = d(t2.tagName) ? t2.tagName.toLowerCase() : "unknown", n2 = {};
        return n2.$element_type = r2, n2.$element_name = t2.getAttribute("name"), n2.$element_id = t2.getAttribute("id"), n2.$element_class_name = d(t2.className) ? t2.className : null, n2.$element_target_url = t2.getAttribute("href"), n2.$element_content = Ge(t2, r2), n2 = We(n2), n2.$url = Y(), n2.$url_path = G(), n2.$title = document.title, n2;
      }
      function Ye(t2) {
        var r2 = da.heatmap && e(da.heatmap.collect_input) && da.heatmap.collect_input(t2);
        return "button" === t2.type || "submit" === t2.type || r2 ? t2.value || "" : "";
      }
      function Ge(e2, t2) {
        return d(t2) && "input" === t2.toLowerCase() ? Ye(e2) : q(e2, t2);
      }
      function Qe(e2) {
        return ka.protocol.ajax(e2.url), O(e2);
      }
      function et(e2) {
        if ("string" == typeof e2 && (e2 = f(e2), e2 && ("://" === e2.slice(0, 3) ? e2 = location.protocol.slice(0, -1) + e2 : "//" === e2.slice(0, 2) ? e2 = location.protocol + e2 : "http" !== e2.slice(0, 4) && (e2 = ""))), y(e2) && e2.length) for (var t2 = 0; t2 < e2.length; t2++) /sa\.gif[^\/]*$/.test(e2[t2]) || (e2[t2] = e2[t2].replace(/\/sa$/, "/sa.gif").replace(/(\/sa)(\?[^\/]+)$/, "/sa.gif$2"));
        else /sa\.gif[^\/]*$/.test(e2) || "string" != typeof e2 || (e2 = e2.replace(/\/sa$/, "/sa.gif").replace(/(\/sa)(\?[^\/]+)$/, "/sa.gif$2"));
        return e2;
      }
      function tt(e2) {
        d(e2) || (e2 = JSON.stringify(e2));
        var t2 = I(e2), r2 = "crc=" + te(t2);
        return "data=" + encodeURIComponent(t2) + "&ext=" + encodeURIComponent(r2);
      }
      function rt(t2) {
        var r2 = location.href, n2 = window.history.pushState, i2 = window.history.replaceState;
        e(window.history.pushState) && (window.history.pushState = function() {
          n2.apply(window.history, arguments), t2(r2), r2 = location.href;
        }), e(window.history.replaceState) && (window.history.replaceState = function() {
          i2.apply(window.history, arguments), t2(r2), r2 = location.href;
        });
        var a2;
        a2 = window.document.documentMode ? "hashchange" : n2 ? "popstate" : "hashchange", w(window, a2, function() {
          t2(r2), r2 = location.href;
        });
      }
      function nt(e2, t2) {
        var r2 = [];
        "string" == typeof e2 && e2 in Ca.EVENT_LIST && (r2 = Ca.EVENT_LIST[e2], Ca[r2[0]].on(r2[1], t2));
      }
      function it() {
        this.sendTimeStamp = 0, this.timer = null, this.serverUrl = "", this.hasTabStorage = false;
      }
      function at(e2, t2) {
        for (var r2 in e2) if (Object.prototype.hasOwnProperty.call(e2, r2) && !Ua.check(r2, e2[r2], t2)) return false;
        return true;
      }
      function ot(t2, n2) {
        return r(t2) ? (P(t2, function(i2, a2) {
          if (y(i2)) {
            var o2 = [];
            P(i2, function(e2) {
              if (d(e2)) o2.push(e2);
              else if (v(e2)) o2.push("null");
              else try {
                o2.push(JSON.stringify(e2));
              } catch (t3) {
                Te("您的数据-", a2, i2, "数组里值有错误,已将其删除");
              }
            }), t2[a2] = o2;
          }
          var s2 = ne(n2 || [], a2) > -1;
          if (r(i2) && "$option" !== a2 && !s2) try {
            t2[a2] = JSON.stringify(i2);
          } catch (l2) {
            delete t2[a2], Te("您的数据-", a2, i2, "数据值有错误，已将其删除");
          }
          else d(i2) || pe(i2) || x(i2) || oe(i2) || y(i2) || e(i2) || "$option" === a2 || s2 || (Te("您的数据-", a2, i2, "-格式不满足要求，我们已经将其删除"), delete t2[a2]);
        }), t2) : t2;
      }
      function st(e2, t2) {
        return pe(t2) && e2.length > t2 ? (Te("字符串长度超过限制，已经做截取--" + e2), e2.slice(0, t2)) : e2;
      }
      function lt(e2, t2) {
        var n2 = ["distinct_id", "user_id", "id", "date", "datetime", "event", "events", "first_id", "original_id", "device_id", "properties", "second_id", "time", "users"];
        r(e2) && P(n2, function(r2, n3) {
          r2 in e2 && (ne(t2 || [], r2) > -1 || (n3 < 3 ? (delete e2[r2], Te("您的属性- " + r2 + "是保留字段，我们已经将其删除")) : Te("您的属性- " + r2 + "是保留字段，请避免其作为属性名")));
        });
      }
      function ut(e2) {
        var t2 = ["$element_selector", "$element_path"], n2 = ["sensorsdata_app_visual_properties"];
        r(e2) && P(e2, function(i2, a2) {
          if (r(i2)) ut(e2[a2]);
          else if (d(i2)) {
            if (ne(n2, a2) > -1) return;
            e2[a2] = st(i2, ne(t2, a2) > -1 ? 1024 : da.max_string_length);
          }
        });
      }
      function ct(e2) {
        "undefined" != typeof e2.properties.$project && (e2.project = e2.properties.$project, delete e2.properties.$project), "undefined" != typeof e2.properties.$token && (e2.token = e2.properties.$token, delete e2.properties.$token);
      }
      function pt(e2) {
        if ("item_type" in e2) {
          var t2 = e2.item_type, r2 = function(t3) {
            return t3 || delete e2.item_type, true;
          };
          at({ item_type: t2 }, r2);
        }
        if ("item_id" in e2) {
          var n2 = e2.item_id, i2 = function(t3, r3, n3) {
            return t3 || "string" !== n3 || delete e2.item_id, true;
          };
          at({ item_id: n2 }, i2);
        }
      }
      function dt(e2, t2) {
        P(e2, function(r2, n2) {
          var i2 = function(t3, r3, i3) {
            return t3 || "keyLength" === i3 || delete e2[n2], true;
          };
          ne(t2 || [], n2) === -1 && at({ propertyKey: n2 }, i2);
        });
      }
      function ft(e2) {
        var t2 = e2.properties;
        be(e2), r(t2) ? (ot(t2), lt(t2), ct(e2), dt(t2), ut(t2)) : "properties" in e2 && (e2.properties = {}), pt(e2);
      }
      function gt(e2, t2) {
        var r2 = t2.sensors;
        return e2._track_id = Number(String(n()).slice(2, 5) + String(n()).slice(2, 4) + String((/* @__PURE__ */ new Date()).getTime()).slice(-4)), e2._flush_time = (/* @__PURE__ */ new Date()).getTime(), r2.events.tempAdd("send", e2), e2;
      }
      function _t(e2, t2) {
        try {
          var n2 = t2.sensors, i2 = {};
          r(e2) && r(e2.identities) && !se(e2.identities) ? C(i2, e2.identities) : C(i2, xa.getIdentities());
          var a2 = { identities: i2, distinct_id: xa.getDistinctId(), lib: { $lib: "js", $lib_method: "code", $lib_version: String(n2.lib_version) }, properties: {} };
          return r(e2) && r(e2.properties) && !se(e2.properties) && (e2.properties.$lib_detail && (a2.lib.$lib_detail = e2.properties.$lib_detail, delete e2.properties.$lib_detail), e2.properties.$lib_method && (a2.lib.$lib_method = e2.properties.$lib_method, delete e2.properties.$lib_method)), U(a2, xa.getUnionId(), e2), r(e2.properties) && !se(e2.properties) && C(a2.properties, e2.properties), "$UnbindID" === a2.event && (a2.login_id && delete a2.login_id, a2.anonymous_id && delete a2.anonymous_id), e2.type && "profile" === e2.type.slice(0, 7) || (n2.para.properties_priority && 3 === n2.para.properties_priority ? a2.properties = C({}, Pa.properties(), xa.getSessionProps(), Pa.currentProps, xa.getProps(), a2.properties) : a2.properties = C({}, Pa.properties(), xa.getProps(), xa.getSessionProps(), Pa.currentProps, a2.properties), n2.para.preset_properties.latest_referrer && !d(a2.properties.$latest_referrer) && (a2.properties.$latest_referrer = "取值异常"), n2.para.preset_properties.latest_search_keyword && !d(a2.properties.$latest_search_keyword) && (n2.para.preset_properties.search_keyword_baidu && d(a2.properties.$search_keyword_id) && pe(a2.properties.$search_keyword_id_hash) && d(a2.properties.$search_keyword_id_type) || (a2.properties.$latest_search_keyword = "取值异常")), n2.para.preset_properties.latest_traffic_source_type && !d(a2.properties.$latest_traffic_source_type) && (a2.properties.$latest_traffic_source_type = "取值异常"), n2.para.preset_properties.latest_landing_page && !d(a2.properties.$latest_landing_page) && (a2.properties.$latest_landing_page = "取值异常"), "not_collect" === n2.para.preset_properties.latest_wx_ad_click_id ? (delete a2.properties._latest_wx_ad_click_id, delete a2.properties._latest_wx_ad_hash_key, delete a2.properties._latest_wx_ad_callbacks) : n2.para.preset_properties.latest_wx_ad_click_id && !d(a2.properties._latest_wx_ad_click_id) && (a2.properties._latest_wx_ad_click_id = "取值异常", a2.properties._latest_wx_ad_hash_key = "取值异常", a2.properties._latest_wx_ad_callbacks = "取值异常"), d(a2.properties._latest_wx_ad_click_id) && (a2.properties.$url = Y())), a2.properties.$time && x(a2.properties.$time) ? (a2.time = 1 * a2.properties.$time, delete a2.properties.$time) : a2.time = 1 * /* @__PURE__ */ new Date(), function(e3) {
            if (n2.bridge && "success" === n2.bridge.bridge_info.verify_success) {
              var t3 = Ha.customProp.geth5Props(JSON.parse(JSON.stringify(e3)));
              r(t3) && !se(t3) && (e3.properties = C(e3.properties, t3));
            }
            var i3 = qa.customProp.getVtrackProps(JSON.parse(JSON.stringify(e3)));
            r(i3) && !se(i3) && (e3.properties = C(e3.properties, i3));
          }(a2), Ke(a2), ba.checkIsAddSign(a2), ba.checkIsFirstTime(a2), ze(a2), Xe(a2), a2;
        } catch (o2) {
          return { _debug_web_msg: String(o2) };
        }
      }
      function ht(e2) {
        return Ka.stage.process("basicProps", e2);
      }
      function mt(e2) {
        return Ka.stage.process("formatData", e2);
      }
      function vt(e2, t2, r2, n2) {
        function i2(e3) {
          function i3() {
            o2 || (o2 = true, location.href = a2.href);
          }
          e3.stopPropagation(), e3.preventDefault();
          var o2 = false;
          setTimeout(i3, 1e3), n2(t2, r2, i3);
        }
        e2 = e2 || {};
        var a2 = null;
        return e2.ele && (a2 = e2.ele), e2.event && (a2 = e2.target ? e2.target : e2.event.target), r2 = r2 || {}, !(!a2 || "object" != typeof a2) && (!a2.href || /^javascript/.test(a2.href) || a2.target || a2.download || a2.onclick ? (n2(t2, r2), false) : (e2.event && i2(e2.event), void (e2.ele && Ee(e2.ele, "click", function(e3) {
          i2(e3);
        }))));
      }
      function yt() {
        var e2 = location.protocol;
        return "http:" === e2 || "https:" === e2 ? e2 : "http:";
      }
      function bt(e2) {
        return Wa.stage.process("webClickEvent", e2);
      }
      function wt(e2) {
        return Wa.stage.process("webStayEvent", e2);
      }
      function St() {
        var e2 = Pa.campaignParams(), t2 = {};
        return P(e2, function(e3, r2, n2) {
          (" " + Xi.source_channel_standard + " ").indexOf(" " + r2 + " ") !== -1 ? t2["$" + r2] = n2[r2] : t2[r2] = n2[r2];
        }), t2;
      }
      function kt(e2, t2, r2) {
        if (Xi.is_first_visitor && r2) {
          var n2 = {};
          Xi.para.preset_properties.search_keyword_baidu && He(document.referrer) && Le() && (n2.$search_keyword_id = Sa.id(), n2.$search_keyword_id_type = Sa.type(), n2.$search_keyword_id_hash = re(n2.$search_keyword_id));
          var i2 = Be(null, t2);
          e2(C({ $first_visit_time: /* @__PURE__ */ new Date(), $first_referrer: i2, $first_referrer_host: i2 ? F(i2, "取值异常") : "", $first_browser_language: d(navigator.language) ? navigator.language.toLowerCase() : "取值异常", $first_browser_charset: d(document.charset) ? document.charset.toUpperCase() : "取值异常", $first_traffic_source_type: qe(), $first_search_keyword: Je() }, St(), n2)), Xi.is_first_visitor = false;
        }
      }
      function Pt(e2, t2) {
        var n2 = e2.id, i2 = e2.callback, a2 = e2.name, o2 = xa.getFirstId(), s2 = xa.getOriginDistinctId();
        if (!at({ distinct_id: n2 })) return Ae("login id is invalid"), false;
        if (n2 === xa.getOriginDistinctId() && !o2) return Ae("login id is equal to distinct_id"), false;
        if (r(xa._state.identities) && xa._state.identities.hasOwnProperty(a2) && n2 === xa._state.first_id) return false;
        var l2 = xa._state.history_login_id.name !== a2 || n2 !== xa._state.history_login_id.value;
        if (l2) {
          xa._state.identities[a2] = n2, xa.set("history_login_id", { name: a2, value: n2 }), o2 || xa.set("first_id", s2), t2(n2, "$SignUp", {}, i2);
          var u2 = { $identity_cookie_id: xa._state.identities.$identity_cookie_id };
          return u2[a2] = n2, Ct(u2), true;
        }
        return false;
      }
      function Ct(e2) {
        var t2 = {};
        for (var r2 in e2) t2[r2] = e2[r2];
        xa._state.identities = t2, xa.save();
      }
      function Ot(e2, t2) {
        if (!at({ unbindKey: e2, bindValue: t2 })) return false;
        if (r(xa._state.identities) && xa._state.identities.hasOwnProperty(e2) && xa._state.identities[e2] === t2) {
          var n2 = xa.getUnionId().login_id;
          n2 && e2 + "+" + t2 === n2 && (xa._state.distinct_id = xa._state.first_id, xa._state.first_id = "", xa.set("history_login_id", { name: "", value: "" })), "$identity_cookie_id" !== e2 && (delete xa._state.identities[e2], xa.save());
        }
        var i2 = {};
        return i2[e2] = t2, i2;
      }
      function jt() {
        Xi._t = Xi._t || 1 * /* @__PURE__ */ new Date(), Xi.is_first_visitor = false, Xi.source_channel_standard = ga;
      }
      function Nt(e2) {
        C(da, e2 || Xi.para || {}), Xi.para = da;
        var t2 = {};
        if (r(Xi.para.is_track_latest)) for (var n2 in Xi.para.is_track_latest) t2["latest_" + n2] = Xi.para.is_track_latest[n2];
        Xi.para.preset_properties = C({}, fa.preset_properties, t2, Xi.para.preset_properties || {});
        var i2;
        for (i2 in fa) void 0 === Xi.para[i2] && (Xi.para[i2] = fa[i2]);
        "string" != typeof Xi.para.web_url || "://" !== Xi.para.web_url.slice(0, 3) && "//" !== Xi.para.web_url.slice(0, 2) || ("://" === Xi.para.web_url.slice(0, 3) ? Xi.para.web_url = location.protocol.slice(0, -1) + Xi.para.web_url : Xi.para.web_url = location.protocol + Xi.para.web_url), ka.protocol.serverUrl(), Xi.bridge && Xi.bridge.initPara();
        var a2 = ["utm_source", "utm_medium", "utm_campaign", "utm_content", "utm_term"], o2 = ["www.baidu.", "m.baidu.", "m.sm.cn", "so.com", "sogou.com", "youdao.com", "google.", "yahoo.com/", "bing.com/", "ask.com/"], s2 = ["weibo.com", "renren.com", "kaixin001.com", "douban.com", "qzone.qq.com", "zhihu.com", "tieba.baidu.com", "weixin.qq.com"], l2 = { baidu: ["wd", "word", "kw", "keyword"], google: "q", bing: "q", yahoo: "p", sogou: ["query", "keyword"], so: "q", sm: "q" };
        "object" == typeof Xi.para.source_type && (Xi.para.source_type.utm = y(Xi.para.source_type.utm) ? Xi.para.source_type.utm.concat(a2) : a2, Xi.para.source_type.search = y(Xi.para.source_type.search) ? Xi.para.source_type.search.concat(o2) : o2, Xi.para.source_type.social = y(Xi.para.source_type.social) ? Xi.para.source_type.social.concat(s2) : s2, Xi.para.source_type.keyword = r(Xi.para.source_type.keyword) ? C(l2, Xi.para.source_type.keyword) : l2);
        var u2 = { div: false }, c2 = ["mark", "/mark", "strong", "b", "em", "i", "u", "abbr", "ins", "del", "s", "sup"];
        if (Xi.para.heatmap && !r(Xi.para.heatmap) && (Xi.para.heatmap = {}), r(Xi.para.heatmap)) {
          Xi.para.heatmap.clickmap = Xi.para.heatmap.clickmap || "default", Xi.para.heatmap.scroll_notice_map = Xi.para.heatmap.scroll_notice_map || "default", Xi.para.heatmap.scroll_delay_time = Xi.para.heatmap.scroll_delay_time || 4e3, Xi.para.heatmap.scroll_event_duration = Xi.para.heatmap.scroll_event_duration || 18e3, Xi.para.heatmap.renderRefreshTime = Xi.para.heatmap.renderRefreshTime || 1e3, Xi.para.heatmap.loadTimeout = Xi.para.heatmap.loadTimeout || 1e3, Xi.para.heatmap.request_timeout = Xi.para.heatmap.request_timeout || 1e4, Xi.para.heatmap.get_vtrack_config !== true && (Xi.para.heatmap.get_vtrack_config = false);
          var p2 = y(Xi.para.heatmap.track_attr) ? R(Xi.para.heatmap.track_attr, function(e3) {
            return e3 && "string" == typeof e3;
          }) : [];
          if (p2.push("data-sensors-click"), Xi.para.heatmap.track_attr = p2, r(Xi.para.heatmap.collect_tags)) if (Xi.para.heatmap.collect_tags.div === true) Xi.para.heatmap.collect_tags.div = { ignore_tags: c2, max_level: 1 };
          else if (r(Xi.para.heatmap.collect_tags.div)) {
            if (Xi.para.heatmap.collect_tags.div.ignore_tags ? y(Xi.para.heatmap.collect_tags.div.ignore_tags) || (Te("ignore_tags 参数必须是数组格式"), Xi.para.heatmap.collect_tags.div.ignore_tags = c2) : Xi.para.heatmap.collect_tags.div.ignore_tags = c2, Xi.para.heatmap.collect_tags.div.max_level) {
              var d2 = [1, 2, 3];
              ne(d2, Xi.para.heatmap.collect_tags.div.max_level) === -1 && (Xi.para.heatmap.collect_tags.div.max_level = 1);
            }
          } else Xi.para.heatmap.collect_tags.div = false;
          else Xi.para.heatmap.collect_tags = u2;
        }
        Xi.para.server_url = et(Xi.para.server_url), Xi.para.noCache === true ? Xi.para.noCache = "?" + (/* @__PURE__ */ new Date()).getTime() : Xi.para.noCache = "", Xi.para.callback_timeout > Xi.para.datasend_timeout && (Xi.para.datasend_timeout = Xi.para.callback_timeout), Xi.para.heatmap && Xi.para.heatmap.collect_tags && r(Xi.para.heatmap.collect_tags) && P(Xi.para.heatmap.collect_tags, function(e3, t3) {
          "div" !== t3 && e3 && Xi.heatmap.otherTags.push(t3);
        }), Xi.para.heatmap && "default" === Xi.para.heatmap.clickmap && Xi.heatmap.initUnlimitedTags();
      }
      function It() {
        var e2 = Array.prototype.slice.call(arguments), t2 = e2[0], r2 = e2.slice(1);
        return "string" == typeof t2 && Za[t2] ? Za[t2].apply(Za, r2) : void ("function" == typeof t2 ? t2.apply(Xi, r2) : Te("quick方法中没有这个功能" + e2[0]));
      }
      function Tt(t2, n2) {
        function i2() {
          return !a2.plugin_is_init && a2.init(Xi, n2), a2.plugin_is_init = true, Xi.modules = Xi.modules || {}, Xi.modules[a2.plugin_name || "unnamed_" + Ga++] = a2, a2;
        }
        if (!d(t2) && !r(t2)) return void Ae("use's first arguments must be string or object.");
        var a2;
        if (r(t2)) {
          var o2 = Xi.modules && Xi.modules[t2.plugin_name];
          o2 && o2 !== t2 && Te(t2.name + " is conflict with builtin plugin, and sdk uses builtin plugin."), a2 = o2 || t2;
        }
        return d(t2) && (r(Xi.modules) && r(Xi.modules[t2]) ? a2 = Xi.modules[t2] : r(window.SensorsDataWebJSSDKPlugin) && r(window.SensorsDataWebJSSDKPlugin[t2]) ? a2 = window.SensorsDataWebJSSDKPlugin[t2] : window.sensorsDataAnalytic201505 && window.sensorsDataAnalytic201505.modules[t2] && (a2 = window.sensorsDataAnalytic201505.modules[t2])), a2 && e(a2.init) ? a2.plugin_is_init ? a2 : (a2.plugin_name || Te("warning: invalid plugin, plugin_name required."), a2.plugin_version ? a2.plugin_version !== Xi.lib_version && Te("warning: plugin version not match SDK version. plugin may not work correctly. ") : Te("warning: invalid plugin, plugin version required."), i2()) : (Te((t2.plugin_name || t2) + " is not found or it's not a standard plugin. Please check sensorsdata official documents."), a2);
      }
      function At(e2, t2, r2) {
        at({ event: e2, properties: t2 }) && Va.send({ type: "track", event: e2, properties: t2 }, r2);
      }
      function Dt(e2, t2) {
        return !!at({ bindKey: e2, bindValue: t2 }) && (xa._state.identities[e2] = t2, xa.save(), void Va.send({ type: "track_id_bind", event: "$BindID", properties: {} }));
      }
      function $t(e2, t2) {
        var r2 = Ot(e2, t2);
        r2 && Va.send({ identities: r2, type: "track_id_unbind", event: "$UnbindID", properties: {} });
      }
      function xt(e2, t2, r2) {
        "object" == typeof e2 && e2.tagName ? vt({ ele: e2 }, t2, r2, Xi.track) : "object" == typeof e2 && e2.target && e2.event && vt(e2, t2, r2, Xi.track);
      }
      function Et(e2, t2, r2) {
        return r2 = r2 || {}, !(!e2 || "object" != typeof e2) && (!(!e2.href || /^javascript/.test(e2.href) || e2.target) && void Ee(e2, "click", function(n2) {
          function i2() {
            a2 || (a2 = true, location.href = e2.href);
          }
          n2.preventDefault();
          var a2 = false;
          setTimeout(i2, 1e3), Xi.track(t2, r2, i2);
        }));
      }
      function Lt(e2, t2, r2) {
        at({ item_type: e2, item_id: t2, properties: r2 }) && Va.sendItem({ type: "item_set", item_type: e2, item_id: t2, properties: r2 || {} });
      }
      function Ut(e2, t2) {
        at({ item_type: e2, item_id: t2 }) && Va.sendItem({ type: "item_delete", item_type: e2, item_id: t2 });
      }
      function Rt(e2, t2) {
        at({ propertiesMust: e2 }) && Va.send({ type: "profile_set", properties: e2 }, t2);
      }
      function Bt(e2, t2) {
        at({ propertiesMust: e2 }) && Va.send({ type: "profile_set_once", properties: e2 }, t2);
      }
      function Ht(e2, t2) {
        at({ propertiesMust: e2 }) && (P(e2, function(t3, r2) {
          d(t3) && Ne(r2) ? e2[r2] = [t3] : y(t3) && Ne(r2) ? e2[r2] = t3 : (delete e2[r2], Te("appendProfile属性的值必须是字符串或者数组"));
        }), se(e2) || Va.send({ type: "profile_append", properties: e2 }, t2));
      }
      function Jt(e2, t2) {
        function r2(e3) {
          for (var t3 in e3) if (Object.prototype.hasOwnProperty.call(e3, t3) && !/-*\d+/.test(String(e3[t3]))) return false;
          return true;
        }
        var n2 = e2;
        d(e2) && (e2 = {}, e2[n2] = 1), at({ propertiesMust: e2 }) && (r2(e2) ? Va.send({ type: "profile_increment", properties: e2 }, t2) : Ae("profile_increment的值只能是数字"));
      }
      function Mt(e2) {
        Va.send({ type: "profile_delete" }, e2), xa.set("distinct_id", ea()), xa.set("first_id", "");
      }
      function qt(e2, t2) {
        var r2 = e2, n2 = {};
        d(e2) && (e2 = [], e2.push(r2)), y(e2) ? (P(e2, function(e3) {
          d(e3) ? n2[e3] = true : Te("profile_unset给的数组里面的值必须时string,已经过滤掉", e3);
        }), Va.send({ type: "profile_unset", properties: n2 }, t2)) : Ae("profile_unset的参数必须是数组");
      }
      function Ft(e2) {
        "number" == typeof e2 && (e2 = String(e2));
        var t2 = xa.getFirstId();
        if ("undefined" == typeof e2) {
          var r2 = ea();
          t2 ? xa.set("first_id", r2) : xa.set("distinct_id", r2);
        } else at({ distinct_id: e2 }) && (t2 ? xa.set("first_id", e2) : xa.set("distinct_id", e2));
      }
      function Kt(e2) {
        var t2 = xa.getFirstId();
        if (t2) return Ae("resetAnonymousIdentity must be used in a logout state ！"), false;
        if ("number" == typeof e2 && (e2 = String(e2)), "undefined" == typeof e2) {
          var r2 = ea();
          xa._state.identities.$identity_cookie_id = r2, xa.set("distinct_id", r2);
        } else at({ distinct_id: e2 }) && (xa._state.identities.$identity_cookie_id = e2, xa.set("distinct_id", e2));
      }
      function Vt(e2, t2, r2, n2) {
        var i2 = xa.getFirstId() || xa.getDistinctId();
        xa.set("distinct_id", e2), Va.send({ original_id: i2, distinct_id: xa.getDistinctId(), type: "track_signup", event: t2, properties: r2 }, n2);
      }
      function Wt(e2, t2, r2, n2) {
        "number" == typeof e2 && (e2 = String(e2)), at({ distinct_id: e2, event: t2, properties: r2 }) && Vt(e2, t2, r2, n2);
      }
      function zt(e2) {
        at({ properties: e2 }) ? C(Pa.currentProps, e2) : Ae("register输入的参数有误");
      }
      function Xt(e2) {
        xa.clearAllProps(e2);
      }
      function Zt(e2) {
        var t2;
        if (y(e2) && e2.length > 0) for (t2 = 0; t2 < e2.length; t2++) d(e2[t2]) && e2[t2] in Pa.currentProps && delete Pa.currentProps[e2[t2]];
        else if (e2 === true) for (t2 in Pa.currentProps) delete Pa.currentProps[t2];
      }
      function Yt(e2) {
        at({ properties: e2 }) ? xa.setProps(e2) : Ae("register输入的参数有误");
      }
      function Gt(e2) {
        at({ properties: e2 }) ? xa.setPropsOnce(e2) : Ae("registerOnce输入的参数有误");
      }
      function Qt(e2) {
        Xi.log("registerSession 方法已经弃用，有问题联系技术顾问"), at({ properties: e2 }) ? xa.setSessionProps(e2) : Ae("registerSession输入的参数有误");
      }
      function er(e2) {
        Xi.log("registerSessionOnce 方法已经弃用，有问题联系技术顾问"), at({ properties: e2 }) ? xa.setSessionPropsOnce(e2) : Ae("registerSessionOnce输入的参数有误");
      }
      function tr(t2, r2) {
        "number" == typeof t2 && (t2 = String(t2));
        var n2 = Pt({ id: t2, callback: r2, name: ma.LOGIN }, Vt);
        !n2 && e(r2) && r2();
      }
      function rr(e2, t2) {
        return Te("loginWithKey is deprecated !!!"), "number" == typeof t2 && (t2 = String(t2)), "number" == typeof e2 && (e2 = String(e2)), !!at({ loginIdKey: e2 }) && (ma.LOGIN === e2 ? (tr(t2), false) : void Pt({ id: t2, callback: null, name: e2 }, Vt));
      }
      function nr(e2) {
        var t2 = xa.getFirstId();
        if (t2) if (xa.set("first_id", ""), e2 === true) {
          var r2 = ea();
          xa.set("distinct_id", r2);
        } else xa.set("distinct_id", t2);
        Ct({ $identity_cookie_id: xa._state.identities.$identity_cookie_id }), xa.set("history_login_id", { name: "", value: "" });
      }
      function ir() {
        function e2() {
          var e3 = Pa.campaignParams(), t3 = {};
          return P(e3, function(e4, r3, n2) {
            (" " + Xi.source_channel_standard + " ").indexOf(" " + r3 + " ") !== -1 ? t3["$" + r3] = n2[r3] : t3[r3] = n2[r3];
          }), t3;
        }
        var t2 = { $is_first_day: xe(), $is_first_time: ba.is_page_first_visited, $referrer: Pa.pageProp.referrer || "", $referrer_host: Pa.pageProp.referrer ? F(Pa.pageProp.referrer) : "", $url: Y(), $url_path: G(), $title: document.title || "", _distinct_id: xa.getDistinctId(), identities: xa.getIdentities() }, r2 = C({}, Pa.properties(), xa.getProps(), e2(), t2);
        return Xi.para.preset_properties.latest_referrer && Xi.para.preset_properties.latest_referrer_host && (r2.$latest_referrer_host = "" === r2.$latest_referrer ? "" : F(r2.$latest_referrer)), r2;
      }
      function ar() {
        var e2 = "", t2 = " { cursor: pointer; -webkit-tap-highlight-color: rgba(0,0,0,0); }";
        Xi.heatmap && y(Xi.heatmap.otherTags) && P(Xi.heatmap.otherTags, function(r2) {
          e2 += r2 + t2;
        }), ue() && K() && K() < 13 && (Xi.para.heatmap && Xi.para.heatmap.collect_tags && Xi.para.heatmap.collect_tags.div && we("div, [data-sensors-click]" + t2), Xi.para.heatmap && Xi.para.heatmap.track_attr && we("[" + Xi.para.heatmap.track_attr.join("], [") + "]" + t2), "" !== e2 && we(e2));
      }
      function or(e2) {
        var t2 = this;
        this.type = e2, this.resultCbs = {}, this.timeoutCbs = {}, this.timerId = null, this.appCallJsCallback = null, window.sensorsdata_app_call_js || (window.sensorsdata_app_call_js = function(e3, t3) {
          if (e3 in window.sensorsdata_app_call_js.modules) return window.sensorsdata_app_call_js.modules[e3](t3);
        }), window.sensorsdata_app_call_js.modules = window.sensorsdata_app_call_js.modules || {}, window.sensorsdata_app_call_js.modules[this.type] = function(e3) {
          try {
            var r2 = N(e3) || e3;
            try {
              r2 = JSON.parse(r2);
            } catch (n2) {
            }
            var i2 = r2 && r2.message_id;
            if (i2 && t2.resultCbs[i2]) {
              if (e3 = r2, t2.timeoutCbs[i2] && t2.timeoutCbs[i2].isTimeout) return void (t2.resultCbs[i2].callbacks.length = 0);
              if (t2.resultCbs[i2]) {
                t2.resultCbs[i2].result = e3, clearTimeout(t2.timerId), t2.timeoutCbs[i2].callbacks.length = 0;
                for (var a2 in t2.resultCbs[i2].callbacks) t2.resultCbs[i2].callbacks[a2].call(null, e3), t2.resultCbs[i2].callbacks.splice(a2, 1);
              }
              return;
            }
            return t2.appCallJsCallback && t2.appCallJsCallback.call(null, e3);
          } catch (o2) {
            Ae("app 回调 js 异常", e3);
          }
        };
      }
      function sr(t2) {
        try {
          if (Xi.bridge.activeBridge && e(Xi.bridge.activeBridge.handleCommand)) return Xi.bridge.activeBridge.handleCommand(t2);
        } catch (r2) {
          Ae("Error: handle command exception:" + r2);
        }
        return Ae("数据发往App失败，App没有暴露bridge,type:" + t2.callType), false;
      }
      function lr(e2) {
        function t2(e3) {
          var t3 = { hostname: "", project: "" };
          try {
            e3 = _(e3), t3.hostname = e3.hostname, t3.project = e3.searchParams.get("project") || "default";
          } catch (r3) {
            Ae("validateAppUrl:" + r3);
          }
          return t3;
        }
        var r2 = t2(e2), n2 = t2(Xi.para.server_url);
        if (r2.hostname === n2.hostname && r2.project === n2.project) return true;
        if (y(Xi.para.app_js_bridge.white_list)) for (var i2 = 0; i2 < Xi.para.app_js_bridge.white_list.length; i2++) {
          var a2 = t2(Xi.para.app_js_bridge.white_list[i2]);
          if (a2.hostname === r2.hostname && a2.project === r2.project) return true;
        }
        return false;
      }
      function ur(e2) {
        this.bridge = new or(e2.type);
      }
      function cr() {
        var e2 = Pa.pageProp.url_domain, t2 = {};
        "" === e2 && (e2 = "url解析失败");
        var n2 = Je(document.referrer, true);
        if (da.preset_properties.search_keyword_baidu ? He(document.referrer) && (!Le() || r(n2) && n2.active ? xa._state && xa._state.props && (xa._state.props.$search_keyword_id && delete xa._state.props.$search_keyword_id, xa._state.props.$search_keyword_id_type && delete xa._state.props.$search_keyword_id_type, xa._state.props.$search_keyword_id_hash && delete xa._state.props.$search_keyword_id_hash) : (t2.$search_keyword_id = Sa.id(), t2.$search_keyword_id_type = Sa.type(), t2.$search_keyword_id_hash = re(t2.$search_keyword_id))) : xa._state && xa._state.props && (xa._state.props.$search_keyword_id && delete xa._state.props.$search_keyword_id, xa._state.props.$search_keyword_id_type && delete xa._state.props.$search_keyword_id_type, xa._state.props.$search_keyword_id_hash && delete xa._state.props.$search_keyword_id_hash), xa.save(), P(da.preset_properties, function(n3, i3) {
          if (i3.indexOf("latest_") === -1) return false;
          if (i3 = i3.slice(7), n3) {
            if ("wx_ad_click_id" === i3 && "not_collect" === n3) return false;
            if ("utm" !== i3 && "url解析失败" === e2) "wx_ad_click_id" === i3 ? (t2._latest_wx_ad_click_id = "url的domain解析失败", t2._latest_wx_ad_hash_key = "url的domain解析失败", t2._latest_wx_ad_callbacks = "url的domain解析失败") : t2["$latest_" + i3] = "url的domain解析失败";
            else if (He(document.referrer)) switch (i3) {
              case "traffic_source_type":
                t2.$latest_traffic_source_type = qe();
                break;
              case "referrer":
                t2.$latest_referrer = Pa.pageProp.referrer;
                break;
              case "search_keyword":
                Je() ? t2.$latest_search_keyword = Je() : r(xa._state) && r(xa._state.props) && xa._state.props.$latest_search_keyword && delete xa._state.props.$latest_search_keyword;
                break;
              case "landing_page":
                t2.$latest_landing_page = Y();
                break;
              case "wx_ad_click_id":
                var a3 = Fe(location.href);
                t2._latest_wx_ad_click_id = a3.click_id, t2._latest_wx_ad_hash_key = a3.hash_key, t2._latest_wx_ad_callbacks = a3.callbacks;
            }
          } else if ("utm" === i3 && xa._state && xa._state.props) for (var o3 in xa._state.props) (0 === o3.indexOf("$latest_utm") || 0 === o3.indexOf("_latest_") && o3.indexOf("_latest_wx_ad_") < 0) && delete xa._state.props[o3];
          else if (xa._state && xa._state.props && "$latest_" + i3 in xa._state.props) delete xa._state.props["$latest_" + i3];
          else if ("wx_ad_click_id" == i3 && xa._state && xa._state.props && n3 === false) {
            var s2 = ["_latest_wx_ad_click_id", "_latest_wx_ad_hash_key", "_latest_wx_ad_callbacks"];
            P(s2, function(e3) {
              e3 in xa._state.props && delete xa._state.props[e3];
            });
          }
        }), da.preset_properties.latest_utm) {
          var i2 = Pa.campaignParamsStandard("$latest_", "_latest_"), a2 = i2.$utms, o2 = i2.otherUtms;
          se(a2) || C(t2, a2), se(o2) || C(t2, o2);
        }
        Yt(t2);
      }
      function pr(e2) {
        var t2 = null;
        try {
          var r2 = JSON.parse(window.name);
          t2 = r2[e2] ? u(r2[e2]) : null;
        } catch (n2) {
          t2 = null;
        }
        return null === t2 && (t2 = V(location.href, e2) || null), t2;
      }
      function dr(e2) {
        function t2() {
          var e3 = [];
          n2.touch_app_bridge || e3.push(ka.defineMode("1")), r(Xi.para.app_js_bridge) || (e3.push(ka.defineMode("2")), n2.verify_success = false), r(Xi.para.heatmap) && "default" == Xi.para.heatmap.clickmap || e3.push(ka.defineMode("3")), "fail" === n2.verify_success && e3.push(ka.defineMode("4")), new Xi.SDKJSBridge("app_alert").notifyApp({ data: e3 });
        }
        var n2 = Xi.bridge.bridge_info;
        if (Xi.bridge.hasVisualModeBridge()) if (r(Xi.para.heatmap) && "default" == Xi.para.heatmap.clickmap) if (r(Xi.para.app_js_bridge) && "success" === n2.verify_success) if (e2) window.sa_jssdk_app_define_mode(Xi, e2);
        else {
          var i2 = location.protocol, a2 = ["http:", "https:"];
          i2 = ne(a2, i2) > -1 ? i2 : "https:", he({ success: function() {
            setTimeout(function() {
              "undefined" != typeof sa_jssdk_app_define_mode && window.sa_jssdk_app_define_mode(Xi, e2);
            }, 0);
          }, error: function() {
          }, type: "js", url: i2 + "//static.sensorsdata.cn/sdk/" + Xi.lib_version + "/vapph5define.min.js" });
        }
        else t2();
        else t2();
      }
      function fr(t2) {
        Xi.para.is_track_single_page && Oa.on("switch", function(n2) {
          var i2 = function(r2) {
            if (r2 = r2 || {}, n2 !== location.href) {
              Pa.pageProp.referrer = Y(n2);
              var i3 = C({ $url: Y(), $referrer: Y(n2) }, r2);
              e(t2) ? t2(i3) : Xi.quick && Xi.quick("autoTrack", i3);
            }
          };
          if ("boolean" == typeof Xi.para.is_track_single_page) i2();
          else if ("function" == typeof Xi.para.is_track_single_page) {
            var a2 = Xi.para.is_track_single_page();
            r(a2) ? i2(a2) : a2 === true && i2();
          }
        });
      }
      function gr() {
        Xi._q && y(Xi._q) && Xi._q.length > 0 && P(Xi._q, function(e2) {
          Xi[e2[0]].apply(Xi, Array.prototype.slice.call(e2[1]));
        }), r(Xi.para.heatmap) && (Xa.initHeatmap(), Xa.initScrollmap());
      }
      function _r() {
        Xi.readyState.setState(3), new Xi.SDKJSBridge("visualized").onAppNotify(function() {
          dr("undefined" != typeof sa_jssdk_app_define_mode ? true : false);
        }), dr(false), Xi.bridge.app_js_bridge_v1(), Pa.initPage(), fr(), xa.init(), cr(), mr(), Xi.readyState.setState(4), gr();
      }
      function hr() {
        ro.isWindowNameHasKeyword() ? ro.windowNameHasKeywordHandle() : ro.isSeachHasKeyword() ? ro.hasKeywordHandle() : window.parent !== self && no.isSearchHasKeyword() ? no.verifyVtrackMode() : ro.isStorageHasKeyword() ? ro.storageHasKeywordHandle() : window.parent !== self && no.isStorageHasKeyword() ? no.verifyVtrackMode() : (_r(), no.notifyUser());
      }
      function mr() {
        qa.init(), "success" === Xi.bridge.bridge_info.verify_success && Ha.init();
      }
      function vr() {
        P(io, function(t2) {
          var r2 = Xi[t2];
          Xi[t2] = function() {
            if (Xi.readyState.state < 3) return y(Xi._q) || (Xi._q = []), Te("calling sdk api before init is deprecated."), Xi._q.push([t2, arguments]), false;
            if (!e(Xi.getDisabled) || !Xi.getDisabled()) return Xi.readyState.getState() ? r2.apply(Xi, arguments) : void Ae("请先初始化神策JS SDK");
          };
        });
      }
      function yr(e2, t2) {
        this.cancel = function() {
          e2 = true;
        }, this.getCanceled = function() {
          return e2 || false;
        }, this.stop = function() {
          t2 = true;
        }, this.getStopped = function() {
          return t2 || false;
        };
      }
      function br(e2, t2, r2) {
        var n2 = null;
        try {
          n2 = JSON.parse(JSON.stringify(e2 || null));
        } catch (i2) {
        }
        this.getOriginalData = function() {
          return n2;
        }, this.getPosition = function() {
          return t2;
        }, this.cancellationToken = new yr(), this.sensors = r2;
      }
      function wr(e2) {
        if (!r(e2)) throw "error: Stage constructor requires arguments.";
        this.processDef = e2, this.registeredInterceptors = {};
      }
      function Sr(e2) {
        e2 && e2.buildDataStage && so.registerStageImplementation(e2.buildDataStage), e2 && e2.businessStage && po.registerStageImplementation(e2.businessStage), e2 && e2.sendDataStage && uo.registerStageImplementation(e2.sendDataStage), e2 && e2.viewStage && go.registerStageImplementation(e2.viewStage);
      }
      function kr(e2, t2) {
        _o[e2] && _o[e2](t2);
      }
      function Pr() {
        return ho.stage && ho.stage.process("getUtmData");
      }
      function Cr(e2) {
        return mo.stage.process("send", e2);
      }
      function Or(e2) {
        e2.kit = vo, e2.saEvent = Va, this.buildDataStage = Ka, this.sendDataStage = mo, this.businessStage = ho;
      }
      function jr(e2) {
        e2.heatmap = Xa, this.viewStage = Wa;
      }
      function Nr(t2) {
        if (!e(t2.properties)) return void Ae("registerPropertyPlugin arguments error, properties must be function");
        if (t2.isMatchedWithFilter && !e(t2.isMatchedWithFilter)) return void Ae("registerPropertyPlugin arguments error, isMatchedWithFilter must be function");
        var r2 = { finalAdjustData: { priority: 100, entry: function(r3) {
          try {
            if (e(t2.isMatchedWithFilter)) return t2.isMatchedWithFilter(r3) && t2.properties(r3);
            t2.properties(r3);
          } catch (n2) {
            Ae("execute registerPropertyPlugin callback error:" + n2);
          }
        } } };
        kr("buildDataStage", r2);
      }
      function Ir(e2) {
        e2 && (Xi.events = $a, Xi.bridge = to, Xi.SDKJSBridge = or, Xi.JSBridge = ur, Xi.store = xa, Xi.unlimitedDiv = Ja, Xi.customProp = Ma, Xi.vtrackcollect = qa, Xi.vapph5collect = Ha, Xi.detectMode = hr, Xi.registerFeature = Sr, Xi.registerInterceptor = kr, Xi.commonWays = Za, Sr(new Or(Xi)), Sr(new jr(Xi)), kr("viewStage", yo));
        var t2 = e2 ? Qa : ao;
        for (var r2 in t2) Xi[r2] = t2[r2];
        Xi.logger = pa, Xi.log = Ie, Xi._ = eo, Xi.on = nt, Xi.ee = Ca, Xi.use = Tt, Xi.lib_version = _a, Xi.registerPropertyPlugin = Nr;
      }
      function Tr(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Ar(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Ar(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Dr(e2, t2, r2) {
        return Tr(e2, t2, r2), e2.plugin_version = Ho, e2;
      }
      function $r(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return xr(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function xr(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Er(e2, t2, r2) {
        return $r(e2, t2, r2), e2.plugin_version = qo, e2;
      }
      function Lr(e2) {
        return zo && zo.call(Vo, JSON.stringify(e2));
      }
      function Ur(e2) {
        return Wo.call(Vo) && Xo && Xo.call(Vo, JSON.stringify(e2));
      }
      function Rr(e2, t2) {
        return t2 && "function" == typeof t2[e2.callType] && t2[e2.callType]();
      }
      function Br(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Hr(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Hr(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Jr(e2, t2, r2) {
        return Br(e2, t2, r2), e2.plugin_version = Yo, e2;
      }
      function Mr() {
        if (So = window.SensorsData_APP_New_H5_Bridge, ko = So && So.sensorsdata_track, Po = ko && So.sensorsdata_get_server_url && So.sensorsdata_get_server_url(), jo("---test---fail---", !Co, Co.bridge.activeBridge, !Po), Co && !Co.bridge.activeBridge && Po) return Co.bridge.activeBridge = Go, Co.para.app_js_bridge && !Co.para.app_js_bridge.is_mui && (Co.bridge.is_verify_success = Po && Co.bridge.validateAppUrl(Po), jo("---test---bridge-verify-", Co.bridge.is_verify_success)), Co.bridge.bridge_info = { touch_app_bridge: true, platform: "android", verify_success: Co.bridge.is_verify_success ? "success" : "fail", support_two_way_call: !!So.sensorsdata_js_call_app }, Co.para.app_js_bridge ? void Co.registerInterceptor("sendDataStage", { send: { priority: 60, entry: qr } }) : void jo("---test---app_js_bridge is not configured, data will not be sent by android bridge.");
      }
      function qr(e2, t2) {
        if (jo("---test---datasend-", Co.bridge.is_verify_success), Co.para.app_js_bridge.is_mui || "item_set" === e2.data.type || "item_delete" === e2.data.type) return e2;
        var r2 = e2.callback;
        return Co.bridge.is_verify_success ? (jo("---test---bridge-verify-success---", e2.data), ko && ko.call(So, JSON.stringify(Oo.extend({ server_url: Co.para.server_url }, e2.data))), Oo.isFunction(r2) && r2(), t2.cancellationToken.cancel(), e2) : (jo("---test---bridge-verify-fail-----", Co.bridge.is_verify_success), Co.para.app_js_bridge.is_send ? (Co.debug.apph5({ data: e2.data, step: "4.2", output: "all" }), e2) : (Oo.isFunction(r2) && r2(), t2.cancellationToken.cancel(), e2));
      }
      function Fr(e2) {
        var t2 = e2.callType;
        return t2 in Zo.commands ? Zo.commands[t2](e2, So) : void (So && Oo.isFunction(So.sensorsdata_js_call_app) && So.sensorsdata_js_call_app(JSON.stringify(e2)));
      }
      function Kr(e2) {
        return rs && rs.call(es, JSON.stringify(e2));
      }
      function Vr(e2) {
        return ts.call(es) && ns && ns.call(es, JSON.stringify(e2));
      }
      function Wr(e2, t2) {
        return t2 && "function" == typeof t2[e2.callType] && t2[e2.callType]();
      }
      function zr(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Xr(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Xr(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Zr(e2, t2, r2) {
        return zr(e2, t2, r2), e2.plugin_version = as, e2;
      }
      function Yr() {
        if (xo("ObsoleteBridge---test---init---"), No = window.SensorsData_APP_JS_Bridge, Io = No && No.sensorsdata_track, To = No && No.sensorsdata_verify, Ao = No && No.sensorsdata_visual_verify, xo("ObsoleteBridge-", Do.bridge.activeBridge, To, Io, Ao), Do && !Do.bridge.activeBridge && (To || Io || Ao)) {
          Do.bridge.activeBridge = os;
          var e2 = To || Io;
          if (Ao && (e2 = !!Ao.call(No, JSON.stringify({ server_url: Do.para.server_url })), xo("ObsoleteBridge---called-return", e2)), Do.bridge.bridge_info = { touch_app_bridge: true, platform: "android", verify_success: e2 ? "success" : "fail" }, !Do.para.app_js_bridge) return void xo("app_js_bridge is not configured, data will not be sent by android obsolete bridge.");
          Do.registerInterceptor("sendDataStage", { send: { priority: 80, entry: Gr } }), xo("Android obsolete bridge inits succeed.");
        }
      }
      function Gr(e2, t2) {
        if (xo("ObsoleteBridge---senddata"), Do.para.app_js_bridge.is_mui || "item_set" === e2.data.type || "item_delete" === e2.data.type) return e2;
        var r2 = e2.callback;
        if (To) {
          var n2 = To && To.call(No, JSON.stringify($o.extend({ server_url: Do.para.server_url }, e2.data)));
          return xo("ObsoleteBridge---anVerify-success", n2), n2 ? ($o.isFunction(r2) && r2(), t2.cancellationToken.cancel(), e2) : Do.para.app_js_bridge.is_send ? (Do.debug.apph5({ data: e2.data, step: "3.1", output: "all" }), e2) : ($o.isFunction(r2) && r2(), t2.cancellationToken.cancel(), e2);
        }
        return xo("ObsoleteBridge---is-send-old-way", Do.para.app_js_bridge.is_send), Io && Io.call(No, JSON.stringify($o.extend({ server_url: Do.para.server_url }, e2.data))), $o.isFunction(r2) && r2(), t2.cancellationToken.cancel(), e2;
      }
      function Qr(e2) {
        xo("ObsoleteBridge---handleCommadn");
        var t2 = e2.callType;
        return t2 in is.commands ? (xo("ObsoleteBridge---", t2, is.commands), is.commands[t2](e2, No)) : No && $o.isFunction(No.sensorsdata_js_call_app) ? (xo("ObsoleteBridge---handleCommadn-abridge"), No.sensorsdata_js_call_app(JSON.stringify(e2))) : void 0;
      }
      function en(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return tn(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function tn(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function rn(e2, t2, r2) {
        return en(e2, t2, r2), e2.plugin_version = ls, e2;
      }
      function nn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return an(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function an(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function on(e2, t2, r2) {
        return nn(e2, t2, r2), e2.plugin_version = ps, e2;
      }
      function sn() {
        return "undefined" != typeof Bo && document[Bo];
      }
      function ln(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return un(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function un(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function cn(e2, t2, r2) {
        return ln(e2, t2, r2), e2.plugin_version = Ds, e2;
      }
      function pn() {
        if (fs = window.SensorsData_iOS_JS_Bridge && window.SensorsData_iOS_JS_Bridge.sensorsdata_app_server_url, gs = function() {
          return window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.sensorsdataNativeTracker;
        }, _s && !_s.bridge.activeBridge && gs() && gs().postMessage) {
          if (_s.bridge.activeBridge = $s, _s.para.app_js_bridge && !_s.para.app_js_bridge.is_mui && (_s.bridge.is_verify_success = fs && _s.bridge.validateAppUrl(fs)), _s.bridge.bridge_info = { touch_app_bridge: true, platform: "ios", verify_success: _s.bridge.is_verify_success ? "success" : "fail", support_two_way_call: true }, !_s.para.app_js_bridge) return void ms("app_js_bridge is not configured, data will not be sent by iOS bridge.");
          _s.registerInterceptor("sendDataStage", { send: { priority: 70, entry: dn } }), ms("IOS bridge inits succeed.");
        }
      }
      function dn(e2, t2) {
        if (_s.para.app_js_bridge.is_mui || "item_set" === e2.data.type || "item_delete" === e2.data.type) return e2;
        var r2 = e2.callback;
        return _s.bridge.is_verify_success ? (gs() && gs().postMessage(JSON.stringify({ callType: "app_h5_track", data: hs.extend({ server_url: _s.para.server_url }, e2.data) })), hs.isFunction(r2) && r2(), t2.cancellationToken.cancel(), e2) : _s.para.app_js_bridge.is_send ? (_s.debug.apph5({ data: e2.data, step: "4.1", output: "all" }), e2) : (hs.isFunction(r2) && r2(), t2.cancellationToken.cancel(), e2);
      }
      function fn(e2) {
        var t2 = e2.callType;
        return "page_info" !== t2 && "visualized_track" !== t2 || _s.bridge.hasVisualModeBridge() ? "sensorsdata_get_app_visual_config" === t2 ? hs.isObject(window.SensorsData_APP_New_H5_Bridge) && window.SensorsData_APP_New_H5_Bridge[t2] : gs() && gs().postMessage(JSON.stringify(e2)) : null;
      }
      function gn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return _n(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function _n(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function hn(e2, t2, r2) {
        return gn(e2, t2, r2), e2.plugin_version = Es, e2;
      }
      function mn() {
        if (vs && !vs.bridge.activeBridge && vn()) {
          if (vs.bridge.activeBridge = Ls, vs.bridge.bridge_info = { touch_app_bridge: true, platform: "ios", verify_success: yn() ? "success" : "fail" }, !vs.para.app_js_bridge) return void bs("app_js_bridge is not configured, data will not be sent by iOS obsolete bridge.");
          vs.registerInterceptor("sendDataStage", { send: { priority: 90, entry: bn } }), bs("IOS obsolete bridge inits succeed.");
        }
      }
      function vn() {
        return (/sensors-verify/.test(navigator.userAgent) || /sa-sdk-ios/.test(navigator.userAgent)) && !window.MSStream;
      }
      function yn() {
        if (/sensors-verify/.test(navigator.userAgent)) {
          var e2 = navigator.userAgent.match(/sensors-verify\/([^\s]+)/);
          if (e2 && e2[0] && "string" == typeof e2[1] && 2 === e2[1].split("?").length) {
            e2 = e2[1].split("?");
            var t2 = null, r2 = null;
            try {
              t2 = ys.URL(vs.para.server_url).hostname, r2 = ys.URL(vs.para.server_url).searchParams.get("project") || "default";
            } catch (n2) {
              vs.log(n2);
            }
            return !(!t2 || t2 !== e2[0] || !r2 || r2 !== e2[1]);
          }
          return false;
        }
        return !!/sa-sdk-ios/.test(navigator.userAgent);
      }
      function bn(e2, t2) {
        function r2(e3) {
          var t3 = JSON.stringify(ys.extend({ server_url: vs.para.server_url }, e3));
          return t3 = t3.replace(/\r\n/g, ""), t3 = encodeURIComponent(t3), "sensorsanalytics://trackEvent?event=" + t3;
        }
        if (vs.para.app_js_bridge.is_mui || "item_set" === e2.data.type || "item_delete" === e2.data.type) return e2;
        var n2 = e2.callback;
        if (vs.bridge.bridge_info.verify_success) {
          var i2 = document.createElement("iframe"), a2 = r2(e2.data);
          return i2.setAttribute("src", a2), document.documentElement.appendChild(i2), i2.parentNode.removeChild(i2), i2 = null, ys.isFunction(n2) && n2(), t2.cancellationToken.cancel(), true;
        }
        return vs.para.app_js_bridge.is_send ? (vs.debug.apph5({ data: e2.data, step: "3.2", output: "all" }), e2) : (ys.isFunction(n2) && n2(), t2.cancellationToken.cancel(), e2);
      }
      function wn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Sn(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Sn(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function kn(e2, t2, r2) {
        return wn(e2, t2, r2), e2.plugin_version = Rs, e2;
      }
      function Pn() {
        this.sd = null, this.start_time = +/* @__PURE__ */ new Date(), this.page_show_status = true, this.page_hidden_status = false, this._ = {}, this.timer = null, this.current_page_url = document.referrer, this.url = location.href, this.title = document.title || "", this.option = {}, this.heartbeat_interval_time = 5e3, this.heartbeat_interval_timer = null, this.page_id = null, this.storage_name = "sawebjssdkpageleave", this.max_duration = Hs;
      }
      function Cn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return On(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function On(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function jn(e2, t2, r2) {
        return Cn(e2, t2, r2), e2.plugin_version = qs, e2;
      }
      function Nn(e2, t2) {
        if ("track" !== e2.type) return e2;
        var r2 = t2.sd, n2 = r2._, i2 = r2.saEvent.check, a2 = n2.extend2Lev({ properties: {} }, e2), o2 = t2.customRegister, s2 = a2.properties, l2 = a2.event, u2 = {};
        return n2.each(o2, function(e3) {
          if (n2.isObject(e3)) n2.indexOf(e3.events, l2) > -1 && i2({ properties: e3.properties }) && (u2 = n2.extend(u2, e3.properties));
          else if (n2.isFunction(e3)) {
            var t3 = e3({ event: l2, properties: s2, data: a2 });
            n2.isObject(t3) && !n2.isEmptyObject(t3) && i2({ properties: t3 }) && (u2 = n2.extend(u2, t3));
          }
        }), e2.properties = n2.extend(s2, u2), e2;
      }
      function In() {
        this.sd = null, this.log = window.console && window.console.log || function() {
        }, this.customRegister = [];
      }
      function Tn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return An(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function An(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Dn(e2, t2, r2) {
        return Tn(e2, t2, r2), e2.plugin_version = Ws, e2;
      }
      function $n(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return xn(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function xn(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function En(e2, t2, r2) {
        return $n(e2, t2, r2), e2.plugin_version = Gs, e2;
      }
      function Ln(e2) {
        try {
          if ("$pageview" !== e2.event && (!e2.type || "profile" !== e2.type.slice(0, 7))) {
            var t2 = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight || 0, r2 = document.documentElement.scrollHeight || 0, n2 = { $page_height: Math.max(t2, r2) || 0 };
            e2.properties = zs._.extend(e2.properties || {}, n2);
          }
        } catch (i2) {
          Qs("页面高度获取异常。");
        }
        return Xs.call(zs.kit, e2);
      }
      function Un(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Rn(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Rn(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Bn(e2, t2, r2) {
        return Un(e2, t2, r2), e2.plugin_version = rl, e2;
      }
      function Hn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Jn(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Jn(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Mn(e2, t2, r2) {
        return Hn(e2, t2, r2), e2.plugin_version = yl, e2;
      }
      function qn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Fn(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Fn(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Kn(e2, t2, r2) {
        return qn(e2, t2, r2), e2.plugin_version = Sl, e2;
      }
      function Vn() {
        kl = true;
      }
      function Wn() {
        kl = false;
      }
      function zn() {
        return kl;
      }
      function Xn(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Zn(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Zn(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Yn(e2, t2, r2) {
        return Xn(e2, t2, r2), e2.plugin_version = jl, e2;
      }
      function Gn(e2) {
        var t2 = e2, r2 = "";
        r2 = al.para.debug_mode_url.indexOf("?") !== -1 ? al.para.debug_mode_url + "&" + al.kit.encodeTrackData(e2) : al.para.debug_mode_url + "?" + al.kit.encodeTrackData(e2), ol.ajax({ url: r2, type: "GET", cors: true, header: { "Dry-Run": String(al.para.debug_mode_upload) }, success: function(e3) {
          ol.isEmptyObject(e3) === true ? alert("debug数据发送成功" + t2) : alert("debug失败 错误原因" + JSON.stringify(e3));
        } });
      }
      function Qn(e2, t2) {
        if (al.para.debug_mode === true) {
          var r2 = e2.data;
          e2.callback;
          Gn(JSON.stringify(r2)), t2.cancellationToken.stop();
        }
        return e2;
      }
      function ei() {
        al.para.debug_mode === true && (al.para.debug_mode_upload = al.para.debug_mode_upload || false, ol.isString(al.para.debug_mode_url) || (ol.isString(al.para.server_url) ? al.para.debug_mode_url = al.para.server_url.replace("sa.gif", "debug") : ol.isArray(al.para.server_url) && ol.isString(al.para.server_url[0]) ? al.para.debug_mode_url = al.para.server_url[0].replace("sa.gif", "debug") : al.para.debug_mode = false));
      }
      function ti() {
        al.on("sdkInitPara", function() {
          ei();
        }), al.on("sdkAfterInitPara", function() {
          al.registerInterceptor("sendDataStage", { send: { priority: 30, entry: Qn } });
        });
      }
      function ri(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return ni(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function ni(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function ii(e2, t2, r2) {
        return ri(e2, t2, r2), e2.plugin_version = Tl, e2;
      }
      function ai(e2, t2) {
        if (ll.isObject(sl.para.jsapp) && !sl.para.jsapp.isOnline && "function" == typeof sl.para.jsapp.setData) {
          var r2 = e2;
          delete r2.callback, r2 = JSON.stringify(r2), sl.para.jsapp.setData(r2), t2.cancellationToken.stop();
        }
        return e2;
      }
      function oi() {
        sl.on("sdkAfterInitAPI", function() {
          ll.isObject(sl.commonWays) && (sl.commonWays.setOnlineState = si), sl.registerInterceptor("sendDataStage", { send: { priority: 40, entry: ai } });
        });
      }
      function si(e2) {
        if (e2 === true && ll.isObject(sl.para.jsapp) && "function" == typeof sl.para.jsapp.getData) {
          sl.para.jsapp.isOnline = true;
          var t2 = sl.para.jsapp.getData();
          ll.isArray(t2) && t2.length > 0 && ll.each(t2, function(e3) {
            ll.isJSONString(e3) && sl.kit.sendData(JSON.parse(e3));
          });
        } else sl.para.jsapp.isOnline = false;
      }
      function li(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return ui(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function ui(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function ci(e2, t2, r2) {
        return li(e2, t2, r2), e2.plugin_version = $l, e2;
      }
      function pi(e2, t2) {
        return !ul.para.app_js_bridge && ul.para.batch_send && cl.localStorage.isSupport() && localStorage.length < ul.para.batch_send.storage_length && (xl.add(e2.data), t2.cancellationToken.stop()), e2;
      }
      function di() {
        var e2 = { datasend_timeout: 6e3, send_interval: 6e3, storage_length: 200 };
        cl.localStorage.isSupport() && cl.isSupportCors() && "object" == typeof localStorage ? ul.para.batch_send === true ? ul.para.batch_send = cl.extend({}, e2) : "object" == typeof ul.para.batch_send && (ul.para.batch_send = cl.extend({}, e2, ul.para.batch_send)) : ul.para.batch_send = false;
      }
      function fi() {
        ul.on("sdkInitPara", function() {
          di();
        }), ul.on("sdkAfterInitPara", function() {
          !ul.para.app_js_bridge && ul.para.batch_send && cl.localStorage.isSupport() && (xl || (xl = new cl.BatchSend()), xl.batchInterval(), ul.registerInterceptor("sendDataStage", { send: { priority: 100, entry: pi } }));
        });
      }
      function gi(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return _i(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function _i(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function hi(e2, t2, r2) {
        return gi(e2, t2, r2), e2.plugin_version = Ul, e2;
      }
      function mi(e2) {
        var t2 = new dl.BeaconSend(e2);
        t2.start();
      }
      function vi(e2, t2) {
        var r2 = null, n2 = null;
        dl.isObject(e2.config) && (r2 = e2.config.send_type, n2 = dl.optimizeServerUrl(e2.config.server_url));
        var i2 = "beacon" === r2 || !r2 && "beacon" === pl.para.send_type;
        if (i2 && dl.isSupportBeaconSend()) {
          var a2 = n2 || e2.server_url;
          e2.server_url = a2, e2.data = pl.kit.encodeTrackData(e2.data), dl.isArray(a2) && a2.length ? dl.each(a2, function(t3) {
            e2.callback = null, e2.server_url = t3, mi(e2);
          }) : "string" == typeof a2 && "" !== a2 ? mi(e2) : pl.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！"), t2.cancellationToken.stop();
        }
        return e2;
      }
      function yi() {
        "beacon" !== pl.para.send_type || dl.isSupportBeaconSend() || (pl.para.send_type = pl.DEFAULT_SEND_TYPE);
      }
      function bi() {
        pl.on("sdkInitPara", function() {
          yi();
        }), pl.on("sdkAfterInitPara", function() {
          pl.registerInterceptor("sendDataStage", { send: { priority: 110, entry: vi } });
        });
      }
      function wi(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Si(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Si(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function ki(e2, t2, r2) {
        return wi(e2, t2, r2), e2.plugin_version = Hl, e2;
      }
      function Pi(e2) {
        var t2 = new gl.AjaxSend(e2);
        t2.start();
      }
      function Ci(e2, t2) {
        var r2 = null, n2 = null;
        gl.isObject(e2.config) && (r2 = e2.config.send_type, n2 = gl.optimizeServerUrl(e2.config.server_url));
        var i2 = "ajax" === r2 || !r2 && "ajax" === fl.para.send_type;
        if (i2 && gl.isSupportCors()) {
          var a2 = n2 || e2.server_url;
          e2.server_url = a2, e2.data = fl.kit.encodeTrackData(e2.data), gl.isArray(a2) && a2.length ? gl.each(a2, function(t3) {
            e2.callback = null, e2.server_url = t3, Pi(e2);
          }) : "string" == typeof a2 && "" !== a2 ? Pi(e2) : fl.log("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！"), t2.cancellationToken.stop();
        }
        return e2;
      }
      function Oi() {
        "ajax" !== fl.para.send_type || gl.isSupportCors() || (fl.para.send_type = fl.DEFAULT_SEND_TYPE);
      }
      function ji() {
        fl.on("sdkInitPara", function() {
          Oi();
        }), fl.on("sdkAfterInitPara", function() {
          fl.registerInterceptor("sendDataStage", { send: { priority: 120, entry: Ci } });
        });
      }
      function Ni(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Ii(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Ii(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Ti(e2, t2, r2) {
        return Ni(e2, t2, r2), e2.plugin_version = ql, e2;
      }
      function Ai(e2, t2) {
        var r2 = _l.kit.encodeTrackData(t2);
        return e2.indexOf("?") !== -1 ? e2 + "&" + r2 : e2 + "?" + r2;
      }
      function Di(e2) {
        var t2 = new hl.ImageSend(e2);
        t2.start();
      }
      function $i(e2, t2) {
        var r2 = null;
        hl.isObject(e2.config) && (r2 = hl.optimizeServerUrl(e2.config.server_url));
        var n2 = r2 || e2.server_url, i2 = e2.data;
        e2.server_url = n2, hl.isArray(n2) && n2.length ? hl.each(n2, function(t3) {
          t3 && (e2.data = Ai(t3, i2), e2.callback = null, e2.server_url = t3, Di(e2));
        }) : "string" == typeof n2 && "" !== n2 ? (e2.data = Ai(n2, i2), Di(e2)) : _l.logger && _l.logger.msg("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！").level("warn").log(), t2.cancellationToken.stop();
      }
      function xi() {
        "image" !== _l.para.send_type && "ajax" !== _l.para.send_type && "beacon" !== _l.para.send_type && (_l.para.send_type = "image");
      }
      function Ei() {
        _l.on("sdkInitPara", function() {
          xi();
        }), _l.on("sdkAfterInitPara", function() {
          _l.registerInterceptor("sendDataStage", { send: { priority: 130, entry: $i } });
        });
      }
      function Li(e2, t2, r2) {
        if (t2 && (e2.plugin_name = t2), r2 && e2.init) {
          var n2 = e2.init;
          e2.init = function(i2, a2) {
            function o2() {
              n2.call(e2, i2, a2);
            }
            return Ui(i2, e2, t2), i2.readyState && i2.readyState.state >= 3 || !i2.on ? o2() : void i2.on(r2, o2);
          };
        }
        return e2;
      }
      function Ui(e2, t2, r2) {
        function n2(t3, n3) {
          e2.logger ? e2.logger.msg.apply(e2.logger, n3).module(r2 + "" || "").level(t3).log() : e2.log && e2.log.apply(e2, n3);
        }
        t2.log = function() {
          n2("log", arguments);
        }, t2.warn = function() {
          n2("warn", arguments);
        }, t2.error = function() {
          n2("error", arguments);
        };
      }
      function Ri(e2, t2, r2) {
        return Li(e2, t2, r2), e2.plugin_version = _a, e2;
      }
      function Bi(e2) {
        return null === zl ? void Hi(e2) : void zl.push(e2);
      }
      function Hi(e2) {
        try {
          if ("log" === e2.level && Ji()) return void Fi(e2);
          if ("warn" === e2.level && Mi()) return void Fi(e2);
          if ("error" === e2.level && qi()) return void Fi(e2);
        } catch (t2) {
        }
      }
      function Ji() {
        return !!zi() || (Vl.para.show_log === true || Wl.isObject(Vl.para.show_log) && "log" === Vl.para.show_log.level);
      }
      function Mi() {
        return !!zi() || (Ji() || Wl.isObject(Vl.para.show_log) && "warn" === Vl.para.show_log.level);
      }
      function qi() {
        return !!zi() || (!Wl.isObject(Vl.para.show_log) || "none" !== Vl.para.show_log.level);
      }
      function Fi(e2) {
        var t2 = e2.content, r2 = Wl.isObject(t2[0]) ? Wl.formatJsonString(t2[0]) : t2[0], n2 = Ki(e2);
        t2[0] = n2 + (n2.length > 0 ? ": " : "") + r2;
        try {
          console && (Wl.isFunction(console[e2.level]) ? console[e2.level].apply(console, t2) : Wl.isObject(console[e2.level]) && console[e2.level](t2[0]));
        } catch (i2) {
        }
      }
      function Ki(e2) {
        var t2 = "", r2 = "", n2 = Vl.para.show_log;
        return Wl.isObject(n2) && n2.show_brand === false || (t2 += e2.brand), Wl.isObject(n2) && n2.show_level === false || (t2 += (t2.length > 0 ? "-" : "") + e2.level), t2.length > 0 && (t2 = "[" + t2 + "]"), Wl.isObject(n2) && n2.show_module === false || (r2 = e2.module), t2 + r2;
      }
      function Vi() {
        Wl.sessionStorage.isSupport() && sessionStorage.setItem(Yl, "true");
      }
      function Wi() {
        Wl.sessionStorage.isSupport() && sessionStorage.removeItem(Yl);
      }
      function zi() {
        return Wl.sessionStorage.isSupport() && "true" === sessionStorage.getItem(Yl);
      }
      var Xi = {};
      Xi.DEFAULT_SEND_TYPE = "image", (function() {
        function e2(n3, i3) {
          function a3(e3, t3) {
            try {
              e3();
            } catch (r3) {
              t3 && t3();
            }
          }
          function o3(e3) {
            if (null != o3[e3]) return o3[e3];
            var t3;
            if ("bug-string-char-index" == e3) t3 = "a" != "a"[0];
            else if ("json" == e3) t3 = o3("json-stringify") && o3("date-serialization") && o3("json-parse");
            else if ("date-serialization" == e3) {
              if (t3 = o3("json-stringify") && b2) {
                var r3 = i3.stringify;
                a3(function() {
                  t3 = '"-271821-04-20T00:00:00.000Z"' == r3(new p2(-864e13)) && '"+275760-09-13T00:00:00.000Z"' == r3(new p2(864e13)) && '"-000001-01-01T00:00:00.000Z"' == r3(new p2(-621987552e5)) && '"1969-12-31T23:59:59.999Z"' == r3(new p2(-1));
                });
              }
            } else {
              var n4, s3 = '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';
              if ("json-stringify" == e3) {
                var r3 = i3.stringify, c3 = "function" == typeof r3;
                c3 && ((n4 = function() {
                  return 1;
                }).toJSON = n4, a3(function() {
                  c3 = "0" === r3(0) && "0" === r3(new l2()) && '""' == r3(new u2()) && r3(v2) === h2 && r3(h2) === h2 && r3() === h2 && "1" === r3(n4) && "[1]" == r3([n4]) && "[null]" == r3([h2]) && "null" == r3(null) && "[null,null,null]" == r3([h2, v2, null]) && r3({ a: [n4, true, false, null, "\0\b\n\f\r	"] }) == s3 && "1" === r3(null, n4) && "[\n 1,\n 2\n]" == r3([1, 2], null, 1);
                }, function() {
                  c3 = false;
                })), t3 = c3;
              }
              if ("json-parse" == e3) {
                var d3, f3 = i3.parse;
                "function" == typeof f3 && a3(function() {
                  0 !== f3("0") || f3(false) || (n4 = f3(s3), d3 = 5 == n4.a.length && 1 === n4.a[0], d3 && (a3(function() {
                    d3 = !f3('"	"');
                  }), d3 && a3(function() {
                    d3 = 1 !== f3("01");
                  }), d3 && a3(function() {
                    d3 = 1 !== f3("1.");
                  })));
                }, function() {
                  d3 = false;
                }), t3 = d3;
              }
            }
            return o3[e3] = !!t3;
          }
          function s2(e3) {
            return D2(this);
          }
          n3 || (n3 = r2.Object()), i3 || (i3 = r2.Object());
          var l2 = n3.Number || r2.Number, u2 = n3.String || r2.String, c2 = n3.Object || r2.Object, p2 = n3.Date || r2.Date, d2 = n3.SyntaxError || r2.SyntaxError, f2 = n3.TypeError || r2.TypeError, g2 = n3.Math || r2.Math, _2 = n3.JSON || r2.JSON;
          if ("object" == typeof _2 && _2) return i3.stringify = _2.stringify, i3.parse = _2.parse, i3.runInContext = e2, i3;
          var h2, m2 = c2.prototype, v2 = m2.toString, y2 = m2.hasOwnProperty, b2 = new p2(-3509827334573292);
          if (a3(function() {
            b2 = b2.getUTCFullYear() == -109252 && 0 === b2.getUTCMonth() && 1 === b2.getUTCDate() && 10 == b2.getUTCHours() && 37 == b2.getUTCMinutes() && 6 == b2.getUTCSeconds() && 708 == b2.getUTCMilliseconds();
          }), o3["bug-string-char-index"] = o3["date-serialization"] = o3.json = o3["json-stringify"] = o3["json-parse"] = null, !o3("json")) {
            var w2 = "[object Function]", S2 = "[object Date]", k2 = "[object Number]", P2 = "[object String]", C2 = "[object Array]", O2 = "[object Boolean]", j2 = o3("bug-string-char-index"), N2 = function(e3, r3) {
              var n4, i4, a4, o4 = 0;
              (n4 = function() {
                this.valueOf = 0;
              }).prototype.valueOf = 0, i4 = new n4();
              for (a4 in i4) y2.call(i4, a4) && o4++;
              return n4 = i4 = null, o4 ? N2 = function(e4, t3) {
                var r4, n5, i5 = v2.call(e4) == w2;
                for (r4 in e4) i5 && "prototype" == r4 || !y2.call(e4, r4) || (n5 = "constructor" === r4) || t3(r4);
                (n5 || y2.call(e4, r4 = "constructor")) && t3(r4);
              } : (i4 = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"], N2 = function(e4, r4) {
                var n5, a5, o5 = v2.call(e4) == w2, s3 = !o5 && "function" != typeof e4.constructor && t2[typeof e4.hasOwnProperty] && e4.hasOwnProperty || y2;
                for (n5 in e4) o5 && "prototype" == n5 || !s3.call(e4, n5) || r4(n5);
                for (a5 = i4.length; n5 = i4[--a5]; ) s3.call(e4, n5) && r4(n5);
              }), N2(e3, r3);
            };
            if (!o3("json-stringify") && !o3("date-serialization")) {
              var I2 = { 92: "\\\\", 34: '\\"', 8: "\\b", 12: "\\f", 10: "\\n", 13: "\\r", 9: "\\t" }, T2 = "000000", A2 = function(e3, t3) {
                return (T2 + (t3 || 0)).slice(-e3);
              }, D2 = function(e3) {
                var t3, r3, n4, i4, a4, o4, s3, l3, u3;
                if (b2) t3 = function(e4) {
                  r3 = e4.getUTCFullYear(), n4 = e4.getUTCMonth(), i4 = e4.getUTCDate(), o4 = e4.getUTCHours(), s3 = e4.getUTCMinutes(), l3 = e4.getUTCSeconds(), u3 = e4.getUTCMilliseconds();
                };
                else {
                  var c3 = g2.floor, p3 = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334], d3 = function(e4, t4) {
                    return p3[t4] + 365 * (e4 - 1970) + c3((e4 - 1969 + (t4 = +(t4 > 1))) / 4) - c3((e4 - 1901 + t4) / 100) + c3((e4 - 1601 + t4) / 400);
                  };
                  t3 = function(e4) {
                    for (i4 = c3(e4 / 864e5), r3 = c3(i4 / 365.2425) + 1970 - 1; d3(r3 + 1, 0) <= i4; r3++) ;
                    for (n4 = c3((i4 - d3(r3, 0)) / 30.42); d3(r3, n4 + 1) <= i4; n4++) ;
                    i4 = 1 + i4 - d3(r3, n4), a4 = (e4 % 864e5 + 864e5) % 864e5, o4 = c3(a4 / 36e5) % 24, s3 = c3(a4 / 6e4) % 60, l3 = c3(a4 / 1e3) % 60, u3 = a4 % 1e3;
                  };
                }
                return (D2 = function(e4) {
                  return e4 > -1 / 0 && e4 < 1 / 0 ? (t3(e4), e4 = (r3 <= 0 || r3 >= 1e4 ? (r3 < 0 ? "-" : "+") + A2(6, r3 < 0 ? -r3 : r3) : A2(4, r3)) + "-" + A2(2, n4 + 1) + "-" + A2(2, i4) + "T" + A2(2, o4) + ":" + A2(2, s3) + ":" + A2(2, l3) + "." + A2(3, u3) + "Z", r3 = n4 = i4 = o4 = s3 = l3 = u3 = null) : e4 = null, e4;
                })(e3);
              };
              if (o3("json-stringify") && !o3("date-serialization")) {
                var $2 = i3.stringify;
                i3.stringify = function(e3, t3, r3) {
                  var n4 = p2.prototype.toJSON;
                  p2.prototype.toJSON = s2;
                  var i4 = $2(e3, t3, r3);
                  return p2.prototype.toJSON = n4, i4;
                };
              } else {
                var x2 = "\\u00", E2 = function(e3) {
                  var t3 = e3.charCodeAt(0), r3 = I2[t3];
                  return r3 ? r3 : x2 + A2(2, t3.toString(16));
                }, L2 = /[\x00-\x1f\x22\x5c]/g, U2 = function(e3) {
                  return L2.lastIndex = 0, '"' + (L2.test(e3) ? e3.replace(L2, E2) : e3) + '"';
                }, R2 = function(e3, t3, r3, n4, i4, o4, s3) {
                  var l3, u3, c3, d3, g3, _3, m3, y3, b3;
                  if (a3(function() {
                    l3 = t3[e3];
                  }), "object" == typeof l3 && l3 && (l3.getUTCFullYear && v2.call(l3) == S2 && l3.toJSON === p2.prototype.toJSON ? l3 = D2(l3) : "function" == typeof l3.toJSON && (l3 = l3.toJSON(e3))), r3 && (l3 = r3.call(t3, e3, l3)), l3 == h2) return l3 === h2 ? l3 : "null";
                  switch (u3 = typeof l3, "object" == u3 && (c3 = v2.call(l3)), c3 || u3) {
                    case "boolean":
                    case O2:
                      return "" + l3;
                    case "number":
                    case k2:
                      return l3 > -1 / 0 && l3 < 1 / 0 ? "" + l3 : "null";
                    case "string":
                    case P2:
                      return U2("" + l3);
                  }
                  if ("object" == typeof l3) {
                    for (m3 = s3.length; m3--; ) if (s3[m3] === l3) throw f2();
                    if (s3.push(l3), d3 = [], y3 = o4, o4 += i4, c3 == C2) {
                      for (_3 = 0, m3 = l3.length; _3 < m3; _3++) g3 = R2(_3, l3, r3, n4, i4, o4, s3), d3.push(g3 === h2 ? "null" : g3);
                      b3 = d3.length ? i4 ? "[\n" + o4 + d3.join(",\n" + o4) + "\n" + y3 + "]" : "[" + d3.join(",") + "]" : "[]";
                    } else N2(n4 || l3, function(e4) {
                      var t4 = R2(e4, l3, r3, n4, i4, o4, s3);
                      t4 !== h2 && d3.push(U2(e4) + ":" + (i4 ? " " : "") + t4);
                    }), b3 = d3.length ? i4 ? "{\n" + o4 + d3.join(",\n" + o4) + "\n" + y3 + "}" : "{" + d3.join(",") + "}" : "{}";
                    return s3.pop(), b3;
                  }
                };
                i3.stringify = function(e3, r3, n4) {
                  var i4, a4, o4, s3;
                  if (t2[typeof r3] && r3) {
                    if (s3 = v2.call(r3), s3 == w2) a4 = r3;
                    else if (s3 == C2) {
                      o4 = {};
                      for (var l3, u3 = 0, c3 = r3.length; u3 < c3; ) l3 = r3[u3++], s3 = v2.call(l3), "[object String]" != s3 && "[object Number]" != s3 || (o4[l3] = 1);
                    }
                  }
                  if (n4) if (s3 = v2.call(n4), s3 == k2) {
                    if ((n4 -= n4 % 1) > 0) for (n4 > 10 && (n4 = 10), i4 = ""; i4.length < n4; ) i4 += " ";
                  } else s3 == P2 && (i4 = n4.length <= 10 ? n4 : n4.slice(0, 10));
                  return R2("", (l3 = {}, l3[""] = e3, l3), a4, o4, i4, "", []);
                };
              }
            }
            if (!o3("json-parse")) {
              var B2, H2, J2 = u2.fromCharCode, M2 = { 92: "\\", 34: '"', 47: "/", 98: "\b", 116: "	", 110: "\n", 102: "\f", 114: "\r" }, q2 = function() {
                throw B2 = H2 = null, d2();
              }, F2 = function() {
                for (var e3, t3, r3, n4, i4, a4 = H2, o4 = a4.length; B2 < o4; ) switch (i4 = a4.charCodeAt(B2)) {
                  case 9:
                  case 10:
                  case 13:
                  case 32:
                    B2++;
                    break;
                  case 123:
                  case 125:
                  case 91:
                  case 93:
                  case 58:
                  case 44:
                    return e3 = j2 ? a4.charAt(B2) : a4[B2], B2++, e3;
                  case 34:
                    for (e3 = "@", B2++; B2 < o4; ) if (i4 = a4.charCodeAt(B2), i4 < 32) q2();
                    else if (92 == i4) switch (i4 = a4.charCodeAt(++B2)) {
                      case 92:
                      case 34:
                      case 47:
                      case 98:
                      case 116:
                      case 110:
                      case 102:
                      case 114:
                        e3 += M2[i4], B2++;
                        break;
                      case 117:
                        for (t3 = ++B2, r3 = B2 + 4; B2 < r3; B2++) i4 = a4.charCodeAt(B2), i4 >= 48 && i4 <= 57 || i4 >= 97 && i4 <= 102 || i4 >= 65 && i4 <= 70 || q2();
                        e3 += J2("0x" + a4.slice(t3, B2));
                        break;
                      default:
                        q2();
                    }
                    else {
                      if (34 == i4) break;
                      for (i4 = a4.charCodeAt(B2), t3 = B2; i4 >= 32 && 92 != i4 && 34 != i4; ) i4 = a4.charCodeAt(++B2);
                      e3 += a4.slice(t3, B2);
                    }
                    if (34 == a4.charCodeAt(B2)) return B2++, e3;
                    q2();
                  default:
                    if (t3 = B2, 45 == i4 && (n4 = true, i4 = a4.charCodeAt(++B2)), i4 >= 48 && i4 <= 57) {
                      for (48 == i4 && (i4 = a4.charCodeAt(B2 + 1), i4 >= 48 && i4 <= 57) && q2(), n4 = false; B2 < o4 && (i4 = a4.charCodeAt(B2), i4 >= 48 && i4 <= 57); B2++) ;
                      if (46 == a4.charCodeAt(B2)) {
                        for (r3 = ++B2; r3 < o4 && (i4 = a4.charCodeAt(r3), !(i4 < 48 || i4 > 57)); r3++) ;
                        r3 == B2 && q2(), B2 = r3;
                      }
                      if (i4 = a4.charCodeAt(B2), 101 == i4 || 69 == i4) {
                        for (i4 = a4.charCodeAt(++B2), 43 != i4 && 45 != i4 || B2++, r3 = B2; r3 < o4 && (i4 = a4.charCodeAt(r3), !(i4 < 48 || i4 > 57)); r3++) ;
                        r3 == B2 && q2(), B2 = r3;
                      }
                      return +a4.slice(t3, B2);
                    }
                    n4 && q2();
                    var s3 = a4.slice(B2, B2 + 4);
                    if ("true" == s3) return B2 += 4, true;
                    if ("fals" == s3 && 101 == a4.charCodeAt(B2 + 4)) return B2 += 5, false;
                    if ("null" == s3) return B2 += 4, null;
                    q2();
                }
                return "$";
              }, K2 = function(e3) {
                var t3, r3;
                if ("$" == e3 && q2(), "string" == typeof e3) {
                  if ("@" == (j2 ? e3.charAt(0) : e3[0])) return e3.slice(1);
                  if ("[" == e3) {
                    for (t3 = []; e3 = F2(), "]" != e3; ) r3 ? "," == e3 ? (e3 = F2(), "]" == e3 && q2()) : q2() : r3 = true, "," == e3 && q2(), t3.push(K2(e3));
                    return t3;
                  }
                  if ("{" == e3) {
                    for (t3 = {}; e3 = F2(), "}" != e3; ) r3 ? "," == e3 ? (e3 = F2(), "}" == e3 && q2()) : q2() : r3 = true, "," != e3 && "string" == typeof e3 && "@" == (j2 ? e3.charAt(0) : e3[0]) && ":" == F2() || q2(), t3[e3.slice(1)] = K2(F2());
                    return t3;
                  }
                  q2();
                }
                return e3;
              }, V2 = function(e3, t3, r3) {
                var n4 = W2(e3, t3, r3);
                n4 === h2 ? delete e3[t3] : e3[t3] = n4;
              }, W2 = function(e3, t3, r3) {
                var n4, i4 = e3[t3];
                if ("object" == typeof i4 && i4) if (v2.call(i4) == C2) for (n4 = i4.length; n4--; ) V2(v2, N2, i4, n4, r3);
                else N2(i4, function(e4) {
                  V2(i4, e4, r3);
                });
                return r3.call(e3, t3, i4);
              };
              i3.parse = function(e3, t3) {
                var r3, n4;
                return B2 = 0, H2 = "" + e3, r3 = K2(F2()), "$" != F2() && q2(), B2 = H2 = null, t3 && v2.call(t3) == w2 ? W2((n4 = {}, n4[""] = r3, n4), "", t3) : r3;
              };
            }
          }
          return i3.runInContext = e2, i3;
        }
        var t2 = { "function": true, object: true }, r2 = t2[typeof window] && window || this, n2 = r2.JSON, i2 = r2.JSON3, a2 = false, o2 = e2(r2, r2.JSON3 = { noConflict: function() {
          return a2 || (a2 = true, r2.JSON = n2, r2.JSON3 = i2, n2 = i2 = null), o2;
        } });
        r2.JSON ? (r2.JSON.parse = o2.parse, r2.JSON.stringify = o2.stringify) : r2.JSON = { parse: o2.parse, stringify: o2.stringify };
      }).call(window), function(e2, t2) {
        t2(e2);
      }(window, function(e2) {
        if (e2.atob) try {
          e2.atob(" ");
        } catch (t2) {
          e2.atob = function(e3) {
            var t3 = function(t4) {
              return e3(String(t4).replace(/[\t\n\f\r ]+/g, ""));
            };
            return t3.original = e3, t3;
          }(e2.atob);
        }
        else {
          var r2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", n2 = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;
          e2.btoa = function(e3) {
            e3 = String(e3);
            for (var t2, n3, i2, a2, o2 = "", s2 = 0, l2 = e3.length % 3; s2 < e3.length; ) {
              if ((n3 = e3.charCodeAt(s2++)) > 255 || (i2 = e3.charCodeAt(s2++)) > 255 || (a2 = e3.charCodeAt(s2++)) > 255) return "";
              t2 = n3 << 16 | i2 << 8 | a2, o2 += r2.charAt(t2 >> 18 & 63) + r2.charAt(t2 >> 12 & 63) + r2.charAt(t2 >> 6 & 63) + r2.charAt(63 & t2);
            }
            return l2 ? o2.slice(0, l2 - 3) + "===".substring(l2) : o2;
          }, e2.atob = function(e3) {
            if (e3 = String(e3).replace(/[\t\n\f\r ]+/g, ""), !n2.test(e3)) return "";
            e3 += "==".slice(2 - (3 & e3.length));
            for (var t2, i2, a2, o2 = "", s2 = 0; s2 < e3.length; ) t2 = r2.indexOf(e3.charAt(s2++)) << 18 | r2.indexOf(e3.charAt(s2++)) << 12 | (i2 = r2.indexOf(e3.charAt(s2++))) << 6 | (a2 = r2.indexOf(e3.charAt(s2++))), o2 += 64 === i2 ? String.fromCharCode(t2 >> 16 & 255) : 64 === a2 ? String.fromCharCode(t2 >> 16 & 255, t2 >> 8 & 255) : String.fromCharCode(t2 >> 16 & 255, t2 >> 8 & 255, 255 & t2);
            return o2;
          };
        }
      });
      var Zi, Yi = { setup: function(e2) {
        Zi = e2;
      }, log: function() {
        (Zi || console && console.log || function() {
        }).apply(null, arguments);
      } }, Gi = { get: function(e2) {
        return window.localStorage.getItem(e2);
      }, parse: function(e2) {
        var t2;
        try {
          t2 = JSON.parse(Gi.get(e2)) || null;
        } catch (r2) {
          Yi.log(r2);
        }
        return t2;
      }, set: function(e2, t2) {
        try {
          window.localStorage.setItem(e2, t2);
        } catch (r2) {
          Yi.log(r2);
        }
      }, remove: function(e2) {
        window.localStorage.removeItem(e2);
      }, isSupport: function() {
        var e2 = true;
        try {
          var t2 = "__local_store_support__", r2 = "testIsSupportStorage";
          Gi.set(t2, r2), Gi.get(t2) !== r2 && (e2 = false), Gi.remove(t2);
        } catch (n2) {
          e2 = false;
        }
        return e2;
      } }, Qi = function() {
        function e2() {
          return r2 = (9301 * r2 + 49297) % 233280, r2 / 233280;
        }
        var t2 = /* @__PURE__ */ new Date(), r2 = t2.getTime();
        return function(t3) {
          return Math.ceil(e2() * t3);
        };
      }();
      a.prototype.get = function(e2, r2, a2, o2) {
        if (!e2) throw new Error("key is must");
        r2 = r2 || 1e4, a2 = a2 || 1e3, o2 = o2 || function() {
        };
        var s2 = this.lockGetPrefix + e2, l2 = Gi.get(s2), u2 = String(n());
        return l2 && (l2 = i(l2) || { randomNum: 0, expireTime: 0 }, l2.expireTime > t()) ? o2(null) : (Gi.set(s2, JSON.stringify({ randomNum: u2, expireTime: t() + r2 })), void setTimeout(function() {
          l2 = i(Gi.get(s2)) || { randomNum: 0, expireTime: 0 }, l2 && l2.randomNum === u2 ? (o2(Gi.get(e2)), Gi.remove(e2), Gi.remove(s2)) : o2(null);
        }, a2));
      }, a.prototype.set = function(e2, r2, a2, o2, s2) {
        if (!e2 || !r2) throw new Error("key and val is must");
        a2 = a2 || 1e4, o2 = o2 || 1e3, s2 = s2 || function() {
        };
        var l2 = this.lockSetPrefix + e2, u2 = Gi.get(l2), c2 = String(n());
        return u2 && (u2 = i(u2) || { randomNum: 0, expireTime: 0 }, u2.expireTime > t()) ? s2({ status: "fail", reason: "This key is locked" }) : (Gi.set(l2, JSON.stringify({ randomNum: c2, expireTime: t() + a2 })), void setTimeout(function() {
          u2 = i(Gi.get(l2)) || { randomNum: 0, expireTime: 0 }, u2.randomNum === c2 ? Gi.set(e2, r2) && s2({ status: "success" }) : s2({ status: "fail", reason: "This key is locked" });
        }, o2));
      }, l.prototype.on = function(e2, t2) {
        if (!e2 || !t2) return false;
        if (!s(t2)) throw new Error("listener must be a function");
        this._events[e2] = this._events[e2] || [];
        var r2 = "object" == typeof t2;
        return this._events[e2].push(r2 ? t2 : { listener: t2, once: false }), this;
      }, l.prototype.prepend = function(e2, t2) {
        if (!e2 || !t2) return false;
        if (!s(t2)) throw new Error("listener must be a function");
        this._events[e2] = this._events[e2] || [];
        var r2 = "object" == typeof t2;
        return this._events[e2].unshift(r2 ? t2 : { listener: t2, once: false }), this;
      }, l.prototype.prependOnce = function(e2, t2) {
        return this.prepend(e2, { listener: t2, once: true });
      }, l.prototype.once = function(e2, t2) {
        return this.on(e2, { listener: t2, once: true });
      }, l.prototype.off = function(e2, t2) {
        var r2 = this._events[e2];
        if (!r2) return false;
        if ("number" == typeof t2) r2.splice(t2, 1);
        else if ("function" == typeof t2) for (var n2 = 0, i2 = r2.length; n2 < i2; n2++) r2[n2] && r2[n2].listener === t2 && r2.splice(n2, 1);
        return this;
      }, l.prototype.emit = function(e2, t2) {
        var r2 = this._events[e2];
        if (!r2) return false;
        for (var n2 = 0; n2 < r2.length; n2++) {
          var i2 = r2[n2];
          i2 && (i2.listener.call(this, t2 || {}), i2.once && this.off(e2, n2));
        }
        return this;
      }, l.prototype.removeAllListeners = function(e2) {
        e2 && this._events[e2] ? this._events[e2] = [] : this._events = {};
      }, l.prototype.listeners = function(e2) {
        return e2 && "string" == typeof e2 ? this._events[e2] : this._events;
      };
      var ea = /* @__PURE__ */ function() {
        var e2 = function() {
          for (var e3 = 1 * /* @__PURE__ */ new Date(), t3 = 0; e3 == 1 * /* @__PURE__ */ new Date(); ) t3++;
          return e3.toString(16) + t3.toString(16);
        }, t2 = function() {
          return n().toString(16).replace(".", "");
        }, r2 = function() {
          function e3(e4, t4) {
            var r4, n3 = 0;
            for (r4 = 0; r4 < t4.length; r4++) n3 |= i2[r4] << 8 * r4;
            return e4 ^ n3;
          }
          var t3, r3, n2 = navigator.userAgent, i2 = [], a2 = 0;
          for (t3 = 0; t3 < n2.length; t3++) r3 = n2.charCodeAt(t3), i2.unshift(255 & r3), i2.length >= 4 && (a2 = e3(a2, i2), i2 = []);
          return i2.length > 0 && (a2 = e3(a2, i2)), a2.toString(16);
        };
        return function() {
          var i2 = String(screen.height * screen.width);
          i2 = i2 && /\d{5,}/.test(i2) ? i2.toString(16) : String(31242 * n()).replace(".", "").slice(0, 8);
          var a2 = e2() + "-" + t2() + "-" + r2() + "-" + i2 + "-" + e2();
          return a2 ? a2 : (String(n()) + String(n()) + String(n())).slice(2, 15);
        };
      }(), ta = function(e2) {
        this.ele = e2;
      }, ra = function(e2, t2) {
        for (var r2 = []; e2; e2 = e2.nextSibling) 1 === e2.nodeType && e2 !== t2 && r2.push(e2);
        return r2;
      };
      ta.prototype = { addClass: function(e2) {
        var t2 = " " + this.ele.className + " ";
        return t2.indexOf(" " + e2 + " ") === -1 && (this.ele.className = this.ele.className + ("" === this.ele.className ? "" : " ") + e2), this;
      }, removeClass: function(e2) {
        var t2 = " " + this.ele.className + " ";
        return t2.indexOf(" " + e2 + " ") !== -1 && (this.ele.className = t2.replace(" " + e2 + " ", " ").slice(1, -1)), this;
      }, hasClass: function(e2) {
        var t2 = " " + this.ele.className + " ";
        return t2.indexOf(" " + e2 + " ") !== -1;
      }, attr: function(e2, t2) {
        return "string" == typeof e2 && v(t2) ? this.ele.getAttribute(e2) : ("string" == typeof e2 && (t2 = String(t2), this.ele.setAttribute(e2, t2)), this);
      }, offset: function() {
        var e2 = this.ele.getBoundingClientRect();
        if (e2.width || e2.height) {
          var t2 = this.ele.ownerDocument, r2 = t2.documentElement;
          return { top: e2.top + window.pageYOffset - r2.clientTop, left: e2.left + window.pageXOffset - r2.clientLeft };
        }
        return { top: 0, left: 0 };
      }, getSize: function() {
        if (!window.getComputedStyle) return { width: this.ele.offsetWidth, height: this.ele.offsetHeight };
        try {
          var e2 = this.ele.getBoundingClientRect();
          return { width: e2.width, height: e2.height };
        } catch (t2) {
          return { width: 0, height: 0 };
        }
      }, getStyle: function(e2) {
        return this.ele.currentStyle ? this.ele.currentStyle[e2] : this.ele.ownerDocument.defaultView.getComputedStyle(this.ele, null).getPropertyValue(e2);
      }, wrap: function(e2) {
        var t2 = document.createElement(e2);
        return this.ele.parentNode.insertBefore(t2, this.ele), t2.appendChild(this.ele), b(t2);
      }, getCssStyle: function(e2) {
        var t2 = this.ele.style.getPropertyValue(e2);
        if (t2) return t2;
        var r2 = null;
        if ("function" == typeof window.getMatchedCSSRules && (r2 = window.getMatchedCSSRules(this.ele)), !r2 || !y(r2)) return null;
        for (var n2 = r2.length - 1; n2 >= 0; n2--) {
          var i2 = r2[n2];
          if (t2 = i2.style.getPropertyValue(e2)) return t2;
        }
      }, sibling: function(e2, t2) {
        for (; (e2 = e2[t2]) && 1 !== e2.nodeType; ) ;
        return e2;
      }, next: function() {
        return this.sibling(this.ele, "nextSibling");
      }, prev: function() {
        return this.sibling(this.ele, "previousSibling");
      }, siblings: function() {
        return ra((this.ele.parentNode || {}).firstChild, this.ele);
      }, children: function() {
        return ra(this.ele.firstChild);
      }, parent: function() {
        var e2 = this.ele.parentNode;
        return e2 = e2 && 11 !== e2.nodeType ? e2 : null, b(e2);
      }, previousElementSibling: function() {
        var e2 = this.ele;
        if ("previousElementSibling" in document.documentElement) return b(e2.previousElementSibling);
        for (; e2 = e2.previousSibling; ) if (1 === e2.nodeType) return b(e2);
        return b(null);
      }, getSameTypeSiblings: function() {
        for (var e2 = this.ele, t2 = e2.parentNode, r2 = e2.tagName.toLowerCase(), n2 = [], i2 = 0; i2 < t2.children.length; i2++) {
          var a2 = t2.children[i2];
          1 === a2.nodeType && a2.tagName.toLowerCase() === r2 && n2.push(t2.children[i2]);
        }
        return n2;
      }, getParents: function() {
        try {
          var e2 = this.ele;
          if (!h(e2)) return [];
          var t2 = [e2];
          if (null === e2 || null === e2.parentElement) return [];
          for (; null !== e2.parentElement; ) e2 = e2.parentElement, t2.push(e2);
          return t2;
        } catch (r2) {
          return [];
        }
      } };
      var na = { get: function(e2) {
        for (var t2 = e2 + "=", r2 = document.cookie.split(";"), n2 = 0; n2 < r2.length; n2++) {
          for (var i2 = r2[n2]; " " == i2.charAt(0); ) i2 = i2.substring(1, i2.length);
          if (0 == i2.indexOf(t2)) return u(i2.substring(t2.length, i2.length));
        }
        return null;
      }, set: function(e2, t2, r2, n2, i2, a2) {
        function o2(e3) {
          return !!e3 && e3.replace(/\r\n/g, "");
        }
        var s2 = a2, l2 = "", u2 = "", c2 = "";
        if (r2 = null == r2 ? 73e3 : r2, 0 !== r2) {
          var p2 = /* @__PURE__ */ new Date();
          "s" === String(r2).slice(-1) ? p2.setTime(p2.getTime() + 1e3 * Number(String(r2).slice(0, -1))) : p2.setTime(p2.getTime() + 24 * r2 * 60 * 60 * 1e3), l2 = "; expires=" + p2.toGMTString();
        }
        n2 && "" !== n2 && (c2 = "; SameSite=" + n2), i2 && (u2 = "; secure");
        var d2 = "", f2 = "", g2 = "";
        e2 && (d2 = o2(e2)), t2 && (f2 = o2(t2)), s2 && (g2 = o2(s2)), d2 && f2 && (document.cookie = d2 + "=" + encodeURIComponent(f2) + l2 + "; path=/" + g2 + c2 + u2);
      }, remove: function(e2, t2) {
        this.set(e2, "1", -1, t2);
      }, isSupport: function(e2, t2, r2, n2, i2) {
        function a2() {
          o2.set(e2, t2, r2, n2, i2);
          var a3 = o2.get(e2);
          return a3 === t2 && (o2.remove(e2), true);
        }
        e2 = e2 || "cookie_support_test", t2 = t2 || "1";
        var o2 = this;
        return navigator.cookieEnabled && a2();
      } }, ia = Object.prototype.hasOwnProperty, aa = { isSupport: function() {
        var e2 = true, t2 = "__session_storage_support__", r2 = "testIsSupportStorage";
        try {
          sessionStorage && sessionStorage.setItem ? (sessionStorage.setItem(t2, r2), sessionStorage.removeItem(t2, r2), e2 = true) : e2 = false;
        } catch (n2) {
          e2 = false;
        }
        return e2;
      } }, oa = { "+": "-", "/": "_", "=": "." }, sa = { "-": "+", _: "/", ".": "=" }, la = { encode: function(e2) {
        return e2.replace(/[+\/=]/g, function(e3) {
          return oa[e3];
        });
      }, decode: function(e2) {
        return e2.replace(/[-_.]/g, function(e3) {
          return sa[e3];
        });
      }, trim: function(e2) {
        return e2.replace(/[.=]{1,2}$/, "");
      }, isBase64: function(e2) {
        return /^[A-Za-z0-9+\/]*[=]{0,2}$/.test(e2);
      }, isUrlSafeBase64: function(e2) {
        return /^[A-Za-z0-9_-]*[.]{0,2}$/.test(e2);
      } }, ua = {
        __proto__: null,
        noPrototypePollution: Ne,
        ConcurrentStorage: a,
        EventEmitter: l,
        URL: _,
        UUID: ea,
        addEvent: w,
        addHashEvent: S,
        ajax: O,
        base64Decode: N,
        base64Encode: I,
        bindReady: T,
        cookie: na,
        coverExtend: A,
        decodeURI: D,
        decodeURIComponent: u,
        dfmapping: $,
        each: P,
        encodeDates: L,
        extend: C,
        extend2Lev: U,
        filter: R,
        formatDate: E,
        formatJsonString: B,
        getCookieTopLevelDomain: J,
        getDomBySelector: M,
        getElementContent: q,
        getHostname: F,
        getIOSVersion: K,
        getQueryParam: V,
        getQueryParamsFromUrl: W,
        getRandom: n,
        getRandomBasic: Qi,
        getScreenOrientation: X,
        getUA: Z,
        getURL: Y,
        getURLPath: G,
        getURLSearchParams: p,
        hasAttribute: Q,
        hasAttributes: ee,
        hashCode: te,
        hashCode53: re,
        indexOf: ne,
        inherit: ie,
        isArguments: ae,
        isArray: y,
        isBoolean: oe,
        isDate: x,
        isElement: h,
        isEmptyObject: se,
        isFunction: e,
        isHttpUrl: le,
        isIOS: ue,
        isJSONString: ce,
        isNumber: pe,
        isObject: r,
        isString: d,
        isSupportBeaconSend: de,
        isSupportCors: fe,
        isUndefined: v,
        jsonp: ge,
        listenPageState: _e,
        loadScript: he,
        localStorage: Gi,
        logger: Yi,
        map: j,
        mediaQueriesSupported: z,
        now: t,
        removeScriptProtocol: me,
        rot13defs: ye,
        rot13obfs: ve,
        ry: b,
        safeJSONParse: i,
        searchObjDate: be,
        sessionStorage: aa,
        setCssStyle: we,
        strToUnicode: Se,
        throttle: ke,
        toArray: Ce,
        trim: f,
        unique: Oe,
        urlParse: g,
        urlSafeBase64: la,
        values: Pe,
        xhr: k,
        startsWith: je
      }, ca = [], pa = { appendWriter: function(e2) {
        ca.push(e2);
      }, msg: function() {
        var e2 = { module: "", level: "log", brand: "web-sdk", content: null };
        e2.content = Array.prototype.slice.call(arguments);
        var t2 = { module: function(t3) {
          return d(t3) && (e2.module = t3), this;
        }, level: function(t3) {
          return d(t3) && (e2.level = t3), this;
        }, brand: function(t3) {
          return d(t3) && (e2.brand = t3), this;
        }, log: function() {
          if (e2.content && e2.content.length) {
            for (var t3 = 0; t3 < ca.length; t3++) if ("function" == typeof ca[t3]) try {
              ca[t3].call(null, e2);
            } catch (r2) {
            }
          }
          return this;
        } };
        return t2;
      } }, da = {}, fa = { preset_properties: { search_keyword_baidu: false, latest_utm: true, latest_traffic_source_type: true, latest_search_keyword: true, latest_referrer: true, latest_referrer_host: false, latest_landing_page: false, latest_wx_ad_click_id: void 0, url: true, title: true }, encrypt_cookie: false, enc_cookie: false, img_use_crossorigin: false, name: "sa", max_referrer_string_length: 200, max_string_length: 500, max_id_length: 255, max_key_length: 100, cross_subdomain: true, show_log: false, is_debug: false, source_channel: [], sdk_id: "", auto_init: true, is_track_single_page: false, is_single_page: false, batch_send: false, source_type: {}, callback_timeout: 200, datasend_timeout: 8e3, is_track_device_id: false, ignore_oom: true, app_js_bridge: false };
      fa.white_list = {}, fa.white_list[location.host] = _(location.href).hostname;
      var ga = "utm_source utm_medium utm_campaign utm_content utm_term", _a = "1.27.3", ha = "sensorsdata_domain_test", ma = { EMAIL: "$identity_email", MOBILE: "$identity_mobile", LOGIN: "$identity_login_id" }, va = { get: function(e2) {
        return na.get(e2);
      }, set: function(e2, t2, r2, n2) {
        var i2 = "";
        if (n2 = v(n2) ? da.cross_subdomain : n2) {
          var a2 = De(location.href);
          "url解析失败" === a2 && (a2 = ""), i2 = a2 ? "; domain=" + a2 : "";
        }
        return na.set(e2, t2, r2, da.set_cookie_samesite, da.is_secure_cookie, i2);
      }, remove: function(e2, t2) {
        return t2 = v(t2) ? da.cross_subdomain : t2, na.remove(e2, t2);
      }, isSupport: function(e2, t2) {
        return e2 = e2 || "sajssdk_2015_cookie_access_test", t2 = t2 || "1", na.isSupport(e2, t2, 0, null, da.is_secure_cookie);
      } };
      va.getNewUser = xe;
      var ya = { data: {}, get: function(e2) {
        var t2 = this.data[e2];
        return void 0 === t2 ? null : void 0 !== t2._expirationTimestamp_ ? (/* @__PURE__ */ new Date()).getTime() > t2._expirationTimestamp_ ? null : t2.value : t2;
      }, set: function(e2, t2, r2) {
        if (r2) {
          var n2, i2 = /* @__PURE__ */ new Date();
          n2 = "s" === String(r2).slice(-1) ? i2.getTime() + 1e3 * Number(String(r2).slice(0, -1)) : i2.getTime() + 24 * r2 * 60 * 60 * 1e3, t2 = { value: t2, _expirationTimestamp_: n2 };
        }
        this.data[e2] = t2;
      }, getNewUserFlagMemoryKey: function(e2) {
        return "sajssdk_2015_" + da.sdk_id + e2;
      } }, ba = { checkIsAddSign: function(e2) {
        "track" === e2.type && (xe() ? e2.properties.$is_first_day = true : e2.properties.$is_first_day = false);
      }, is_first_visit_time: false, is_page_first_visited: false, checkIsFirstTime: function(e2) {
        "track" === e2.type && "$pageview" === e2.event && (this.is_first_visit_time ? (e2.properties.$is_first_time = true, this.is_first_visit_time = false) : e2.properties.$is_first_time = false);
      }, setDeviceId: function() {
      }, storeInitCheck: function() {
        if (Xi.is_first_visitor) {
          var e2 = /* @__PURE__ */ new Date(), t2 = { h: 23 - e2.getHours(), m: 59 - e2.getMinutes(), s: 59 - e2.getSeconds() };
          va.isSupport() ? va.set($e("new_user"), "1", 3600 * t2.h + 60 * t2.m + t2.s + "s") : ya.set(ya.getNewUserFlagMemoryKey("new_user"), "1", 3600 * t2.h + 60 * t2.m + t2.s + "s"), this.is_first_visit_time = true, this.is_page_first_visited = true;
        } else xe() || (this.checkIsAddSign = function(e3) {
          "track" === e3.type && (e3.properties.$is_first_day = false);
        }), this.checkIsFirstTime = function(e3) {
          "track" === e3.type && "$pageview" === e3.event && (e3.properties.$is_first_time = false);
        };
      } }, wa = function() {
        this._events = [], this.pendingEvents = [];
      };
      wa.prototype = { emit: function(e2) {
        var t2 = [].slice.call(arguments, 1);
        P(this._events, function(r2) {
          r2.type === e2 && r2.callback.apply(r2.context, t2);
        }), this.pendingEvents.push({ type: e2, data: t2 }), this.pendingEvents.length > 20 ? this.pendingEvents.shift() : null;
      }, on: function(t2, r2, n2, i2) {
        e(r2) && (this._events.push({ type: t2, callback: r2, context: n2 || this }), i2 = i2 !== false, this.pendingEvents.length > 0 && i2 && P(this.pendingEvents, function(e2) {
          e2.type === t2 && r2.apply(n2, e2.data);
        }));
      }, tempAdd: function(e2, t2) {
        if (t2 && e2) return this.emit(e2, t2);
      }, isReady: function() {
      } };
      var Sa = { data: {}, id: function() {
        return this.data.id ? this.data.id : (this.data.id = Re(), this.data.id);
      }, type: function() {
        return this.data.type ? this.data.type : (this.data.type = Ue(), this.data.type);
      } }, ka = { distinct_id: function() {
      }, jssdkDebug: function() {
      }, _sendDebug: function(e2) {
      }, apph5: function(e2) {
        var t2 = "app_h5打通失败-", n2 = { 1: t2 + "use_app_track为false", 2: t2 + "Android或者iOS，没有暴露相应方法", 3.1: t2 + "Android校验server_url失败", 3.2: t2 + "iOS校验server_url失败", 4.1: t2 + "H5 校验 iOS server_url 失败", 4.2: t2 + "H5 校验 Android server_url 失败" }, i2 = e2.output, a2 = e2.step, o2 = e2.data || "";
        "all" !== i2 && "console" !== i2 || Ie(n2[a2]), ("all" === i2 || "code" === i2) && r(da.is_debug) && da.is_debug.apph5 && (o2.type && "profile" === o2.type.slice(0, 7) || (o2.properties._jssdk_debug_info = "apph5-" + String(a2)));
      }, defineMode: function(e2) {
        var t2 = { 1: { title: "当前页面无法进行可视化全埋点", message: "App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 App SDK 的配置，详细信息请查看文档。", link_text: "", link_url: "" }, 2: { title: "当前页面无法进行可视化全埋点", message: "App SDK 与 Web JS SDK 没有进行打通，请联系贵方技术人员修正 Web JS SDK 的配置，详细信息请查看文档。", link_text: "", link_url: "" }, 3: { title: "当前页面无法进行可视化全埋点", message: "Web JS SDK 没有开启全埋点配置，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。", link_text: "", link_url: "" }, 4: { title: "当前页面无法进行可视化全埋点", message: "Web JS SDK 配置的数据校验地址与 App SDK 配置的数据校验地址不一致，请联系贵方工作人员修正 SDK 的配置，详细信息请查看文档。", link_text: "", link_url: "" } };
        return !(!e2 || !t2[e2]) && t2[e2];
      }, protocol: { protocolIsSame: function(e2, t2) {
        try {
          if (_(e2).protocol !== _(t2).protocol) return false;
        } catch (r2) {
          return Te("不支持 _.URL 方法"), false;
        }
        return true;
      }, serverUrl: function() {
        d(da.server_url) && "" !== da.server_url && !this.protocolIsSame(da.server_url, location.href) && Te("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。\n因为：1、https 下面发送 http 的图片请求会失败。2、http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。");
      }, ajax: function(e2) {
        return e2 !== da.server_url && void (d(e2) && "" !== e2 && !this.protocolIsSame(e2, location.href) && Te("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。因为 http 页面使用 https + ajax 方式发数据，在 ie9 及以下会丢失数据。"));
      } } }, Pa = { initPage: function() {
        var e2 = Be(), t2 = Y(), r2 = De(t2);
        r2 || ka.jssdkDebug("url_domain异常_" + t2 + "_" + r2), this.pageProp = { referrer: e2, referrer_host: e2 ? F(e2) : "", url: t2, url_host: F(t2, "url_host取值异常"), url_domain: r2 };
      }, pageProp: {}, campaignParams: function() {
        return Xi.kit.getUtmData();
      }, campaignParamsStandard: function(e2, t2) {
        e2 = e2 || "", t2 = t2 || "";
        var r2 = Pa.campaignParams(), n2 = {}, i2 = {};
        return P(r2, function(r3, a2, o2) {
          (" " + ga + " ").indexOf(" " + a2 + " ") !== -1 ? n2[e2 + a2] = o2[a2] : i2[t2 + a2] = o2[a2];
        }), { $utms: n2, otherUtms: i2 };
      }, properties: function() {
        var e2 = window.innerHeight || document.documentElement.clientHeight || document.body && document.body.clientHeight || 0, t2 = window.innerWidth || document.documentElement.clientWidth || document.body && document.body.clientWidth || 0, r2 = { $timezone_offset: (/* @__PURE__ */ new Date()).getTimezoneOffset(), $screen_height: Number(screen.height) || 0, $screen_width: Number(screen.width) || 0, $viewport_height: e2, $viewport_width: t2, $lib: "js", $lib_version: _a };
        return r2;
      }, currentProps: {}, register: function(e2) {
        C(Pa.currentProps, e2);
      } }, Ca = {}, Oa = new l();
      Ca.spa = Oa, Ca.sdk = new l(), Ca.data = new l(), Ca.initSystemEvent = function() {
        rt(function(e2) {
          Oa.emit("switch", e2);
        });
      }, Ca.EVENT_LIST = { spaSwitch: ["spa", "switch"], sdkBeforeInit: ["sdk", "beforeInit"], sdkInitPara: ["sdk", "initPara"], sdkAfterInitPara: ["sdk", "afterInitPara"], sdkInitAPI: ["sdk", "initAPI"], sdkAfterInitAPI: ["sdk", "afterInitAPI"], sdkAfterInit: ["sdk", "afterInit"], sdkReady: ["sdk", "ready"], dataSendSuccess: ["data", "sendSuccess"], dataSendFail: ["data", "sendFail"] };
      var ja = function(e2) {
        this.callback = e2.callback, this.server_url = e2.server_url, this.data = e2.data, this.origin_data = e2.origin_data;
      };
      ja.prototype.start = function() {
        var e2 = this, t2 = /* @__PURE__ */ new Date();
        Qe({ url: this.server_url, type: "POST", data: e2.data, credentials: false, timeout: da.datasend_timeout, cors: true, success: function(r2, n2) {
          Ca.data.emit("sendSuccess", { status: String(n2), resText: r2, type: "ajax_single", timeout_config: da.datasend_timeout, request_timeout: /* @__PURE__ */ new Date() - t2, data: e2.origin_data }), e2.end();
        }, error: function(r2, n2) {
          Ca.data.emit("sendFail", { status: String(n2), resText: r2, type: "ajax_single", timeout_config: da.datasend_timeout, request_timeout: /* @__PURE__ */ new Date() - t2, data: e2.origin_data }), e2.end();
        } });
      }, ja.prototype.end = function() {
        if (this.callback) {
          if (Ie("warning: sdk callback is deprecated."), !e(this.callback)) return void Ie("error: sdk callback must be function.");
          this.callback();
        }
      };
      var Na = "sawebjssdk-", Ia = "tab-sawebjssdk-";
      it.prototype = { batchInterval: function() {
        "" === this.serverUrl && this.getServerUrl(), this.hasTabStorage || (this.generateTabStorage(), this.hasTabStorage = true);
        var e2 = this;
        e2.timer = setTimeout(function() {
          e2.updateExpireTime(), e2.recycle(), e2.send(), clearTimeout(e2.timer), e2.batchInterval();
        }, da.batch_send.send_interval);
      }, getServerUrl: function() {
        return d(da.server_url) && "" !== da.server_url || y(da.server_url) && da.server_url.length ? void (this.serverUrl = y(da.server_url) ? da.server_url[0] : da.server_url) : Ae("当前 server_url 为空或不正确，只在控制台打印日志，network 中不会发数据，请配置正确的 server_url！");
      }, send: function() {
        if (this.sendTimeStamp && t() - this.sendTimeStamp < da.batch_send.send_interval) return false;
        var e2 = Gi.get(this.tabKey);
        if (e2) {
          this.sendTimeStamp = t(), e2 = i(e2) || this.generateTabStorageVal();
          var r2 = Oe(e2.data);
          if (r2.length) {
            for (var n2 = [], a2 = 0; a2 < r2.length; a2++) {
              var o2 = Xi.store.readObjectVal(r2[a2]);
              o2 && (o2._flush_time = (/* @__PURE__ */ new Date()).getTime(), n2.push(o2));
            }
            n2.length && this.request(n2, e2.data);
          }
        }
      }, updateExpireTime: function() {
        var e2 = Gi.get(this.tabKey);
        e2 && (e2 = i(e2) || this.generateTabStorageVal(), e2.expireTime = t() + 2 * da.batch_send.send_interval, e2.serverUrl = this.serverUrl, Gi.set(this.tabKey, JSON.stringify(e2)));
      }, request: function(e2, t2) {
        var r2 = this, n2 = /* @__PURE__ */ new Date();
        Qe({ url: this.serverUrl, type: "POST", data: "data_list=" + encodeURIComponent(I(JSON.stringify(e2))), credentials: false, timeout: da.batch_send.datasend_timeout, cors: true, success: function(i2, a2) {
          Ca.data.emit("sendSuccess", { status: String(a2), resText: i2, type: "ajax_batch", timeout_config: da.batch_send.datasend_timeout, request_timeout: /* @__PURE__ */ new Date() - n2, data: e2 }), r2.remove(t2), r2.sendTimeStamp = 0;
        }, error: function(t3, i2) {
          Ca.data.emit("sendFail", { status: String(i2), resText: t3, type: "ajax_batch", timeout_config: da.batch_send.datasend_timeout, request_timeout: /* @__PURE__ */ new Date() - n2, data: e2 }), r2.sendTimeStamp = 0;
        } });
      }, remove: function(e2) {
        var t2 = Gi.get(this.tabKey);
        if (t2) {
          for (var r2 = (i(t2) || this.generateTabStorageVal()).data, n2 = 0; n2 < e2.length; n2++) {
            var a2 = ne(r2, e2[n2]);
            a2 > -1 && r2.splice(a2, 1), Gi.remove(e2[n2]);
          }
          r2 = Oe(r2), Gi.set(this.tabKey, JSON.stringify(this.generateTabStorageVal(r2)));
        }
      }, add: function(e2) {
        var r2 = Na + String(n()), a2 = Gi.get(this.tabKey);
        null === a2 ? (this.tabKey = Ia + String(n()), a2 = this.generateTabStorageVal()) : a2 = i(a2) || this.generateTabStorageVal(), a2.data.push(r2), a2.expireTime = t() + 2 * da.batch_send.send_interval, Gi.set(this.tabKey, JSON.stringify(a2)), Xi.store.saveObjectVal(r2, e2), "track_signup" !== e2.type && "$pageview" !== e2.event || this.sendImmediately();
      }, generateTabStorage: function() {
        this.tabKey = Ia + String(n()), Gi.set(this.tabKey, JSON.stringify(this.generateTabStorageVal()));
      }, generateTabStorageVal: function(e2) {
        return e2 = e2 || [], { data: e2, expireTime: t() + 2 * da.batch_send.send_interval, serverUrl: this.serverUrl };
      }, sendImmediately: function() {
        this.send();
      }, recycle: function() {
        for (var e2 = {}, r2 = 1e4, n2 = "sajssdk-lock-get-", o2 = 0; o2 < localStorage.length; o2++) {
          var s2 = localStorage.key(o2), l2 = this;
          if (0 === s2.indexOf(Ia)) {
            for (var u2 = i(Gi.get(s2)) || this.generateTabStorageVal(), c2 = 0; c2 < u2.data.length; c2++) e2[u2.data[c2]] = true;
            if (s2 !== l2.tabKey && t() > u2.expireTime && this.serverUrl === u2.serverUrl) {
              var p2 = new a(n2);
              p2.get(s2, r2, 1e3, function(e3) {
                if (e3) {
                  null === Gi.get(l2.tabKey) && l2.generateTabStorage();
                  var t2 = i(e3) || l2.generateTabStorageVal(), r3 = i(Gi.get(l2.tabKey)) || l2.generateTabStorageVal();
                  r3.data = Oe(r3.data.concat(t2.data)), Gi.set(l2.tabKey, JSON.stringify(r3));
                }
              });
            }
          } else if (0 === s2.indexOf(n2)) {
            var d2 = i(Gi.get(s2)) || { expireTime: 0 };
            t() - d2.expireTime > r2 && Gi.remove(s2);
          }
        }
        for (var f2 = 0; f2 < localStorage.length; f2++) {
          var g2 = localStorage.key(f2);
          0 !== g2.indexOf(Na) || e2[g2] || Gi.remove(g2);
        }
      } };
      var Ta = function(e2) {
        this.callback = e2.callback, this.server_url = e2.server_url, this.data = e2.data;
      };
      Ta.prototype.start = function() {
        var e2 = this;
        "object" == typeof navigator && "function" == typeof navigator.sendBeacon && navigator.sendBeacon(this.server_url, this.data), setTimeout(function() {
          e2.end();
        }, 40);
      }, Ta.prototype.end = function() {
        if (this.callback) {
          if (Ie("warning: sdk callback is deprecated."), !e(this.callback)) return void Ie("error: sdk callback must be function.");
          this.callback();
        }
      };
      var Aa = function(e2) {
        this.callback = e2.callback, this.img = document.createElement("img"), this.img.width = 1, this.img.height = 1, da.img_use_crossorigin && (this.img.crossOrigin = "anonymous"), this.server_url = e2.data;
      };
      Aa.prototype.start = function() {
        var e2 = this;
        da.ignore_oom && (this.img.onload = function() {
          this.onload = null, this.onerror = null, this.onabort = null, e2.end();
        }, this.img.onerror = function() {
          this.onload = null, this.onerror = null, this.onabort = null, e2.end();
        }, this.img.onabort = function() {
          this.onload = null, this.onerror = null, this.onabort = null, e2.end();
        }), this.img.src = this.server_url;
      }, Aa.prototype.lastClear = function() {
        var e2 = Z();
        void 0 !== e2.ie ? this.img.src = "about:blank" : this.img.src = "";
      }, Aa.prototype.end = function() {
        if (this.callback) {
          if (Ie("warning: sdk callback is deprecated."), !e(this.callback)) return void Ie("error: sdk callback must be function.");
          this.callback();
        }
        self.lastClear && self.lastClear();
      };
      var Da = { __proto__: null, addEvent: Ee, EventEmitterSa: wa, cookie: va, info: Pa, getReferrer: Be, getCurrentDomain: De, isBaiduTraffic: Le, getReferrerEqid: Re, getReferrerEqidType: Ue, getBaiduKeyword: Sa, isReferralTraffic: He, getKeywordFromReferrer: Je, getReferSearchEngine: Me, getSourceFromReferrer: qe, getWxAdIdFromUrl: Fe, parseSuperProperties: Ke, searchConfigData: Ve, strip_empty_properties: We, getEleInfo: Ze, getElementContent: Ge, ajax: Qe, optimizeServerUrl: et, encodeTrackData: tt, AjaxSend: ja, BatchSend: it, BeaconSend: Ta, ImageSend: Aa }, $a = new wa(), xa = { requests: [], _sessionState: {}, _state: { distinct_id: "", first_id: "", props: {}, identities: {} }, getProps: function() {
        return this._state.props || {};
      }, getSessionProps: function() {
      }, getOriginDistinctId: function() {
        return this._state._distinct_id || this._state.distinct_id;
      }, getOriginUnionId: function(e2) {
        var t2 = {};
        e2 = e2 || this._state;
        var r2 = e2._first_id || e2.first_id, n2 = e2._distinct_id || e2.distinct_id;
        return r2 && n2 ? (t2.login_id = n2, t2.anonymous_id = r2) : t2.anonymous_id = n2, t2;
      }, getIdentities: function() {
        var e2 = JSON.parse(JSON.stringify(this._state.identities));
        return e2.$identity_anonymous_id = this.getAnonymousId(), e2;
      }, getAnonymousId: function() {
        return xa._state._first_id || xa._state.first_id || xa._state._distinct_id || xa._state.distinct_id;
      }, getDistinctId: function() {
        var e2 = this.getUnionId();
        return e2.login_id || e2.anonymous_id;
      }, getUnionId: function(e2) {
        var t2 = this.getOriginUnionId(e2);
        return t2.login_id && this._state.history_login_id && this._state.history_login_id.name && this._state.history_login_id.name !== ma.LOGIN && (t2.login_id = this._state.history_login_id.name + "+" + t2.login_id), t2;
      }, getFirstId: function() {
        return this._state._first_id || this._state.first_id;
      }, initSessionState: function() {
      }, setOnce: function(e2, t2) {
        e2 in this._state || this.set(e2, t2);
      }, set: function(e2, t2) {
        this._state = this._state || {};
        var r2 = this._state.distinct_id;
        this._state[e2] = t2, "first_id" === e2 ? delete this._state._first_id : "distinct_id" === e2 && delete this._state._distinct_id, this.save(), "distinct_id" === e2 && r2 && $a.tempAdd("changeDistinctId", t2);
      }, change: function(e2, t2) {
        this._state["_" + e2] = t2;
      }, setSessionProps: function() {
        Xi.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问");
      }, setSessionPropsOnce: function() {
        Xi.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问");
      }, setProps: function(e2, t2) {
        var r2 = {};
        r2 = t2 ? e2 : C(this._state.props || {}, e2);
        for (var n2 in r2) "string" == typeof r2[n2] && (r2[n2] = r2[n2].slice(0, Xi.para.max_referrer_string_length));
        this.set("props", r2);
      }, setPropsOnce: function(e2) {
        var t2 = this._state.props || {};
        A(t2, e2), this.set("props", t2);
      }, clearAllProps: function(e2) {
        var t2;
        if (y(e2) && e2.length > 0) for (t2 = 0; t2 < e2.length; t2++) d(e2[t2]) && e2[t2].indexOf("latest_") === -1 && r(this._state.props) && e2[t2] in this._state.props && delete this._state.props[e2[t2]];
        else if (r(this._state.props)) for (t2 in this._state.props) 1 !== t2.indexOf("latest_") && delete this._state.props[t2];
        this.sessionSave({}), this.save();
      }, sessionSave: function() {
        Xi.log("initSessionState 方法已经弃用，请不要使用该功能，如有需求联系技术顾问");
      }, save: function() {
        var e2 = JSON.parse(JSON.stringify(this._state));
        delete e2._first_id, delete e2._distinct_id, e2.identities && (e2.identities = I(JSON.stringify(e2.identities)));
        var t2 = JSON.stringify(e2);
        Xi.para.encrypt_cookie && (t2 = Xi.kit.userEncrypt(t2)), va.set(this.getCookieName(), t2, 360, Xi.para.cross_subdomain);
      }, getCookieName: function() {
        var e2 = "";
        if (Xi.para.cross_subdomain === false) {
          try {
            var t2 = location.host;
            v(Xi.para.white_list[t2]) || (e2 = Xi.para.white_list[t2]);
          } catch (r2) {
            Te(r2);
          }
          e2 = "string" == typeof e2 && "" !== e2 ? "sa_jssdk_2015_" + Xi.para.sdk_id + e2.replace(/\./g, "_") : "sa_jssdk_2015_root" + Xi.para.sdk_id;
        } else e2 = "sensorsdata2015jssdkcross" + Xi.para.sdk_id;
        return e2;
      }, init: function() {
        function e2(e3) {
          var t3;
          e3.identities && (0 === e3.identities.indexOf("\n/") ? e3.identities = i(ye(e3.identities)) : e3.identities = i(N(e3.identities)));
          var n3 = xa.getOriginUnionId(e3);
          e3.identities && r(e3.identities) && !se(e3.identities) || (e3.identities = {}, e3.identities.$identity_cookie_id = ea()), e3.history_login_id = e3.history_login_id || {};
          var a3 = e3.history_login_id, o3 = a3.name;
          if (n3.login_id) if (o3 && e3.identities.hasOwnProperty(o3)) {
            if (e3.identities[o3] !== n3.login_id) {
              e3.identities[o3] = n3.login_id;
              for (t3 in e3.identities) e3.identities.hasOwnProperty(t3) && "$identity_cookie_id" !== t3 && t3 !== o3 && delete e3.identities[t3];
              e3.history_login_id.value = n3.login_id;
            }
          } else {
            var s2 = o3 || ma.LOGIN;
            e3.identities[s2] = n3.login_id;
            for (t3 in e3.identities) e3.identities.hasOwnProperty(t3) && "$identity_cookie_id" !== t3 && t3 !== s2 && delete e3.identities[t3];
            e3.history_login_id = { name: s2, value: n3.login_id };
          }
          else {
            if (e3.identities.hasOwnProperty("$identity_login_id") || e3.identities.hasOwnProperty(o3)) for (t3 in e3.identities) e3.identities.hasOwnProperty(t3) && "$identity_cookie_id" !== t3 && "$identity_anonymous_id" !== t3 && delete e3.identities[t3];
            e3.history_login_id = { name: "", value: "" };
          }
          return e3;
        }
        function t2(e3) {
          xa.set("distinct_id", e3), xa.set("identities", { $identity_cookie_id: e3 }), xa.set("history_login_id", { name: "", value: "" });
        }
        this.initSessionState();
        var n2, a2, o2 = ea();
        va.isSupport() && (n2 = va.get(this.getCookieName()), n2 = Xi.kit.userDecryptIfNeeded(n2), a2 = i(n2)), va.isSupport() && null !== n2 && ce(n2) && r(a2) && (!r(a2) || a2.distinct_id) ? (xa._state = C(e2(a2)), xa.save()) : (Xi.is_first_visitor = true, t2(o2)), ba.setDeviceId(o2, this), ba.storeInitCheck();
      }, saveObjectVal: function(e2, t2) {
        d(t2) || (t2 = JSON.stringify(t2)), 1 == Xi.para.encrypt_cookie && (t2 = Xi.kit.userEncrypt(t2)), Gi.set(e2, t2);
      }, readObjectVal: function(e2) {
        var t2 = Gi.get(e2);
        return t2 ? (t2 = Xi.kit.userDecryptIfNeeded(t2), i(t2)) : null;
      } }, Ea = { string: function(e2) {
        Te(e2 + " must be string");
      }, emptyString: function(e2) {
        Te(e2 + "'s is empty");
      }, regexTest: function(e2) {
        Te(e2 + " is invalid");
      }, idLength: function(e2) {
        Te(e2 + " length is longer than " + da.max_id_length);
      }, keyLength: function(e2) {
        Te(e2 + " length is longer than " + da.max_key_length);
      }, stringLength: function(e2) {
        Te(e2 + " length is longer than " + da.max_string_length);
      }, voidZero: function(e2) {
        Te(e2 + "'s is undefined");
      }, reservedLoginId: function(e2) {
        Te(e2 + " is invalid");
      }, reservedBind: function(e2) {
        Te(e2 + " is invalid");
      }, reservedUnbind: function(e2) {
        Te(e2 + " is invalid");
      } }, La = { regName: /^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$|^user_tag.*|^user_group.*)[a-zA-Z_$][a-zA-Z\d_$]*)$/i, loginIDReservedNames: ["$identity_anonymous_id", "$identity_cookie_id"], bindReservedNames: ["$identity_login_id", "$identity_anonymous_id", "$identity_cookie_id"], unbindReservedNames: ["$identity_anonymous_id", ma.LOGIN], string: function(e2) {
        return !!d(e2);
      }, emptyString: function(e2) {
        return !(!d(e2) || 0 === f(e2).length);
      }, regexTest: function(e2) {
        return !(!d(e2) || !this.regName.test(e2));
      }, idLength: function(e2) {
        return !(!d(e2) || e2.length > da.max_id_length);
      }, keyLength: function(e2) {
        return !(!d(e2) || e2.length > da.max_key_length);
      }, stringLength: function(e2) {
        return !(!d(e2) || e2.length > da.max_string_length);
      }, voidZero: function(e2) {
        return void 0 !== e2;
      }, reservedLoginId: function(e2) {
        return !(ne(this.loginIDReservedNames, e2) > -1);
      }, reservedUnbind: function(e2) {
        return !(ne(this.unbindReservedNames, e2) > -1);
      }, reservedBind: function(e2) {
        var t2 = xa._state.history_login_id;
        return (!t2 || !t2.name || t2.name !== e2) && !(ne(this.bindReservedNames, e2) > -1);
      } }, Ua = { distinct_id: { rules: ["string", "emptyString", "idLength"], onComplete: function(t2, r2, n2) {
        return !t2 && ("emptyString" === n2 && (r2 = "Id"), e(Ea[n2]) && Ea[n2](r2), "idLength" === n2) || t2;
      } }, event: { rules: ["string", "emptyString", "keyLength", "regexTest"], onComplete: function(t2, r2, n2) {
        return t2 || ("emptyString" === n2 && (r2 = "eventName"), e(Ea[n2]) && Ea[n2](r2)), true;
      } }, propertyKey: { rules: ["string", "emptyString", "keyLength", "regexTest"], onComplete: function(t2, r2, n2) {
        return t2 || ("emptyString" === n2 && (r2 = "Property key"), e(Ea[n2]) && Ea[n2](r2)), true;
      } }, propertyValue: { rules: ["voidZero"], onComplete: function(t2, r2, n2) {
        return t2 || (r2 = "Property Value", e(Ea[n2]) && Ea[n2](r2)), true;
      } }, properties: function(t2) {
        return r(t2) ? P(t2, function(t3, r2) {
          at({ propertyKey: r2 });
          var n2 = function(t4, n3, i2) {
            return t4 || (n3 = r2 + "'s Value", e(Ea[i2]) && Ea[i2](n3)), true;
          };
          at({ propertyValue: t3 }, n2);
        }) : La.voidZero(t2) && Te("properties可以没有，但有的话必须是对象"), true;
      }, propertiesMust: function(e2) {
        return void 0 !== e2 && r(e2) && !se(e2) ? this.properties.call(this, e2) : Te("properties必须是对象"), true;
      }, item_type: { rules: ["string", "emptyString", "keyLength", "regexTest"], onComplete: function(t2, r2, n2) {
        return t2 || ("emptyString" === n2 && (r2 = "item_type"), e(Ea[n2]) && Ea[n2](r2)), true;
      } }, item_id: { rules: ["string", "emptyString", "stringLength"], onComplete: function(t2, r2, n2) {
        return t2 || ("emptyString" === n2 && (r2 = "item_id"), e(Ea[n2]) && Ea[n2](r2)), true;
      } }, loginIdKey: { rules: ["string", "emptyString", "keyLength", "regexTest", "reservedLoginId"], onComplete: function(t2, r2, n2) {
        return !t2 && ("emptyString" === n2 && (r2 = "login_id_key"), e(Ea[n2]) && Ea[n2](r2), "keyLength" === n2) || t2;
      } }, bindKey: { rules: ["string", "emptyString", "keyLength", "regexTest", "reservedBind"], onComplete: function(t2, r2, n2) {
        return !t2 && ("emptyString" === n2 && (r2 = "Key"), e(Ea[n2]) && Ea[n2](r2), "keyLength" === n2) || t2;
      } }, unbindKey: { rules: ["string", "emptyString", "keyLength", "regexTest", "reservedUnbind"], onComplete: function(t2, r2, n2) {
        return !t2 && ("emptyString" === n2 && (r2 = "Key"), e(Ea[n2]) && Ea[n2](r2), "keyLength" === n2) || t2;
      } }, bindValue: { rules: ["string", "emptyString", "idLength"], onComplete: function(t2, r2, n2) {
        return !t2 && ("emptyString" === n2 && (r2 = "Value"), e(Ea[n2]) && Ea[n2](r2), "idLength" === n2) || t2;
      } }, check: function(t2, r2, n2) {
        var i2 = this[t2];
        if (e(i2)) return i2.call(this, r2);
        if (!i2) return false;
        for (var a2 = 0; a2 < i2.rules.length; a2++) {
          var o2 = i2.rules[a2], s2 = La[o2](r2), l2 = e(n2) ? n2(s2, r2, o2) : i2.onComplete(s2, r2, o2);
          if (!s2) return l2;
        }
        return true;
      } }, Ra = {};
      Ra.initUrl = function() {
        var e2, t2 = { server_url: { project: "", host: "" }, page_url: { host: "", pathname: "" } };
        if (!le(Xi.para.server_url)) return Ae("----vcollect---server_url必须为有效 URL 字符串"), false;
        try {
          e2 = _(Xi.para.server_url), t2.server_url.project = e2.searchParams.get("project") || "default", t2.server_url.host = e2.host;
        } catch (r2) {
          return Ae("----vcollect---server_url解析异常", r2), false;
        }
        var n2;
        try {
          n2 = _(location.href), t2.page_url.host = n2.hostname, t2.page_url.pathname = n2.pathname;
        } catch (r2) {
          return Ae("----vcollect---页面地址解析异常", r2), false;
        }
        return t2;
      }, Ra.isDiv = function(e2) {
        if (e2.element_path) {
          var t2 = e2.element_path.split(">"), r2 = f(t2.pop());
          if ("div" !== r2.slice(0, 3)) return false;
        }
        return true;
      }, Ra.configIsMatchNew = function(e2, t2) {
        if (d(e2.$element_selector) && d(t2.element_selector)) {
          if ("element_selector" === t2.element_field && "equal" === t2["function"]) return e2.$element_selector === t2.element_selector;
          if ("element_selector" === t2.element_field && "contain" === t2["function"]) return e2.$element_selector.indexOf(t2.element_selector) > -1;
        }
        if (d(e2.$element_path) && d(t2.element_path)) {
          if ("element_path" === t2.element_field && "equal" === t2["function"]) return e2.$element_path === t2.element_path;
          if ("element_path" === t2.element_field && "contain" === t2["function"]) return e2.$element_path.indexOf(t2.element_path) > -1;
        }
        return false;
      }, Ra.configIsMatch = function(e2, t2) {
        return (!t2.limit_element_content || t2.element_content === e2.$element_content) && ((!t2.limit_element_position || t2.element_position === String(e2.$element_position)) && (t2.element_field && t2["function"] ? Ra.configIsMatchNew(e2, t2) : Ra.configIsMatchOldVersion(e2, t2)));
      }, Ra.configIsMatchOldVersion = function(e2, t2) {
        if (!t2.element_path) return false;
        if (void 0 !== e2.$element_position) {
          if (t2.element_path !== e2.$element_path) return false;
        } else if (Ra.isDiv({ element_path: t2.element_path })) {
          if (e2.$element_path.indexOf(t2.element_path) < 0) return false;
        } else if (t2.element_path !== e2.$element_path) return false;
        return true;
      }, Ra.filterConfig = function(e2, t2, n2) {
        var i2 = [];
        if (!n2) {
          var a2 = Ra.initUrl();
          if (!a2) return [];
          n2 = a2.page_url;
        }
        return "$WebClick" === e2.event && P(t2, function(t3) {
          r(t3) && ("webclick" === t3.event_type || "appclick" === t3.event_type) && r(t3.event) && t3.event.url_host === n2.host && t3.event.url_path === n2.pathname && Ra.configIsMatch(e2.properties, t3.event) && i2.push(t3);
        }), i2;
      }, Ra.getPropElInLi = function(e2, t2) {
        if (!(e2 && h(e2) && d(t2))) return null;
        if ("li" !== e2.tagName.toLowerCase()) return null;
        var r2, n2 = Xi.heatmap.getDomSelector(e2);
        if (n2) {
          r2 = n2 + t2;
          var i2 = M(r2);
          return i2 ? i2 : null;
        }
        return Te("----custom---获取同级属性元素失败，selector信息异常", n2, t2), null;
      }, Ra.getProp = function(e2, t2) {
        if (!r(e2)) return false;
        if (!(d(e2.name) && e2.name.length > 0)) return Te("----vcustom----属性名不合法,属性抛弃", e2.name), false;
        var n2, i2, a2 = {};
        if ("content" === e2.method) {
          var o2;
          if (d(e2.element_selector) && e2.element_selector.length > 0) o2 = M(e2.element_selector);
          else {
            if (!t2 || !d(e2.list_selector)) return Te("----vcustom----属性配置异常，属性抛弃", e2.name), false;
            var s2 = M(t2.properties.$element_selector);
            if (!s2) return Te("----vcustom----点击元素获取异常，属性抛弃", e2.name), false;
            var l2 = Xi.heatmap.getClosestLi(s2);
            o2 = Ra.getPropElInLi(l2, e2.list_selector);
          }
          if (!o2 || !h(o2)) return Te("----vcustom----属性元素获取失败，属性抛弃", e2.name), false;
          if ("input" === o2.tagName.toLowerCase()) n2 = o2.value || "";
          else if ("select" === o2.tagName.toLowerCase()) {
            var u2 = o2.selectedIndex;
            pe(u2) && h(o2[u2]) && (n2 = Ge(o2[u2], "select"));
          } else n2 = Ge(o2, o2.tagName.toLowerCase());
          if (e2.regular) {
            try {
              i2 = new RegExp(e2.regular).exec(n2);
            } catch (c2) {
              return Te("----vcustom----正则处理失败，属性抛弃", e2.name), false;
            }
            if (null === i2) return Te("----vcustom----属性规则处理，未匹配到结果,属性抛弃", e2.name), false;
            if (!y(i2) || !d(i2[0])) return Te("----vcustom----正则处理异常，属性抛弃", e2.name, i2), false;
            n2 = i2[0];
          }
          if ("STRING" === e2.type) a2[e2.name] = n2;
          else if ("NUMBER" === e2.type) {
            if (n2.length < 1) return Te("----vcustom----未获取到数字内容，属性抛弃", e2.name, n2), false;
            if (isNaN(Number(n2))) return Te("----vcustom----数字类型属性转换失败，属性抛弃", e2.name, n2), false;
            a2[e2.name] = Number(n2);
          }
          return a2;
        }
        return Ae("----vcustom----属性不支持此获取方式", e2.name, e2.method), false;
      }, Ra.getAssignConfigs = function(e2, t2) {
        var n2 = Ra.initUrl();
        if (!n2 || !n2.page_url) return [];
        if (!r(t2)) return [];
        var i2 = [];
        return t2.events = t2.events || t2.eventList, y(t2.events) && t2.events.length > 0 ? (P(t2.events, function(t3) {
          r(t3) && r(t3.event) && t3.event.url_host === n2.page_url.host && t3.event.url_path === n2.page_url.pathname && e2(t3) && i2.push(t3);
        }), i2) : [];
      };
      var Ba = { events: [], getAssignConfigs: Ra.getAssignConfigs, filterConfig: Ra.filterConfig, getProp: Ra.getProp, initUrl: Ra.initUrl, updateEvents: function(e2) {
        y(e2) && (this.events = e2);
      }, init: function() {
        this.initAppGetPropsBridge();
      }, geth5Props: function(e2) {
        var t2 = {}, n2 = [], i2 = this;
        if (!this.events.length) return {};
        if ("$WebClick" === e2.event) {
          var a2 = this.filterConfig(e2, this.events);
          if (!a2.length) return {};
          P(a2, function(a3) {
            r(a3) && (y(a3.properties) && a3.properties.length > 0 && P(a3.properties, function(n3) {
              if (r(n3)) if (n3.h5 === false) y(t2.sensorsdata_app_visual_properties) || (t2.sensorsdata_app_visual_properties = []), t2.sensorsdata_app_visual_properties.push(n3);
              else {
                var a4 = i2.getProp(n3, e2);
                r(a4) && (t2 = C(t2, a4));
              }
            }), d(a3.event_name) && n2.push(a3.event_name));
          }), Xi.bridge.hasVisualModeBridge() && (t2.sensorsdata_web_visual_eventName = n2);
        }
        return t2.sensorsdata_app_visual_properties && (t2.sensorsdata_app_visual_properties = I(JSON.stringify(t2.sensorsdata_app_visual_properties))), t2;
      }, initAppGetPropsBridge: function() {
        var e2 = this, t2 = new Xi.SDKJSBridge("getJSVisualProperties");
        return t2.onAppNotify(function(n2) {
          var i2 = {};
          try {
            n2 = JSON.parse(N(n2));
          } catch (a2) {
            Ae("getJSVisualProperties data parse error!");
          }
          if (r(n2)) {
            var o2 = n2.sensorsdata_js_visual_properties, s2 = e2.initUrl();
            s2 && (s2 = s2.page_url, y(o2) && o2.length > 0 && P(o2, function(t3) {
              if (r(t3) && t3.url_host === s2.host && t3.url_path === s2.pathname && t3.h5) {
                var n3 = e2.getProp(t3);
                r(n3) && (i2 = C(i2, n3));
              }
            }));
          }
          var l2 = Xi.bridge.bridge_info.platform;
          return "android" === l2 && t2.notifyApp({ data: i2 }, n2.message_id), i2;
        }), t2;
      } }, Ha = { events: [], customProp: Ba, getAssignConfigs: Ra.getAssignConfigs, initUrl: Ra.initUrl, init: function() {
        if (this.initUrl()) {
          var e2 = this.getConfigFromApp();
          e2 && this.updateConfigs(e2), this.customProp.init(), this.initAppUpdateConfigBridge();
        }
      }, initAppUpdateConfigBridge: function() {
        var e2 = this;
        return new Xi.SDKJSBridge("updateH5VisualConfig").onAppNotify(function(t2) {
          if (t2) {
            try {
              t2 = JSON.parse(N(t2));
            } catch (r2) {
              return void Ae("updateH5VisualConfig result parse error！");
            }
            e2.updateConfigs(t2);
          }
        });
      }, getConfigFromApp: function() {
        var e2 = new Xi.SDKJSBridge("sensorsdata_get_app_visual_config").notifyApp();
        if (e2) try {
          e2 = JSON.parse(N(e2));
        } catch (t2) {
          e2 = null, Ae("getAppVisualConfig result parse error！");
        }
        return e2;
      }, updateConfigs: function(e2) {
        this.events = this.filterConfigs(e2), this.customProp.updateEvents(this.events);
      }, filterConfigs: function(e2) {
        return this.getAssignConfigs(function(e3) {
          return !(!r(e3) || e3.h5 === false);
        }, e2);
      } }, Ja = { events: [], init: function(e2) {
        this.filterWebClickEvents(e2);
      }, filterWebClickEvents: function(e2) {
        this.events = qa.getAssignConfigs(function(e3) {
          return !(!r(e3) || e3.event.unlimited_div !== true || "webclick" !== e3.event_type);
        }, e2);
      }, isTargetEle: function(e2) {
        var t2 = Xi.heatmap.getEleDetail(e2);
        if (!r(t2) || !d(t2.$element_path)) return false;
        for (var n2 = 0; n2 < this.events.length; n2++) if (r(this.events[n2]) && r(this.events[n2].event) && qa.configIsMatch(t2, this.events[n2].event)) return true;
        return false;
      } }, Ma = { events: [], configSwitch: false, collectAble: function() {
        return this.configSwitch && r(Xi.para.heatmap) && Xi.para.heatmap.get_vtrack_config;
      }, updateEvents: function(e2) {
        this.events = qa.getAssignConfigs(function(e3) {
          return !!(r(e3) && y(e3.properties) && e3.properties.length > 0);
        }, e2), this.events.length ? this.configSwitch = true : this.configSwitch = false;
      }, getVtrackProps: function(e2) {
        var t2 = {};
        return this.collectAble() ? ("$WebClick" === e2.event && (t2 = this.clickCustomPropMaker(e2, this.events)), t2) : {};
      }, clickCustomPropMaker: function(e2, t2, n2) {
        var i2 = this;
        n2 = n2 || this.filterConfig(e2, t2, qa.url_info.page_url);
        var a2 = {};
        return n2.length ? (P(n2, function(t3) {
          y(t3.properties) && t3.properties.length > 0 && P(t3.properties, function(t4) {
            var n3 = i2.getProp(t4, e2);
            r(n3) && C(a2, n3);
          });
        }), a2) : {};
      }, getProp: Ra.getProp, getPropElInLi: Ra.getPropElInLi, filterConfig: Ra.filterConfig }, qa = { unlimitedDiv: Ja, config: {}, storageEnable: true, storage_name: "webjssdkvtrackcollect", para: { session_time: 18e5, timeout: 5e3, update_interval: 18e5 }, url_info: {}, timer: null, update_time: null, customProp: Ma, initUrl: function() {
        var e2 = Ra.initUrl();
        if (e2) {
          var t2;
          try {
            t2 = new g(Xi.para.server_url), t2._values.Path = "/config/visualized/Web.conf", e2.api_url = t2.getUrl();
          } catch (r2) {
            return Ae("----vtrackcollect---API地址解析异常", r2), false;
          }
          this.url_info = e2;
        }
        return e2;
      }, init: function() {
        if (!r(Xi.para.heatmap) || !Xi.para.heatmap.get_vtrack_config) return false;
        if (Gi.isSupport() || (this.storageEnable = false), !this.initUrl()) return Ae("----vtrackcustom----初始化失败，url信息解析失败"), false;
        if (this.storageEnable) {
          var e2 = xa.readObjectVal(this.storage_name);
          if (r(e2) && r(e2.data)) if (this.serverUrlIsSame(e2.serverUrl)) {
            this.config = e2.data, this.update_time = e2.updateTime, this.updateConfig(e2.data);
            var t2 = (/* @__PURE__ */ new Date()).getTime(), n2 = t2 - this.update_time;
            if (pe(n2) && n2 > 0 && n2 < this.para.session_time) {
              var i2 = this.para.update_interval - n2;
              this.setNextFetch(i2);
            } else this.getConfigFromServer();
          } else this.getConfigFromServer();
          else this.getConfigFromServer();
        } else this.getConfigFromServer();
        this.pageStateListenner();
      }, serverUrlIsSame: function(e2) {
        return !!r(e2) && (e2.host === this.url_info.server_url.host && e2.project === this.url_info.server_url.project);
      }, getConfigFromServer: function() {
        var e2 = this, t2 = function(t3, n3) {
          e2.update_time = (/* @__PURE__ */ new Date()).getTime();
          var i2 = {};
          200 === t3 ? n3 && r(n3) && "Web" === n3.os && (i2 = n3, e2.updateConfig(i2)) : 205 === t3 ? e2.updateConfig(i2) : 304 === t3 ? i2 = e2.config : (Ae("----vtrackcustom----数据异常", t3), e2.updateConfig(i2)), e2.updateStorage(i2), e2.setNextFetch();
        }, n2 = function(t3) {
          e2.update_time = (/* @__PURE__ */ new Date()).getTime(), Ae("----vtrackcustom----配置拉取失败", t3), e2.setNextFetch();
        };
        this.sendRequest(t2, n2);
      }, setNextFetch: function(e2) {
        var t2 = this;
        this.timer && (clearTimeout(this.timer), this.timer = null), e2 = e2 || this.para.update_interval, this.timer = setTimeout(function() {
          t2.getConfigFromServer();
        }, e2);
      }, pageStateListenner: function() {
        var e2 = this;
        _e({ visible: function() {
          var t2 = (/* @__PURE__ */ new Date()).getTime(), r2 = t2 - e2.update_time;
          if (pe(r2) && r2 > 0 && r2 < e2.para.update_interval) {
            var n2 = e2.para.update_interval - r2;
            e2.setNextFetch(n2);
          } else e2.getConfigFromServer();
        }, hidden: function() {
          e2.timer && (clearTimeout(e2.timer), e2.timer = null);
        } });
      }, updateConfig: function(e2) {
        return !!r(e2) && (this.config = e2, this.customProp.updateEvents(e2), void this.unlimitedDiv.init(e2));
      }, updateStorage: function(e2) {
        if (!this.storageEnable) return false;
        if (!r(e2)) return false;
        var t2;
        if (this.url_info.server_url) t2 = this.url_info.server_url;
        else {
          var n2 = qa.initUrl();
          if (!n2) return false;
          t2 = n2.server_url;
        }
        var i2 = { updateTime: (/* @__PURE__ */ new Date()).getTime(), data: e2, serverUrl: t2 };
        xa.saveObjectVal(this.storage_name, i2);
      }, sendRequest: function(e2, t2) {
        var r2 = this, n2 = { app_id: this.url_info.page_url.host };
        this.config.version && (n2.v = this.config.version), ge({ url: r2.url_info.api_url, callbackName: "saJSSDKVtrackCollectConfig", data: n2, timeout: r2.para.timeout, success: function(t3, r3) {
          e2(t3, r3);
        }, error: function(e3) {
          t2(e3);
        } });
      }, getAssignConfigs: Ra.getAssignConfigs, configIsMatch: Ra.configIsMatch }, Fa = { basicProps: { priority: 0, entry: _t }, formatData: { priority: 0, entry: ft }, finalAdjustData: { priority: 0, entry: gt } }, Ka = { stage: null, init: function(e2) {
        this.stage = e2;
      }, interceptor: Fa }, Va = {};
      Va.check = at, Va.sendItem = function(e2) {
        var t2 = { lib: { $lib: "js", $lib_method: "code", $lib_version: String(Xi.lib_version) }, time: 1 * /* @__PURE__ */ new Date() };
        C(t2, e2), mt(t2), Xi.kit.sendData(t2);
      }, Va.send = function(e2, t2) {
        var r2 = Xi.kit.buildData(e2);
        Xi.kit.sendData(r2, t2);
      };
      var Wa = { stage: null, init: function(e2) {
        this.stage = e2;
      } }, za = { label: false, li: false, a: true, button: true }, Xa = { otherTags: [], initUnlimitedTags: function() {
        P(Xa.otherTags, function(e2) {
          e2 in za && (za[e2] = true);
        });
      }, isUnlimitedTag: function(e2) {
        if (!e2 || 1 !== e2.nodeType) return false;
        var t2 = e2.nodeName.toLowerCase();
        return za[t2] || ee(e2, Xi.para.heatmap.track_attr);
      }, getTargetElement: function(e2, t2) {
        var r2 = this, n2 = e2;
        if ("object" != typeof n2) return null;
        if ("string" != typeof n2.tagName) return null;
        var i2 = n2.tagName.toLowerCase();
        if ("body" === i2.toLowerCase() || "html" === i2.toLowerCase()) return null;
        if (!n2 || !n2.parentNode || !n2.parentNode.children) return null;
        var a2 = n2.parentNode, o2 = r2.otherTags;
        if ("a" === i2 || "button" === i2 || "input" === i2 || "textarea" === i2) return n2;
        if (ne(o2, i2) > -1) return n2;
        if ("area" === i2 && "map" === a2.tagName.toLowerCase() && b(a2).prev().tagName && "img" === b(a2).prev().tagName.toLowerCase()) return b(a2).prev();
        if ("div" === i2 && Xi.para.heatmap.collect_tags.div && r2.isDivLevelValid(n2)) {
          var s2 = Xi.para.heatmap && Xi.para.heatmap.collect_tags && Xi.para.heatmap.collect_tags.div && Xi.para.heatmap.collect_tags.div.max_level || 1;
          if (s2 > 1 || r2.isCollectableDiv(n2)) return n2;
        }
        if (r2.isStyleTag(i2) && Xi.para.heatmap.collect_tags.div) {
          var l2 = r2.getCollectableParent(n2);
          if (l2 && r2.isDivLevelValid(l2)) return l2;
        }
        var u2 = r2.hasElement({ event: t2 && t2.originalEvent || t2, element: e2 }, function(e3) {
          return r2.isUnlimitedTag(e3);
        });
        return u2 || null;
      }, getDivLevels: function(e2, t2) {
        var r2 = Xa.getElementPath(e2, true, t2), n2 = r2.split(" > "), i2 = 0;
        return P(n2, function(e3) {
          "div" === e3 && i2++;
        }), i2;
      }, isDivLevelValid: function(e2) {
        for (var t2 = Xi.para.heatmap && Xi.para.heatmap.collect_tags && Xi.para.heatmap.collect_tags.div && Xi.para.heatmap.collect_tags.div.max_level || 1, r2 = e2.getElementsByTagName("div"), n2 = r2.length - 1; n2 >= 0; n2--) if (Xa.getDivLevels(r2[n2], e2) > t2) return false;
        return true;
      }, getElementPath: function(e2, t2, r2) {
        for (var n2 = []; e2.parentNode && h(e2); ) {
          if (!d(e2.tagName)) return "unknown";
          if (e2.id && !t2 && /^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e2.id)) {
            n2.unshift(e2.tagName.toLowerCase() + "#" + e2.id);
            break;
          }
          if (r2 && e2 === r2) {
            n2.unshift(e2.tagName.toLowerCase());
            break;
          }
          if (e2 === document.body) {
            n2.unshift("body");
            break;
          }
          n2.unshift(e2.tagName.toLowerCase()), e2 = e2.parentNode;
        }
        return n2.join(" > ");
      }, getClosestLi: function(e2) {
        var t2 = function(e3, t3) {
          for (; e3 && e3 !== document && 1 === e3.nodeType; e3 = e3.parentNode) if (e3.tagName && d(e3.tagName) && e3.tagName.toLowerCase() === t3) return e3;
          return null;
        };
        return t2(e2, "li");
      }, getElementPosition: function(e2, t2, r2) {
        function n2(e3) {
          var t3 = e3.parentNode;
          if (!t3) return "";
          var r3 = b(e3).getSameTypeSiblings(), n3 = r3.length;
          if (1 === n3) return 0;
          for (var i3 = 0, a3 = e3; b(a3).previousElementSibling().ele; a3 = b(a3).previousElementSibling().ele, i3++) ;
          return i3;
        }
        var i2 = Xi.heatmap.getClosestLi(e2);
        if (!i2 || !h(e2) || !d(e2.tagName)) return null;
        var a2 = e2.tagName.toLowerCase(), o2 = i2.getElementsByTagName(a2), s2 = o2.length, l2 = [];
        if (s2 > 1) {
          for (var u2 = 0; u2 < s2; u2++) {
            var c2 = Xi.heatmap.getElementPath(o2[u2], r2);
            c2 === t2 && l2.push(o2[u2]);
          }
          if (l2.length > 1) return ne(l2, e2);
        }
        return n2(i2);
      }, setNotice: function(e2) {
        Xi.is_heatmap_render_mode = true, Xi.para.heatmap || (Xi.errorMsg = "您 SDK 没有配置开启点击图 ！"), e2 && "http:" === e2.slice(0, 5) && "https:" === location.protocol && (Xi.errorMsg = "您的当前页面是 https 的地址，神策分析环境也必须是 https ！"), Xi.para.heatmap_url || (Xi.para.heatmap_url = yt() + "//static.sensorsdata.cn/sdk/" + Xi.lib_version + "/heatmap.min.js");
      }, getDomIndex: function(e2) {
        if (!e2.parentNode) return -1;
        for (var t2 = 0, r2 = e2.tagName, n2 = e2.parentNode.children, i2 = 0; i2 < n2.length; i2++) if (n2[i2].tagName === r2) {
          if (e2 === n2[i2]) return t2;
          t2++;
        }
        return -1;
      }, selector: function(e2, t2) {
        if (!e2 || !h(e2) || !d(e2.tagName)) return "";
        var r2 = e2.parentNode && 9 == e2.parentNode.nodeType ? -1 : this.getDomIndex(e2);
        return e2.getAttribute && e2.getAttribute("id") && /^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e2.getAttribute("id")) && (!Xi.para.heatmap || Xi.para.heatmap && "not_use_id" !== Xi.para.heatmap.element_selector) && !t2 ? "#" + e2.getAttribute("id") : e2.tagName.toLowerCase() + (~r2 ? ":nth-of-type(" + (r2 + 1) + ")" : "");
      }, getDomSelector: function(e2, t2, r2) {
        if (!(e2 && e2.parentNode && e2.parentNode.children && d(e2.tagName))) return "unknown";
        t2 = t2 && t2.join ? t2 : [];
        var n2 = e2.nodeName.toLowerCase();
        return e2 && "body" !== n2 && 1 == e2.nodeType ? (t2.unshift(this.selector(e2, r2)), e2.getAttribute && e2.getAttribute("id") && /^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e2.getAttribute("id")) && Xi.para.heatmap && "not_use_id" !== Xi.para.heatmap.element_selector && !r2 ? t2.join(" > ") : this.getDomSelector(e2.parentNode, t2, r2)) : (t2.unshift("body"), t2.join(" > "));
      }, na: function() {
        var e2 = document.documentElement.scrollLeft || window.pageXOffset;
        return parseInt(isNaN(e2) ? 0 : e2, 10);
      }, i: function() {
        var e2 = 0;
        try {
          e2 = o.documentElement && o.documentElement.scrollTop || m.pageYOffset, e2 = isNaN(e2) ? 0 : e2;
        } catch (t2) {
          e2 = 0;
        }
        return parseInt(e2, 10);
      }, getBrowserWidth: function() {
        var e2 = window.innerWidth || document.body.clientWidth;
        return isNaN(e2) ? 0 : parseInt(e2, 10);
      }, getBrowserHeight: function() {
        var e2 = window.innerHeight || document.body.clientHeight;
        return isNaN(e2) ? 0 : parseInt(e2, 10);
      }, getScrollWidth: function() {
        var e2 = parseInt(document.body.scrollWidth, 10);
        return isNaN(e2) ? 0 : e2;
      }, getEleDetail: function(e2) {
        var t2 = this.getDomSelector(e2), r2 = Ze({ target: e2 });
        r2.$element_selector = t2 ? t2 : "", r2.$element_path = Xi.heatmap.getElementPath(e2, Xi.para.heatmap && "not_use_id" === Xi.para.heatmap.element_selector);
        var n2 = Xi.heatmap.getElementPosition(e2, r2.$element_path, Xi.para.heatmap && "not_use_id" === Xi.para.heatmap.element_selector);
        return pe(n2) && (r2.$element_position = n2), r2;
      }, getPointerEventProp: function(e2, t2) {
        function r2() {
          var e3 = document.body.scrollLeft || document.documentElement.scrollLeft || 0, t3 = document.body.scrollTop || document.documentElement.scrollTop || 0;
          return { scrollLeft: e3, scrollTop: t3 };
        }
        function n2(e3) {
          if (document.documentElement.getBoundingClientRect) {
            var t3 = e3.getBoundingClientRect();
            return { targetEleX: t3.left + r2().scrollLeft || 0, targetEleY: t3.top + r2().scrollTop || 0 };
          }
        }
        function i2(e3) {
          return Number(Number(e3).toFixed(3));
        }
        function a2(e3) {
          var a3 = e3.pageX || e3.clientX + r2().scrollLeft || e3.offsetX + n2(t2).targetEleX || 0, o2 = e3.pageY || e3.clientY + r2().scrollTop || e3.offsetY + n2(t2).targetEleY || 0;
          return { $page_x: i2(a3), $page_y: i2(o2) };
        }
        return e2 ? a2(e2) : {};
      }, start: function(t2, n2, i2, a2, o2) {
        if (r(Xi.para.heatmap) && e(Xi.para.heatmap.collect_element) && !Xi.para.heatmap.collect_element(n2)) return false;
        var s2 = Xa.getBasicEleInfo(t2, n2, i2, a2, o2);
        bt(s2);
      }, getBasicEleInfo: function(t2, n2, i2, a2, o2) {
        var s2 = r(a2) ? a2 : {}, l2 = e(o2) ? o2 : e(a2) ? a2 : void 0, u2 = this.getEleDetail(n2);
        if (Xi.para.heatmap && Xi.para.heatmap.custom_property) {
          var c2 = Xi.para.heatmap.custom_property(n2);
          r(c2) && (u2 = C(u2, c2));
        }
        return u2 = C(u2, this.getPointerEventProp(t2, n2), s2), { event: t2, target: n2, props: u2, tagName: i2, callback: l2 };
      }, hasElement: function(e2, t2) {
        var r2;
        if (e2.event) {
          var n2 = e2.event;
          r2 = n2.path || n2._getPath && n2._getPath();
        } else e2.element && (r2 = b(e2.element).getParents());
        if (r2 && y(r2) && r2.length > 0) {
          for (var i2 = 0; i2 < r2.length; i2++) if ("object" == typeof r2[i2] && 1 === r2[i2].nodeType && t2(r2[i2])) return r2[i2];
        }
      }, isStyleTag: function(e2, t2) {
        var n2 = ["a", "div", "input", "button", "textarea"], i2 = ["mark", "/mark", "strong", "b", "em", "i", "u", "abbr", "ins", "del", "s", "sup"];
        return !(ne(n2, e2) > -1) && (!t2 || Xi.para.heatmap && Xi.para.heatmap.collect_tags && Xi.para.heatmap.collect_tags.div ? !!(r(Xi.para.heatmap) && r(Xi.para.heatmap.collect_tags) && r(Xi.para.heatmap.collect_tags.div) && y(Xi.para.heatmap.collect_tags.div.ignore_tags) && ne(Xi.para.heatmap.collect_tags.div.ignore_tags, e2) > -1) : ne(i2, e2) > -1);
      }, isCollectableDiv: function(e2, t2) {
        try {
          if (0 === e2.children.length) return true;
          for (var r2 = 0; r2 < e2.children.length; r2++) if (1 === e2.children[r2].nodeType) {
            var n2 = d(e2.children[r2].tagName) ? e2.children[r2].tagName.toLowerCase() : "unknown", i2 = Xi.para && Xi.para.heatmap && Xi.para.heatmap.collect_tags && Xi.para.heatmap.collect_tags.div && Xi.para.heatmap.collect_tags.div.max_level;
            if (!("div" === n2 && i2 > 1 || this.isStyleTag(n2, t2))) return false;
            if (!this.isCollectableDiv(e2.children[r2], t2)) return false;
          }
          return true;
        } catch (a2) {
          Ae("isCollectableDiv:" + a2);
        }
        return false;
      }, getCollectableParent: function(e2, t2) {
        try {
          var r2 = e2.parentNode, n2 = r2 ? r2.tagName.toLowerCase() : "";
          if ("body" === n2) return false;
          var i2 = Xi.para && Xi.para.heatmap && Xi.para.heatmap.collect_tags && Xi.para.heatmap.collect_tags.div && Xi.para.heatmap.collect_tags.div.max_level;
          if (n2 && "div" === n2 && (i2 > 1 || this.isCollectableDiv(r2, t2))) return r2;
          if (r2 && this.isStyleTag(n2, t2)) return this.getCollectableParent(r2, t2);
        } catch (a2) {
          Ae("getCollectableParent:" + a2);
        }
        return false;
      }, listenUrlChange: function(e2) {
        e2(), Xi.ee.spa.on("switch", function() {
          e2();
        });
      }, initScrollmap: function() {
        if (!r(Xi.para.heatmap) || "default" !== Xi.para.heatmap.scroll_notice_map) return false;
        var t2 = true;
        Xi.para.scrollmap && e(Xi.para.scrollmap.collect_url) && this.listenUrlChange(function() {
          t2 = !!Xi.para.scrollmap.collect_url();
        });
        var n2 = function(e2) {
          var t3 = {};
          return t3.timeout = e2.timeout || 1e3, t3.func = e2.func, t3.hasInit = false, t3.inter = null, t3.main = function(e3, t4) {
            this.func(e3, t4), this.inter = null;
          }, t3.go = function(e3) {
            var r2 = {};
            this.inter || (r2.$viewport_position = document.documentElement && document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop || 0, r2.$viewport_position = Math.round(r2.$viewport_position) || 0, e3 ? t3.main(r2, true) : this.inter = setTimeout(function() {
              t3.main(r2);
            }, this.timeout));
          }, t3;
        }, i2 = n2({ timeout: 1e3, func: function(e2, t3) {
          var r2 = document.documentElement && document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop || 0, n3 = /* @__PURE__ */ new Date(), i3 = n3 - this.current_time;
          (i3 > Xi.para.heatmap.scroll_delay_time && r2 - e2.$viewport_position !== 0 || t3) && (e2.$url = Y(), e2.$title = document.title, e2.$url_path = G(), e2.event_duration = Math.min(Xi.para.heatmap.scroll_event_duration, parseInt(i3) / 1e3), e2.event_duration = e2.event_duration < 0 ? 0 : e2.event_duration, wt(e2)), this.current_time = n3;
        } });
        i2.current_time = /* @__PURE__ */ new Date(), Ee(window, "scroll", function() {
          return !!t2 && void i2.go();
        }), Ee(window, "beforeunload", function() {
          return !!t2 && void i2.go("notime");
        });
      }, initHeatmap: function() {
        var t2 = this, n2 = true;
        return !(!r(Xi.para.heatmap) || "default" !== Xi.para.heatmap.clickmap) && (e(Xi.para.heatmap.collect_url) && this.listenUrlChange(function() {
          n2 = !!Xi.para.heatmap.collect_url();
        }), "all" === Xi.para.heatmap.collect_elements ? Xi.para.heatmap.collect_elements = "all" : Xi.para.heatmap.collect_elements = "interact", void ("all" === Xi.para.heatmap.collect_elements ? Ee(document, "click", function(e2) {
          if (!n2) return false;
          var r2 = e2 || window.event;
          if (!r2) return false;
          var i2 = r2.target || r2.srcElement;
          if ("object" != typeof i2) return false;
          if ("string" != typeof i2.tagName) return false;
          var a2 = i2.tagName.toLowerCase();
          if ("body" === a2 || "html" === a2) return false;
          if (!i2 || !i2.parentNode || !i2.parentNode.children) return false;
          var o2 = d(i2.parentNode.tagName) ? i2.parentNode.tagName.toLowerCase() : "unknown";
          "a" === o2 || "button" === o2 ? t2.start(r2, i2.parentNode, o2) : t2.start(r2, i2, a2);
        }) : Ee(document, "click", function(e2) {
          if (!n2) return false;
          var i2 = e2 || window.event;
          if (!i2) return false;
          var a2 = i2.target || i2.srcElement, o2 = Xi.heatmap.getTargetElement(a2, e2);
          return !(!h(o2) && !d(a2.tagName)) && void (h(o2) && d(o2.tagName) ? t2.start(i2, o2, o2.tagName.toLowerCase()) : h(a2) && "div" === a2.tagName.toLowerCase() && r(Xi.para.heatmap) && Xi.para.heatmap.get_vtrack_config && Ja.events.length > 0 && Ja.isTargetEle(a2) && t2.start(i2, a2, a2.tagName.toLowerCase(), { $lib_method: "vtrack" }));
        })));
      } }, Za = { autoTrackIsUsed: false, isReady: function(t2) {
        return e(t2) ? void t2() : void Xi.log("error: isReady callback must be function");
      }, getUtm: function() {
        return Pa.campaignParams();
      }, getStayTime: function() {
        return (/* @__PURE__ */ new Date() - Xi._t) / 1e3;
      }, setProfileLocal: function(e2) {
        if (!Gi.isSupport()) return Xi.setProfile(e2), false;
        if (!r(e2) || se(e2)) return false;
        var t2 = xa.readObjectVal("sensorsdata_2015_jssdk_profile"), n2 = false;
        if (r(t2) && !se(t2)) {
          for (var i2 in e2) !(i2 in t2 && t2[i2] !== e2[i2]) && i2 in t2 || (t2[i2] = e2[i2], n2 = true);
          n2 && (xa.saveObjectVal("sensorsdata_2015_jssdk_profile", t2), Xi.setProfile(e2));
        } else xa.saveObjectVal("sensorsdata_2015_jssdk_profile", e2), Xi.setProfile(e2);
      }, setInitReferrer: function() {
        var e2 = Be();
        Xi.setOnceProfile({ _init_referrer: e2, _init_referrer_host: Pa.pageProp.referrer_host });
      }, setSessionReferrer: function() {
        var e2 = Be();
        xa.setSessionPropsOnce({ _session_referrer: e2, _session_referrer_host: Pa.pageProp.referrer_host });
      }, setDefaultAttr: function() {
        Pa.register({ _current_url: location.href, _referrer: Be(), _referring_host: Pa.pageProp.referrer_host });
      }, trackHeatMap: function(e2, t2, r2) {
        if ("object" == typeof e2 && e2.tagName && h(e2.parentNode)) {
          var n2 = e2.tagName.toLowerCase(), i2 = e2.parentNode.tagName.toLowerCase(), a2 = Xi.para.heatmap && Xi.para.heatmap.track_attr ? Xi.para.heatmap.track_attr : ["data-sensors-click"];
          "button" === n2 || "a" === n2 || "a" === i2 || "button" === i2 || "input" === n2 || "textarea" === n2 || ee(e2, a2) || Xa.start(null, e2, n2, t2, r2);
        }
      }, trackAllHeatMap: function(e2, t2, r2) {
        if ("object" == typeof e2 && e2.tagName) {
          var n2 = e2.tagName.toLowerCase();
          Xa.start(null, e2, n2, t2, r2);
        }
      }, autoTrackSinglePage: function(e2, t2) {
        function n2(e3, t3) {
          Xi.track("$pageview", C({ $referrer: i2, $url: Y(), $url_path: G(), $title: document.title }, e3, St()), t3), i2 = Y();
        }
        var i2;
        i2 = this.autoTrackIsUsed ? Pa.pageProp.url : Pa.pageProp.referrer, e2 = r(e2) ? e2 : {};
        var a2 = !e2.not_set_profile;
        e2.not_set_profile && delete e2.not_set_profile, n2(e2, t2), this.autoTrackSinglePage = n2, kt(Xi.setOnceProfile, false, a2);
      }, autoTrackWithoutProfile: function(e2, t2) {
        e2 = r(e2) ? e2 : {}, this.autoTrack(C(e2, { not_set_profile: true }), t2);
      }, autoTrack: function(e2, t2) {
        e2 = r(e2) ? e2 : {};
        var n2 = St(), i2 = !e2.not_set_profile;
        e2.not_set_profile && delete e2.not_set_profile;
        var a2 = location.href;
        Xi.para.is_single_page && S(function() {
          var r2 = Be(a2, true);
          Xi.track("$pageview", C({ $referrer: r2, $url: Y(), $url_path: G(), $title: document.title }, n2, e2), t2), a2 = Y();
        }), Xi.track("$pageview", C({ $referrer: Be(null, true), $url: Y(), $url_path: G(), $title: document.title }, n2, e2), t2), kt(Xi.setOnceProfile, true, i2), this.autoTrackIsUsed = true;
      }, getAnonymousID: function() {
        return se(xa._state) ? "SDK is not initialized." : xa.getAnonymousId();
      }, setPlugin: function(t2) {
        return !!r(t2) && void P(t2, function(t3, n2) {
          e(t3) && (r(window.SensorsDataWebJSSDKPlugin) && window.SensorsDataWebJSSDKPlugin[n2] ? t3(window.SensorsDataWebJSSDKPlugin[n2]) : r(Xi.modules) && Xi.modules[n2] ? t3(Xi.modules[n2]) : Te(n2 + "is not found,please check sensorsdata documents."));
        });
      }, useModulePlugin: function() {
        Xi.use.apply(Xi, arguments);
      }, useAppPlugin: function() {
        this.setPlugin.apply(this, arguments);
      } }, Ya = { state: 0, historyState: [], stateType: { 1: "1-init未开始", 2: "2-init开始", 3: "3-store完成" }, getState: function() {
        return this.historyState.join("\n");
      }, setState: function(e2) {
        String(e2) in this.stateType && (this.state = e2), this.historyState.push(this.stateType[e2]);
      } }, Ga = 1, Qa = { __proto__: null, setInitVar: jt, initPara: Nt, quick: It, use: Tt, track: At, bind: Dt, unbind: $t, trackLink: xt, trackLinks: Et, setItem: Lt, deleteItem: Ut, setProfile: Rt, setOnceProfile: Bt, appendProfile: Ht, incrementProfile: Jt, deleteProfile: Mt, unsetProfile: qt, identify: Ft, resetAnonymousIdentity: Kt, trackSignup: Wt, registerPage: zt, clearAllRegister: Xt, clearPageRegister: Zt, register: Yt, registerOnce: Gt, registerSession: Qt, registerSessionOnce: er, login: tr, loginWithKey: rr, logout: nr, getPresetProperties: ir, readyState: Ya, debug: ka, on: nt, log: Ie };
      Yi.setup(Ie);
      var eo = C({}, ua, Da), to = { bridge_info: { touch_app_bridge: false, verify_success: false, platform: "", support_two_way_call: false }, is_verify_success: false, initPara: function() {
        var e2 = { is_send: Xi.para.use_app_track_is_send !== false && "only" !== Xi.para.use_app_track, white_list: [], is_mui: "mui" === Xi.para.use_app_track };
        "object" == typeof Xi.para.app_js_bridge ? Xi.para.app_js_bridge = C({}, e2, Xi.para.app_js_bridge) : Xi.para.use_app_track !== true && Xi.para.app_js_bridge !== true && "only" !== Xi.para.use_app_track && "mui" !== Xi.para.use_app_track || (Xi.para.app_js_bridge = C({}, e2)), Xi.para.app_js_bridge.is_send === false && Te("设置了 is_send:false,如果打通失败，数据将被丢弃!");
      }, app_js_bridge_v1: function() {
        function e2(e3) {
          n2 = e3, ce(n2) && (n2 = JSON.parse(n2)), i2 && (i2(n2), i2 = null, n2 = null);
        }
        function t2() {
          "object" == typeof window.SensorsData_APP_JS_Bridge && window.SensorsData_APP_JS_Bridge.sensorsdata_call_app && (n2 = window.SensorsData_APP_JS_Bridge.sensorsdata_call_app(), ce(n2) && (n2 = JSON.parse(n2)));
        }
        function r2() {
          if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
            var e3 = document.createElement("iframe");
            e3.setAttribute("src", "sensorsanalytics://getAppInfo"), document.documentElement.appendChild(e3), e3.parentNode.removeChild(e3), e3 = null;
          }
        }
        var n2 = null, i2 = null;
        window.sensorsdata_app_js_bridge_call_js = function(t3) {
          e2(t3);
        }, Xi.getAppStatus = function(e3) {
          return r2(), t2(), e3 ? void (null === n2 ? i2 = e3 : (e3(n2), n2 = null)) : n2;
        };
      }, hasVisualModeBridge: function() {
        var e2 = window.SensorsData_App_Visual_Bridge, t2 = "sensorsdata_visualized_mode";
        return r(e2) && e2[t2] && (e2[t2] === true || e2[t2]());
      }, validateAppUrl: lr };
      or.prototype.call = function(e2, t2) {
        var r2 = this, i2 = (/* @__PURE__ */ new Date()).getTime().toString(16) + String(n()).replace(".", "").slice(1, 8);
        this.resultCbs[i2] = r2.resultCbs[i2] || { result: null, callbacks: [] }, this.timeoutCbs[i2] = r2.timeoutCbs[i2] || { isTimeout: false, callbacks: [] }, e2 = e2.data ? e2 : { data: e2 }, e2.data.message_id = i2;
        var a2 = C({ callType: this.type }, e2);
        return t2 && (this.timerId = setTimeout(function() {
          r2.timeoutCbs[i2].isTimeout = true;
          for (var e3 in r2.timeoutCbs[i2].callbacks) r2.timeoutCbs[i2].callbacks[e3].call(null), r2.timeoutCbs[i2].callbacks.splice(e3, 1);
        }, t2)), sr(a2), { onResult: function(e3) {
          return r2.resultCbs[i2].result ? (e3(r2.resultCbs[i2].result), this) : (!r2.timeoutCbs[i2].isTimeout && r2.resultCbs[i2].callbacks.push(e3), this);
        }, onTimeout: function(e3) {
          return r2.timeoutCbs[i2].isTimeout ? (e3(), this) : (!r2.resultCbs[i2].result && r2.timeoutCbs[i2].callbacks.push(e3), this);
        } };
      }, or.prototype.onAppNotify = function(e2) {
        this.appCallJsCallback = e2;
      }, or.prototype.notifyApp = function(e2, t2) {
        var r2 = C({ callType: this.type }, e2);
        return t2 && (r2.message_id = t2), sr(r2);
      }, ur.prototype = { "double": function() {
      }, getAppData: function() {
      }, hasAppBridge: function() {
        return Xi.bridge.bridge_info.support_two_way_call;
      }, init: function() {
      }, jsCallApp: function() {
      }, requestToApp: function(t2) {
        this.bridge.call(t2, t2.timeout.time).onResult(function(r2) {
          e(t2.callback) && t2.callback(r2);
        }).onTimeout(function() {
          e(t2.timeout.callback) && t2.timeout.callback();
        });
      } };
      var ro = { isSeachHasKeyword: function() {
        return "" !== V(location.href, "sa-request-id") && ("string" == typeof sessionStorage.getItem("sensors-visual-mode") && sessionStorage.removeItem("sensors-visual-mode"), true);
      }, hasKeywordHandle: function() {
        var e2 = location.href, t2 = V(e2, "sa-request-id") || null, r2 = V(e2, "sa-request-type") || null, n2 = V(e2, "sa-request-url") || null;
        if (Xa.setNotice(n2), aa.isSupport()) if (null !== n2 && sessionStorage.setItem("sensors_heatmap_url", n2), sessionStorage.setItem("sensors_heatmap_id", t2), null !== r2) "1" === r2 || "2" === r2 || "3" === r2 ? sessionStorage.setItem("sensors_heatmap_type", r2) : r2 = null;
        else {
          var i2 = sessionStorage.getItem("sensors_heatmap_type");
          r2 = null !== i2 ? i2 : null;
        }
        this.isReady(t2, r2);
      }, isReady: function(e2, t2, r2) {
        Xi.para.heatmap_url && Xi.para.heatmap ? he({ success: function() {
          setTimeout(function() {
            "undefined" != typeof sa_jssdk_heatmap_render && (sa_jssdk_heatmap_render(Xi, e2, t2, r2), "object" == typeof console && "function" == typeof console.log && (Xi.heatmap_version && Xi.heatmap_version === Xi.lib_version || Te("heatmap.js与sensorsdata.js版本号不一致，可能存在风险!")));
          }, 0);
        }, error: function() {
        }, type: "js", url: Xi.para.heatmap_url }) : Te("没有配置 heatmap 开启点击图，或者没有指定 heatmap_url 的路径");
      }, isStorageHasKeyword: function() {
        return aa.isSupport() && "string" == typeof sessionStorage.getItem("sensors_heatmap_id");
      }, storageHasKeywordHandle: function() {
        Xa.setNotice(), ro.isReady(sessionStorage.getItem("sensors_heatmap_id"), sessionStorage.getItem("sensors_heatmap_type"), location.href);
      }, isWindowNameHasKeyword: function() {
        try {
          var e2 = JSON.parse(window.name), t2 = d(e2["sa-heatmap-src"]) ? u(e2["sa-heatmap-src"]) : null;
          return e2["sa-request-id"] && d(e2["sa-request-id"]) && t2 === location.href;
        } catch (r2) {
          return false;
        }
      }, windowNameHasKeywordHandle: function() {
        function e2(e3) {
          var r3 = t2[e3];
          return d(r3) ? u(r3) : null;
        }
        var t2 = JSON.parse(window.name), r2 = e2("sa-request-id"), n2 = e2("sa-request-type"), i2 = e2("sa-request-url"), a2 = e2("sa-request-language");
        Xa.setNotice(i2), Gi.isSupport() && d(a2) && Gi.set("web_sdk_heatmap_language", a2), aa.isSupport() && (null !== i2 && sessionStorage.setItem("sensors_heatmap_url", i2), sessionStorage.setItem("sensors_heatmap_id", r2), null !== n2 ? "1" === n2 || "2" === n2 || "3" === n2 ? sessionStorage.setItem("sensors_heatmap_type", n2) : n2 = null : n2 = null !== sessionStorage.getItem("sensors_heatmap_type") ? sessionStorage.getItem("sensors_heatmap_type") : null), ro.isReady(r2, n2);
      } }, no = { isStorageHasKeyword: function() {
        return aa.isSupport() && "string" == typeof sessionStorage.getItem("sensors-visual-mode");
      }, isSearchHasKeyword: function() {
        return (pr("sa-visual-mode") === true || "true" === pr("sa-visual-mode")) && ("string" == typeof sessionStorage.getItem("sensors_heatmap_id") && sessionStorage.removeItem("sensors_heatmap_id"), true);
      }, loadVtrack: function() {
        he({ success: function() {
        }, error: function() {
        }, type: "js", url: Xi.para.vtrack_url ? Xi.para.vtrack_url : yt() + "//static.sensorsdata.cn/sdk/" + Xi.lib_version + "/vtrack.min.js" });
      }, messageListener: function(e2) {
        if (!e2 || !e2.data || "sa-fe" !== e2.data.source) return false;
        if ("v-track-mode" === e2.data.type) {
          if (e2.data.data && e2.data.data.isVtrack) if (aa.isSupport() && sessionStorage.setItem("sensors-visual-mode", "true"), e2.data.data.userURL && location.href.match(/sa-visual-mode=true/)) {
            var t2 = e2.data.data.userURL;
            d(t2) && (je(t2, "http://") || je(t2, "https://")) && (window.location.href = encodeURI(t2));
          } else no.loadVtrack();
          window.removeEventListener("message", no.messageListener, false);
        }
      }, removeMessageHandle: function() {
        window.removeEventListener && window.removeEventListener("message", no.messageListener, false);
      }, verifyVtrackMode: function() {
        window.addEventListener && window.addEventListener("message", no.messageListener, false), no.postMessage();
      }, postMessage: function() {
        try {
          window.parent && window.parent.postMessage && window.parent.postMessage({ source: "sa-web-sdk", type: "v-is-vtrack", data: { sdkversion: _a } }, "*");
        } catch (e2) {
          Ae("浏览器版本过低，不支持 postMessage API");
        }
      }, notifyUser: function() {
        var e2 = function(t2) {
          return !(!t2 || !t2.data || "sa-fe" !== t2.data.source) && void ("v-track-mode" === t2.data.type && (t2.data.data && t2.data.data.isVtrack && alert("当前版本不支持，请升级部署神策数据治理"), window.removeEventListener("message", e2, false)));
        };
        window.addEventListener && window.addEventListener("message", e2, false), no.postMessage();
      } }, io = ["setItem", "deleteItem", "getAppStatus", "track", "quick", "register", "registerPage", "registerOnce", "trackSignup", "setProfile", "setOnceProfile", "appendProfile", "incrementProfile", "deleteProfile", "unsetProfile", "identify", "resetAnonymousIdentity", "login", "logout", "trackLink", "clearAllRegister", "clearPageRegister", "bind", "unbind", "loginWithKey"], ao = { track: function(e2, t2, r2) {
      }, quick: function(e2, t2, r2, n2) {
      }, register: function(e2) {
      }, registerPage: function(e2) {
      }, registerOnce: function(e2) {
      }, clearAllRegister: function(e2) {
      }, trackSignup: function(e2, t2, r2, n2) {
      }, setProfile: function(e2, t2) {
      }, setOnceProfile: function(e2, t2) {
      }, appendProfile: function(e2, t2) {
      }, incrementProfile: function(e2, t2) {
      }, deleteProfile: function(e2) {
      }, unsetProfile: function(e2, t2) {
      }, identify: function(e2, t2) {
      }, resetAnonymousIdentity: function(e2) {
      }, login: function(e2, t2) {
      }, logout: function(e2) {
      }, trackLink: function(e2, t2, r2) {
      }, deleteItem: function(e2, t2) {
      }, setItem: function(e2, t2, r2) {
      }, getAppStatus: function(e2) {
      }, clearPageRegister: function(e2) {
      } };
      wr.prototype.process = function(e2, t2) {
        if (!(e2 && e2 in this.processDef)) return void Ae("process [" + e2 + "] is not supported");
        var r2 = this.registeredInterceptors[e2];
        if (r2 && y(r2) && r2.length > 0) for (var n2 = { current: 0, total: r2.length }, i2 = new br(t2, n2, Xi), a2 = 0; a2 < r2.length; a2++) try {
          if (n2.current = a2 + 1, t2 = r2[a2].call(null, t2, i2) || t2, i2.cancellationToken.getCanceled()) break;
          if (i2.cancellationToken.getStopped()) return;
        } catch (o2) {
          Ae("interceptor error:" + o2);
        }
        return this.processDef[e2] && this.processDef[e2] in this.processDef && (t2 = this.process(this.processDef[e2], t2)), t2;
      }, wr.prototype.registerStageImplementation = function(t2) {
        t2 && t2.init && e(t2.init) && (t2.init(this), t2.interceptor && this.registerInterceptor(t2.interceptor));
      }, wr.prototype.registerInterceptor = function(t2) {
        if (t2) for (var n2 in t2) {
          var i2 = t2[n2];
          if (i2 && r(i2) && e(i2.entry)) {
            pe(i2.priority) || (i2.priority = Number.MAX_VALUE), this.registeredInterceptors[n2] || (this.registeredInterceptors[n2] = []);
            var a2 = this.registeredInterceptors[n2];
            i2.entry.priority = i2.priority, a2.push(i2.entry), a2.sort(function(e2, t3) {
              return e2.priority - t3.priority;
            });
          }
        }
      };
      var oo = { basicProps: "extendProps", extendProps: "formatData", formatData: "finalAdjustData", finalAdjustData: null }, so = new wr(oo), lo = { send: null }, uo = new wr(lo), co = { getUtmData: null, callSchema: null }, po = new wr(co), fo = { webClickEvent: null, webStayEvent: null }, go = new wr(fo), _o = { buildDataStage: function(e2) {
        e2 && so.registerInterceptor(e2);
      }, businessStage: function(e2) {
        e2 && po.registerInterceptor(e2);
      }, sendDataStage: function(e2) {
        e2 && uo.registerInterceptor(e2);
      }, viewStage: function(e2) {
        e2 && go.registerInterceptor(e2);
      } }, ho = { stage: null, init: function(e2) {
        this.stage = e2;
      } }, mo = { stage: null, init: function(e2) {
        this.stage = e2;
      }, interceptor: { send: { entry: function(e2) {
        return e2;
      } } } }, vo = {};
      vo.buildData = function(e2) {
        return ht(e2);
      }, vo.sendData = function(e2, t2) {
        var r2 = Ve(e2.properties), n2 = { origin_data: e2, server_url: Xi.para.server_url, data: e2, config: r2 || {}, callback: t2 };
        Cr(n2), Xi.log(e2);
      }, vo.encodeTrackData = function(e2) {
        return tt(e2);
      }, vo.getUtmData = function() {
        return Pr();
      };
      var yo = { webClickEvent: { entry: function(e2, t2) {
        var r2 = t2.sensors;
        "a" === e2.tagName && r2.para.heatmap && r2.para.heatmap.isTrackLink === true ? r2.trackLink({ event: e2.event, target: e2.target }, "$WebClick", e2.props) : r2.track("$WebClick", e2.props, e2.callback);
      } }, webStayEvent: { entry: function(e2, t2) {
        var r2 = t2.sensors;
        r2.track("$WebStay", e2);
      } } }, bo = window.sensors_data_pre_config, wo = !!eo.isObject(bo) && bo.is_compliance_enabled;
      Xi.init = function(e2) {
        return Ca.sdk.emit("beforeInit"), !(Xi.readyState && Xi.readyState.state && Xi.readyState.state >= 2) && (wo && (Ir(true), vr()), Ca.initSystemEvent(), Xi.setInitVar(), Xi.readyState.setState(2), Xi.initPara(e2), Ca.sdk.emit("initPara"), Ca.sdk.emit("afterInitPara"), Ca.sdk.emit("initAPI"), Ca.sdk.emit("afterInitAPI"), Xi.detectMode(), ar(), Ca.sdk.emit("afterInit"), void Ca.sdk.emit("ready"));
      }, wo ? Ir(false) : (Ir(true), vr());
      var So, ko, Po, Co, Oo, jo, No, Io, To, Ao, Do, $o, xo, Eo, Lo, Uo, Ro, Bo, Ho = "1.27.3", Jo = { init: function(e2) {
        var t2 = e2._.isString, r2 = e2._.rot13defs, n2 = e2._.dfmapping, i2 = "data:enc;", a2 = "dfm-enc-";
        e2.ee.sdk.on("afterInitPara", function() {
          e2.kit.userEncrypt = function(e3) {
            return a2 + n2(e3);
          }, e2.kit.userDecrypt = function(e3) {
            return 0 === e3.indexOf(i2) ? (e3 = e3.substring(i2.length), e3 = r2(e3)) : 0 === e3.indexOf(a2) && (e3 = e3.substring(a2.length), e3 = n2(e3)), e3;
          }, e2.kit.userDecryptIfNeeded = function(r3) {
            return !t2(r3) || 0 !== r3.indexOf(i2) && 0 !== r3.indexOf(a2) || (r3 = e2.kit.userDecrypt(r3)), r3;
          };
        });
      }, plugin_name: "UserEncryptDefault" }, Mo = Dr(Jo), qo = "1.27.3", Fo = { sd: null, init: function(e2) {
        if (this.sd) return false;
        if (this.sd = e2, !this.sd || !this.sd._) return false;
        var t2 = this.sd._.cookie.get("sensors_amp_id"), r2 = this.sd.store._state.distinct_id;
        if (t2 && t2.length > 0) {
          var n2 = "amp-" === t2.slice(0, 4);
          if (t2 !== r2) {
            if (!n2) return false;
            this.sd.store._state.first_id ? (this.sd.identify(t2, true), this.sd.saEvent.send({ original_id: t2, distinct_id: r2, type: "track_signup", event: "$SignUp", properties: {} }, null), this.setAmpId(r2)) : this.sd.identify(t2, true);
          }
        } else this.setAmpId(r2);
        this.addListener();
      }, addListener: function() {
        var e2 = this;
        this.sd.events.on("changeDistinctId", function(t2) {
          e2.setAmpId(t2);
        }), this.sd.events.isReady();
      }, setAmpId: function(e2) {
        this.sd._.cookie.set("sensors_amp_id", e2);
      } }, Ko = Er(Fo, "Amp", "sdkReady"), Vo = window.SensorsData_App_Visual_Bridge, Wo = Vo && Vo.sensorsdata_visualized_mode, zo = Vo && Vo.sensorsdata_visualized_alert_info, Xo = Vo && Vo.sensorsdata_hover_web_nodes, Zo = { isVerify: function() {
        return Wo && (Wo === true || Wo.call(Vo));
      }, commands: { app_alert: Lr, visualized_track: Ur, page_info: Ur, sensorsdata_get_app_visual_config: Rr } }, Yo = "1.27.3", Go = { init: function(e2) {
        Co = e2, Oo = Co && Co._, jo = Co && Co.log || console && console.log || function() {
        }, Mr();
      }, handleCommand: Fr }, Qo = Jr(Go, "AndroidBridge", "sdkAfterInitPara"), es = window.SensorsData_App_Visual_Bridge, ts = es && es.sensorsdata_visualized_mode, rs = es && es.sensorsdata_visualized_alert_info, ns = es && es.sensorsdata_hover_web_nodes, is = { isVerify: function() {
        return ts && (ts === true || ts.call(es));
      }, commands: { app_alert: Kr, visualized_track: Vr, page_info: Vr, sensorsdata_get_app_visual_config: Wr } }, as = "1.27.3", os = { init: function(e2) {
        Do = e2, $o = Do && Do._, xo = Do && Do.log || console && console.log || function() {
        }, Yr();
      }, handleCommand: Qr }, ss = Zr(os, "AndroidObsoleteBridge", "sdkAfterInitPara"), ls = "1.27.3", us = { event_list: [], latest_event_initial_time: null, max_save_time: 2592e6, init: function(e2, t2) {
        function r2() {
          return Eo = Lo._, Uo = Lo.store, !!Eo.localStorage.isSupport() && (Lo.para.max_string_length = 1024, n2.eventList.init(), n2.addLatestChannelUrl(), void n2.addIsChannelCallbackEvent());
        }
        if (Lo || !e2) return false;
        t2 = t2 || {}, Ro = t2.cookie_name || "sensorsdata2015jssdkchannel", Lo = e2;
        var n2 = this;
        r2();
      }, addIsChannelCallbackEvent: function() {
        Lo.registerPage({ $is_channel_callback_event: function(e2) {
          if (Eo.isObject(e2) && e2.event && "$WebClick" !== e2.event && "$pageview" !== e2.event && "$WebStay" !== e2.event && "$SignUp" !== e2.event) return !us.eventList.hasEvent(e2.event) && (us.eventList.add(e2.event), true);
        } });
      }, addLatestChannelUrl: function() {
        var e2 = this.getUrlDomain(), t2 = this.cookie.getChannel();
        if ("url解析失败" === e2) this.registerAndSave({ _sa_channel_landing_url: "", _sa_channel_landing_url_error: "url的domain解析失败" });
        else if (Eo.isReferralTraffic(document.referrer)) {
          var r2 = Eo.getQueryParam(location.href, "sat_cf");
          Eo.isString(r2) && r2.length > 0 ? (this.registerAndSave({ _sa_channel_landing_url: location.href }), us.channelLinkHandler()) : this.registerAndSave({ _sa_channel_landing_url: "" });
        } else t2 ? Lo.registerPage(t2) : Lo.registerPage({ _sa_channel_landing_url: "", _sa_channel_landing_url_error: "取值异常" });
      }, registerAndSave: function(e2) {
        Lo.registerPage(e2), this.cookie.saveChannel(e2);
      }, cookie: { getChannel: function() {
        var e2 = Lo.kit.userDecryptIfNeeded(Eo.cookie.get(Ro));
        return e2 = Eo.safeJSONParse(e2), !(!Eo.isObject(e2) || !e2.prop) && e2.prop;
      }, saveChannel: function(e2) {
        var t2 = { prop: e2 }, r2 = JSON.stringify(t2);
        Lo.para.encrypt_cookie && (r2 = Lo.kit.userEncrypt(r2)), Eo.cookie.set(Ro, r2);
      } }, channelLinkHandler: function() {
        this.eventList.reset(), Lo.track("$ChannelLinkReaching");
      }, getUrlDomain: function() {
        var e2 = Eo.info.pageProp.url_domain;
        return "" === e2 && (e2 = "url解析失败"), e2;
      }, eventList: { init: function() {
        var e2 = this.get(), t2 = (/* @__PURE__ */ new Date()).getTime();
        if (e2 && Eo.isNumber(e2.latest_event_initial_time) && Eo.isArray(e2.eventList)) {
          var r2 = t2 - e2.latest_event_initial_time;
          r2 > 0 && r2 < us.max_save_time ? (us.event_list = e2.eventList, us.latest_event_initial_time = e2.latest_event_initial_time) : this.reset();
        } else this.reset();
      }, get: function() {
        var e2 = {};
        try {
          e2 = Uo.readObjectVal("sawebjssdkchannel");
        } catch (t2) {
          Lo.log(t2);
        }
        return e2;
      }, add: function(e2) {
        us.event_list.push(e2), this.save();
      }, save: function() {
        var e2 = { latest_event_initial_time: us.latest_event_initial_time, eventList: us.event_list };
        Uo.saveObjectVal("sawebjssdkchannel", e2);
      }, reset: function() {
        us.event_list = [], us.latest_event_initial_time = (/* @__PURE__ */ new Date()).getTime(), this.save();
      }, hasEvent: function(e2) {
        var t2 = false;
        return Eo.each(us.event_list, function(r2) {
          r2 === e2 && (t2 = true);
        }), t2;
      } } }, cs = rn(us, "SensorsChannel", "sdkAfterInitAPI"), ps = "1.27.3", ds = (/micromessenger\/([\d.]+)/i.test(navigator.userAgent || ""), function() {
        var e2 = {};
        return "undefined" != typeof document.hidden ? (e2.hidden = "hidden", e2.visibilityChange = "visibilitychange") : "undefined" != typeof document.msHidden ? (e2.hidden = "msHidden", e2.visibilityChange = "msvisibilitychange") : "undefined" != typeof document.webkitHidden && (e2.hidden = "webkitHidden", e2.visibilityChange = "webkitvisibilitychange"), e2;
      });
      Bo = ds().hidden;
      var fs, gs, _s, hs, ms, vs, ys, bs, ws = { android: /Android/i, iOS: /iPhone|iPad|iPod/i }, Ss = function() {
        for (var e2 in ws) if (navigator.userAgent.match(ws[e2])) return e2;
        return "";
      }, ks = Ss(), Ps = function() {
        return ws.hasOwnProperty(ks);
      }, Cs = function(e2) {
        return null != e2 && "[object Object]" == Object.prototype.toString.call(e2);
      }, Os = function(e2) {
        var t2 = /\/sd\/(\w+)\/(\w+)$/;
        return e2.match(t2);
      }, js = function(e2) {
        var t2 = e2._.URL(e2.para.server_url);
        return { origin: t2.origin, project: t2.searchParams.get("project") || "default" };
      }, Ns = function(e2, t2, r2) {
        e2.log("尝试唤起 android app");
        var n2 = t2;
        e2.log("唤起APP的地址：" + n2), window.location = n2, e2.timer = setTimeout(function() {
          var t3 = sn();
          return e2.log("hide:" + Bo + ":" + document[Bo]), t3 ? (e2.log("The page is hidden, stop navigating to download page"), false) : (e2.log("App可能未安装，跳转到下载地址"), void (window.location = r2));
        }, e2.timeout);
      }, Is = function(e2, t2, r2) {
        e2.log("尝试唤起 iOS app:" + t2), window.location.href = t2, e2.timer = setTimeout(function() {
          var t3 = sn();
          return t3 ? (e2.log("The page is hidden, stop navigating to download page"), false) : (e2.log("App可能未安装，跳转到下载地址"), void (window.location.href = r2));
        }, e2.timeout), e2.log("new timer:" + e2.timer);
      }, Ts = { plugin_name: ["deeplink", "Deeplink"], key: null, timer: null, sd: null, data: null, timeout: 2500, apiURL: "{origin}/sdk/deeplink/param?key={key}&system_type=JS&project={project}", init: function(e2) {
        if (this.sd) return this.logger("deeplink已经初始化"), false;
        arguments[0] ? Cs(arguments[0]) && "number" == typeof arguments[0].timeout ? this.sd = window.sensorsDataAnalytic201505 : this.sd = e2 : this.sd = window.sensorsDataAnalytic201505;
        var t2 = {};
        if (arguments.length > 0 && (1 === arguments.length && Cs(arguments[0]) ? t2 = arguments[0] : arguments.length >= 2 && Cs(arguments[1]) && (t2 = arguments[1])), !Ps()) return this.logger("不支持当前系统，目前只支持Android和iOS"), false;
        if (Cs(t2) && this.sd._.isNumber(t2.timeout) && t2.timeout >= 2500 && (this.timeout = t2.timeout), !this.sd.para.server_url) return this.logger("神策JS SDK配置项server_url未正确配置"), false;
        var r2 = js(this.sd);
        this.apiURL = this.apiURL.replace("{origin}", r2.origin).replace("{project}", r2.project);
        var n2 = this.sd._.getQueryParam(window.location.href, "deeplink");
        if (!n2) return this.logger("当前页面缺少deeplink参数"), false;
        n2 = window.decodeURIComponent(n2);
        var i2 = Os(n2);
        return i2 ? (this.key = i2[2], this.apiURL = this.apiURL.replace("{key}", window.encodeURIComponent(i2[2])), this.sd._.ajax({ url: this.apiURL, type: "GET", cors: true, credentials: false, success: (function(e3) {
          return e3.errorMsg ? (Ts.logger("API报错：" + e3.errorMsg), false) : (Ts.data = e3, Ts.logger("API查询成功，数据：" + JSON.stringify(e3, null, "  ")), void (this.data.app_key && (this.data.android_info && this.data.android_info.url_schemes && (this.data.android_info.url_schemes += "://sensorsdata/sd/" + this.data.app_key + "/" + this.key), this.data.ios_info && this.data.ios_info.url_schemes && (this.data.ios_info.url_schemes += "://sensorsdata/sd/" + this.data.app_key + "/" + this.key))));
        }).bind(this), error: function() {
          Ts.logger("API查询出错");
        } }), void this.addListeners()) : (this.logger("当前页面的deeplink参数无效"), false);
      }, openDeepLink: function() {
        if (this.logger("openDeeplink()"), !this.data) return this.logger("没有Deep link数据!"), false;
        if ("iOS" === ks) {
          this.logger("当前系统是iOS");
          var e2 = this.sd && this.sd._ && this.sd._.getIOSVersion() >= 9 && this.data.ios_info.ios_wake_url ? this.data.ios_info.ios_wake_url : this.data.ios_info.url_schemes;
          this.logger("唤起APP的地址：" + e2), Is(this, e2, this.data.ios_info.download_url);
        } else this.logger("当前系统是 android"), Ns(this, this.data.android_info.url_schemes, this.data.android_info.download_url);
      }, logger: function(e2) {
        this.sd && this.sd.log(e2);
      }, addListeners: function() {
        var e2 = ds().visibilityChange, t2 = this;
        e2 && document.addEventListener(e2, function() {
          clearTimeout(t2.timer), t2.logger("visibilitychange, clear timeout:" + t2.timer);
        }, false), window.addEventListener("pagehide", function() {
          t2.logger("page hide, clear timeout:" + t2.timer), clearTimeout(t2.timer);
        }, false);
      } }, As = on(Ts, null, "sdkReady"), Ds = "1.27.3", $s = { init: function(e2) {
        _s = e2, hs = _s && _s._, ms = _s && _s.log || console && console.log || function() {
        }, pn();
      }, handleCommand: fn }, xs = cn($s, "IOSBridge", "sdkAfterInitPara"), Es = "1.27.3", Ls = { init: function(e2) {
        vs = e2, ys = vs && vs._, bs = vs && vs.log || console && console.log || function() {
        }, mn();
      } }, Us = hn(Ls, "IOSObsoleteBridge", "sdkAfterInitPara"), Rs = "1.27.3", Bs = 5e3, Hs = 432e3;
      Pn.prototype.init = function(e2, t2) {
        if (e2) {
          if (this.sd = e2, this._ = this.sd._, t2) {
            this.option = t2;
            var r2 = t2.heartbeat_interval_time;
            r2 && (this._.isNumber(r2) || this._.isNumber(1 * r2)) && 1 * r2 > 0 && (this.heartbeat_interval_time = 1e3 * r2);
            var n2 = t2.max_duration;
            n2 && (this._.isNumber(n2) || this._.isNumber(1 * n2)) && 1 * n2 > 0 && (this.max_duration = n2);
          }
          this.page_id = Number(String(this._.getRandom()).slice(2, 5) + String(this._.getRandom()).slice(2, 4) + String((/* @__PURE__ */ new Date()).getTime()).slice(-4)), this.addEventListener(), document.hidden === true ? this.page_show_status = false : this.addHeartBeatInterval(), this.log("PageLeave初始化完毕");
        } else this.log("神策JS SDK未成功引入");
      }, Pn.prototype.log = function(e2) {
        this.sd && this.sd.log(e2);
      }, Pn.prototype.refreshPageEndTimer = function() {
        var e2 = this;
        this.timer && (clearTimeout(this.timer), this.timer = null), this.timer = setTimeout(function() {
          e2.page_hidden_status = false;
        }, Bs);
      }, Pn.prototype.hiddenStatusHandler = function() {
        clearTimeout(this.timer), this.timer = null, this.page_hidden_status = false;
      }, Pn.prototype.pageStartHandler = function() {
        this.start_time = +/* @__PURE__ */ new Date(), !document.hidden == true ? this.page_show_status = true : this.page_show_status = false, this.url = location.href, this.title = document.title;
      }, Pn.prototype.pageEndHandler = function() {
        if (this.page_hidden_status !== true) {
          var e2 = this.getPageLeaveProperties();
          this.page_show_status === false && delete e2.event_duration, this.page_show_status = false, this.page_hidden_status = true, this.isCollectUrl(this.url) && this.sd.track("$WebPageLeave", e2), this.refreshPageEndTimer(), this.delHeartBeatData();
        }
      }, Pn.prototype.addEventListener = function() {
        this.addPageStartListener(), this.addPageSwitchListener(), this.addSinglePageListener(), this.addPageEndListener();
      }, Pn.prototype.addPageStartListener = function() {
        var e2 = this;
        "onpageshow" in window && this._.addEvent(window, "pageshow", function() {
          e2.pageStartHandler(), e2.hiddenStatusHandler();
        });
      }, Pn.prototype.isCollectUrl = function(e2) {
        return "function" != typeof this.option.isCollectUrl || ("string" != typeof e2 || "" === e2 || this.option.isCollectUrl(e2));
      }, Pn.prototype.addSinglePageListener = function() {
        var e2 = this;
        this.sd.ee && this.sd.ee.spa.prepend("switch", function(t2) {
          t2 !== location.href && (e2.url = t2, e2.pageEndHandler(), e2.stopHeartBeatInterval(), e2.current_page_url = e2.url, e2.pageStartHandler(), e2.hiddenStatusHandler(), e2.addHeartBeatInterval());
        });
      }, Pn.prototype.addPageEndListener = function() {
        var e2 = this;
        this._.each(["pagehide", "beforeunload", "unload"], function(t2) {
          "on" + t2 in window && e2._.addEvent(window, t2, function() {
            e2.pageEndHandler(), e2.stopHeartBeatInterval();
          });
        });
      }, Pn.prototype.addPageSwitchListener = function() {
        var e2 = this;
        this._.listenPageState({ visible: function() {
          e2.pageStartHandler(), e2.hiddenStatusHandler(), e2.addHeartBeatInterval();
        }, hidden: function() {
          e2.url = location.href, e2.title = document.title, e2.pageEndHandler(), e2.stopHeartBeatInterval();
        } });
      }, Pn.prototype.addHeartBeatInterval = function() {
        this._.localStorage.isSupport() && this.startHeartBeatInterval();
      }, Pn.prototype.startHeartBeatInterval = function() {
        var e2 = this;
        this.heartbeat_interval_timer && this.stopHeartBeatInterval();
        var t2 = true;
        this.isCollectUrl(this.url) || (t2 = false), this.heartbeat_interval_timer = setInterval(function() {
          t2 && e2.saveHeartBeatData();
        }, this.heartbeat_interval_time), t2 && this.saveHeartBeatData("is_first_heartbeat"), this.reissueHeartBeatData();
      }, Pn.prototype.stopHeartBeatInterval = function() {
        clearInterval(this.heartbeat_interval_timer), this.heartbeat_interval_timer = null;
      }, Pn.prototype.saveHeartBeatData = function(e2) {
        var t2 = this.getPageLeaveProperties(), r2 = /* @__PURE__ */ new Date();
        t2.$time = r2, "is_first_heartbeat" === e2 && (t2.event_duration = 3.14);
        var n2 = this.sd.kit.buildData({ type: "track", event: "$WebPageLeave", properties: t2 });
        n2.heartbeat_interval_time = this.heartbeat_interval_time, this.sd.store.saveObjectVal(this.storage_name + "-" + this.page_id, n2);
      }, Pn.prototype.delHeartBeatData = function(e2) {
        this._.localStorage.isSupport() && this._.localStorage.remove(e2 || this.storage_name + "-" + this.page_id);
      }, Pn.prototype.reissueHeartBeatData = function() {
        for (var e2 = window.localStorage.length, t2 = e2 - 1; t2 >= 0; t2--) {
          var r2 = window.localStorage.key(t2);
          if (r2 && r2 !== this.storage_name + "-" + this.page_id && 0 === r2.indexOf(this.storage_name + "-")) {
            var n2 = this.sd.store.readObjectVal(r2);
            this._.isObject(n2) && 1 * /* @__PURE__ */ new Date() - n2.time > n2.heartbeat_interval_time + 5e3 && (delete n2.heartbeat_interval_time, n2._flush_time = (/* @__PURE__ */ new Date()).getTime(), this.sd.kit.sendData(n2), this.delHeartBeatData(r2));
          }
        }
      }, Pn.prototype.getPageLeaveProperties = function() {
        var e2 = (+/* @__PURE__ */ new Date() - this.start_time) / 1e3;
        (isNaN(e2) || e2 < 0 || e2 > this.max_duration) && (e2 = 0), e2 = Number(e2.toFixed(3));
        var t2 = this._.getReferrer(this.current_page_url), r2 = document.documentElement && document.documentElement.scrollTop || window.pageYOffset || document.body && document.body.scrollTop || 0;
        r2 = Math.round(r2) || 0;
        var n2 = { $title: this.title, $url: this._.getURL(this.url), $url_path: this._.getURLPath(this._.URL(this.url).pathname), $referrer_host: t2 ? this._.getHostname(t2) : "", $referrer: t2, $viewport_position: r2 };
        return 0 !== e2 && (n2.event_duration = e2), n2 = this._.extend(n2, this.option.custom_props);
      };
      var Js = new Pn(), Ms = kn(Js, "PageLeave", "sdkReady"), qs = "1.27.3", Fs = false, Ks = { init: function(e2, t2) {
        function r2(t3, r3) {
          if (t3.getEntries && "function" == typeof t3.getEntries) {
            for (var n3 = t3.getEntries(), i3 = null, a3 = 0; a3 < n3.length; a3++) "transferSize" in n3[a3] && (i3 += n3[a3].transferSize);
            e2._.isNumber(i3) && i3 >= 0 && i3 < 10737418240 && (r3.$page_resource_size = Number((i3 / 1024).toFixed(3)));
          }
        }
        function n2(t3) {
          var r3 = 0;
          if (t3.timing) {
            var n3 = t3.timing;
            0 !== n3.fetchStart && e2._.isNumber(n3.fetchStart) && 0 !== n3.domContentLoadedEventEnd && e2._.isNumber(n3.domContentLoadedEventEnd) ? r3 = n3.domContentLoadedEventEnd - n3.fetchStart : e2.log("performance 数据获取异常");
          }
          return r3;
        }
        function i2(t3) {
          var r3 = 0;
          if (e2._.isFunction(t3.getEntriesByType)) {
            var n3 = t3.getEntriesByType("navigation") || [{}];
            r3 = (n3[0] || {}).domContentLoadedEventEnd || 0;
          }
          return r3;
        }
        function a2() {
          var o2 = 0, s2 = window.performance || window.webkitPerformance || window.msPerformance || window.mozPerformance, l2 = { $url: e2._.getURL(), $title: document.title, $url_path: e2._.getURLPath(), $referrer: e2._.getReferrer(null, true) };
          if (s2 ? (o2 = i2(s2) || n2(s2), r2(s2, l2)) : e2.log("浏览器未支持 performance API."), o2 > 0) {
            var u2 = e2._.isObject(t2) && t2.max_duration || 1800;
            o2 = Number((o2 / 1e3).toFixed(3)), (!e2._.isNumber(u2) || u2 <= 0 || o2 <= u2) && (l2.event_duration = o2);
          }
          Fs || (e2.track("$WebPageLoad", l2), Fs = true), window.removeEventListener ? window.removeEventListener("load", a2) : window.detachEvent && window.detachEvent("onload", a2);
        }
        "complete" == document.readyState ? a2() : window.addEventListener ? window.addEventListener("load", a2) : window.attachEvent && window.attachEvent("onload", a2);
      } }, Vs = jn(Ks, "PageLoad", "sdkReady");
      In.prototype.init = function(e2) {
        if (e2) {
          this.sd = e2, this._ = e2._, this.log = e2.log;
          var t2 = this;
          e2.registerInterceptor("buildDataStage", { extendProps: { priority: 0, entry: function(e3) {
            return Nn(e3, t2);
          } } });
        } else this.log("神策JS SDK未成功引入");
      }, In.prototype.register = function(e2) {
        return this.sd ? void (this._.isObject(e2) && this._.isArray(e2.events) && e2.events.length > 0 && this._.isObject(e2.properties) && !this._.isEmptyObject(e2.properties) ? this.customRegister.push(e2) : this.log("RegisterProperties: register 参数错误")) : void this.log("神策JS SDK未成功引入");
      }, In.prototype.hookRegister = function(e2) {
        return this.sd ? void (this._.isFunction(e2) ? this.customRegister.push(e2) : this.log("RegisterProperties: hookRegister 参数错误")) : void this.log("神策JS SDK未成功引入");
      };
      var Ws = "1.27.3";
      In.prototype.plugin_name = "RegisterProperties";
      var zs, Xs, Zs = new In(), Ys = Dn(Zs), Gs = "1.27.3", Qs = window.console && window.console.log || function() {
      }, el = { init: function(e2) {
        return zs = e2, Qs = zs && zs.log || Qs, e2 && e2.kit && e2.kit.buildData ? (Xs = zs.kit.buildData, zs.kit.buildData = Ln, void Qs("RegisterPropertyPageHeight 插件初始化完成")) : void Qs("RegisterPropertyPageHeight 插件初始化失败,当前主sdk不支持 RegisterPropertyPageHeight 插件，请升级主sdk");
      } }, tl = En(el, "RegisterPropertyPageHeight", "sdkReady"), rl = "1.27.3", nl = {};
      nl.getPart = function(e2) {
        var t2 = false, r2 = this.option.length;
        if (r2) {
          for (var n2 = 0; n2 < r2; n2++) if (e2.indexOf(this.option[n2].part_url) > -1) return true;
        }
        return t2;
      }, nl.getPartHash = function(e2) {
        var t2 = this.option.length, r2 = false;
        if (t2) {
          for (var n2 = 0; n2 < t2; n2++) if (e2.indexOf(this.option[n2].part_url) > -1) return this.option[n2].after_hash;
        }
        return !!r2;
      }, nl.getCurrenId = function() {
        var e2 = this.store.getDistinctId() || "", t2 = this.store.getFirstId() || "";
        this._.urlSafeBase64 && this._.urlSafeBase64.encode ? e2 = e2 ? this._.urlSafeBase64.trim(this._.urlSafeBase64.encode(this._.base64Encode(e2))) : "" : this._.rot13obfs && (e2 = e2 ? this._.rot13obfs(e2) : "");
        var r2 = t2 ? "f" + e2 : "d" + e2;
        return encodeURIComponent(r2);
      }, nl.rewriteUrl = function(e2, t2) {
        var r2 = this, n2 = /([^?#]+)(\?[^#]*)?(#.*)?/, i2 = n2.exec(e2), a2 = "";
        if (i2) {
          var o2, s2 = i2[1] || "", l2 = i2[2] || "", u2 = i2[3] || "", c2 = "_sasdk=" + this.getCurrenId(), p2 = function(e3) {
            var t3 = e3.split("&"), n3 = [];
            return r2._.each(t3, function(e4) {
              e4.indexOf("_sasdk=") > -1 ? n3.push(c2) : n3.push(e4);
            }), n3.join("&");
          };
          if (this.getPartHash(e2)) {
            o2 = u2.indexOf("_sasdk");
            var d2 = u2.indexOf("?");
            a2 = d2 > -1 ? o2 > -1 ? s2 + l2 + "#" + u2.substring(1, o2) + p2(u2.substring(o2, u2.length)) : s2 + l2 + u2 + "&" + c2 : s2 + l2 + "#" + u2.substring(1) + "?" + c2;
          } else {
            o2 = l2.indexOf("_sasdk");
            var f2 = /^\?(\w)+/.test(l2);
            a2 = f2 ? o2 > -1 ? s2 + "?" + p2(l2.substring(1)) + u2 : s2 + l2 + "&" + c2 + u2 : s2 + "?" + c2 + u2;
          }
          return t2 && (t2.href = a2), a2;
        }
      }, nl.getUrlId = function() {
        var e2 = location.href.match(/_sasdk=([aufd][^\?\#\&\=]+)/);
        if (this._.isArray(e2) && e2[1]) {
          var t2 = decodeURIComponent(e2[1]);
          return !t2 || "f" !== t2.substring(0, 1) && "d" !== t2.substring(0, 1) || (this._.urlSafeBase64 && this._.urlSafeBase64.isUrlSafeBase64 && this._.urlSafeBase64.isUrlSafeBase64(t2) ? t2 = t2.substring(0, 1) + this._.base64Decode(this._.urlSafeBase64.decode(t2.substring(1))) : this._.rot13defs && (t2 = t2.substring(0, 1) + this._.rot13defs(t2.substring(1)))), t2;
        }
        return "";
      }, nl.setRefferId = function(e2) {
        var t2 = this.store.getDistinctId(), r2 = this.getUrlId();
        if (r2 && "" !== r2) {
          var n2 = "a" === r2.substring(0, 1) || "d" === r2.substring(0, 1);
          r2 = r2.substring(1), r2 !== t2 && (n2 ? (this.sd.identify(r2, true), this.store.getFirstId() && this.sd.saEvent.send({ original_id: r2, distinct_id: t2, type: "track_signup", event: "$SignUp", properties: {} }, null)) : this.store.getFirstId() && !e2.re_login || this.sd.login(r2));
        }
      }, nl.addListen = function() {
        var e2 = this, t2 = function(t3) {
          var r2, n2, i2 = t3.target, a2 = i2.tagName.toLowerCase(), o2 = i2.parentNode;
          if ("a" === a2 && i2.href || o2 && o2.tagName && "a" === o2.tagName.toLowerCase() && o2.href) {
            "a" === a2 && i2.href ? (r2 = i2.href, n2 = i2) : (r2 = o2.href, n2 = o2);
            var s2 = e2._.URL(r2), l2 = s2.protocol;
            "http:" !== l2 && "https:" !== l2 || e2.getPart(r2) && e2.rewriteUrl(r2, n2);
          }
        };
        e2._.addEvent(document, "mousedown", t2), window.PointerEvent && "maxTouchPoints" in window.navigator && window.navigator.maxTouchPoints >= 0 && e2._.addEvent(document, "pointerdown", t2);
      }, nl.init = function(e2, t2) {
        function r2(t3) {
          for (var r3 = t3.length, n2 = [], i2 = 0; i2 < r3; i2++) /[A-Za-z0-9]+\./.test(t3[i2].part_url) && "[object Boolean]" == Object.prototype.toString.call(t3[i2].after_hash) ? n2.push(t3[i2]) : e2.log("linker 配置的第 " + (i2 + 1) + " 项格式不正确，请检查参数格式！");
          return n2;
        }
        return this.sd = e2, this._ = e2._, this.store = e2.store, this.para = e2.para, this._.isObject(t2) && this._.isArray(t2.linker) && t2.linker.length > 0 ? (this.setRefferId(t2), this.addListen(), this.option = t2.linker, void (this.option = r2(this.option))) : void e2.log("请配置打通域名参数！");
      };
      var il, al, ol, sl, ll, ul, cl, pl, dl, fl, gl, _l, hl, ml = Bn(nl, "SiteLinker", "sdkReady"), vl = "utm_source utm_medium utm_campaign utm_content utm_term", yl = "1.27.3", bl = { init: function(e2) {
        function t2() {
          var e3 = vl.split(" "), t3 = "", r2 = {};
          return il._.isArray(il.para.source_channel) && il.para.source_channel.length > 0 && (e3 = e3.concat(il.para.source_channel), e3 = il._.unique(e3)), il._.each(e3, function(e4) {
            t3 = il._.getQueryParam(location.href, e4), t3.length && (r2[e4] = t3);
          }), r2;
        }
        e2 && !il && (il = e2, il.registerInterceptor("businessStage", { getUtmData: { priority: 0, entry: function() {
          return t2();
        } } }));
      } }, wl = Mn(bl, "Utm", "sdkAfterInitPara"), Sl = "1.27.3", kl = false, Pl = null, Cl = { init: function(e2) {
        Pl = e2, Pl.disableSDK = Vn, Pl.enableSDK = Wn, Pl.getDisabled = zn;
      } }, Ol = Kn(Cl, "DisableSDK", "sdkInitAPI"), jl = "1.27.3", Nl = { plugin_name: "DebugSender", init: function(e2) {
        al = e2, ol = al._, ti();
      } }, Il = Yn(Nl), Tl = "1.27.3", Al = { plugin_name: "JsappSender", init: function(e2) {
        sl = e2, ll = sl._, oi();
      } }, Dl = ii(Al), $l = "1.27.3", xl = null, El = { plugin_name: "BatchSender", init: function(e2) {
        ul = e2, cl = ul._, fi();
      } }, Ll = ci(El), Ul = "1.27.3", Rl = { plugin_name: "BeaconSender", init: function(e2) {
        pl = e2, dl = pl._, bi();
      } }, Bl = hi(Rl), Hl = "1.27.3", Jl = { plugin_name: "AjaxSender", init: function(e2) {
        fl = e2, gl = fl._, ji();
      } }, Ml = ki(Jl), ql = "1.27.3", Fl = { plugin_name: "ImageSender", init: function(e2) {
        _l = e2, hl = _l._, Ei();
      } }, Kl = Ti(Fl), Vl = null, Wl = null, zl = [], Xl = { init: function(e2) {
        e2 && (Vl = e2, Wl = Vl._, Vl.logger && Vl.logger.appendWriter(Bi), Vl.on && Vl.on("sdkAfterInitPara", function() {
          for (var e3 = 0; e3 < zl.length; e3++) Hi(zl[e3]);
          zl = null;
        }), Vl.on && Vl.on("sdkInitAPI", function() {
          Vl.enableLocalLog = Vi, Vl.disableLocalLog = Wi;
        }));
      } }, Zl = Ri(Xl, "ConsoleLogger"), Yl = "sensorsdata_jssdk_debug";
      Xi.modules = Xi.modules || {};
      for (var Gl = [Zl, Ko, Qo, ss, cs, As, xs, Us, Ms, Vs, Ys, tl, ml, wl, Ol, Il, Dl, Ll, Bl, Ml, Kl], Ql = [Zl, Mo, wl, Ol, Dl, Il, Qo, xs, ss, Us, Ll, Bl, Ml, Kl], eu = 0; eu < Gl.length; eu++) {
        var tu = Gl[eu];
        Xi._.isString(tu.plugin_name) ? Xi.modules[tu.plugin_name] = tu : Xi._.isArray(tu.plugin_name) && Xi._.each(tu.plugin_name, function(e2) {
          Xi.modules[e2] = tu;
        });
      }
      for (eu = 0; eu < Ql.length; eu++) Xi.use(Ql[eu]);
      var ru = Xi;
      try {
        "string" == typeof window.sensorsDataAnalytic201505 ? (Xi.para = window[sensorsDataAnalytic201505].para, Xi._q = window[sensorsDataAnalytic201505]._q, window[sensorsDataAnalytic201505] = Xi, window.sensorsDataAnalytic201505 = Xi, Xi.init()) : "undefined" == typeof window.sensorsDataAnalytic201505 ? window.sensorsDataAnalytic201505 = Xi : ru = window.sensorsDataAnalytic201505;
      } catch (nu) {
        Ae(nu);
      }
      var iu = ru;
      return iu.DEFAULT_SEND_TYPE = "image", iu;
    });
  }
});
export default require_sensorsdata();
//# sourceMappingURL=sa-sdk-javascript.js.map
